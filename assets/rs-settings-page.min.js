(()=>{var I=(n,t)=>()=>(n&&(t=n(n=0)),t);var Ui=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);function on(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function at(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?on(Object(e),!0).forEach(function(i){Xi(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):on(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ie(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ie=function(t){return typeof t}:ie=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(n)}function Xi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ut(){return ut=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ut.apply(this,arguments)}function Wi(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function Qi(n,t){if(n==null)return{};var e=Wi(n,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function ct(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}function T(n,t,e){n.addEventListener(t,e,!dt&&gn)}function A(n,t,e){n.removeEventListener(t,e,!dt&&gn)}function le(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function mn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function it(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&le(n,t):le(n,t))||i&&n===e)return n;if(n===e)break}while(n=mn(n))}return null}function Q(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(an," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(an," ")}}function y(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function Dt(n,t){var e="";if(typeof n=="string")e=n;else do{var i=y(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function vn(n,t,e){if(n){var i=n.getElementsByTagName(t),r=0,o=i.length;if(e)for(;r<o;r++)e(i[r],r);return i}return[]}function st(){var n=document.scrollingElement;return n||document.documentElement}function B(n,t,e,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var o,s,a,l,c,u,d;if(n!==window&&n.parentNode&&n!==st()?(o=n.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,d=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||e)&&n!==window&&(r=r||n.parentNode,!dt))do if(r&&r.getBoundingClientRect&&(y(r,"transform")!=="none"||e&&y(r,"position")!=="static")){var f=r.getBoundingClientRect();s-=f.top+parseInt(y(r,"border-top-width")),a-=f.left+parseInt(y(r,"border-left-width")),l=s+o.height,c=a+o.width;break}while(r=r.parentNode);if(i&&n!==window){var v=Dt(r||n),p=v&&v.a,g=v&&v.d;v&&(s/=g,a/=p,d/=p,u/=g,l=s+u,c=a+d)}return{top:s,left:a,bottom:l,right:c,width:d,height:u}}}function ln(n,t,e){for(var i=mt(n,!0),r=B(n)[t];i;){var o=B(i)[e],s=void 0;if(e==="top"||e==="left"?s=r>=o:s=r<=o,!s)return i;if(i===st())break;i=mt(i,!1)}return!1}function Tt(n,t,e,i){for(var r=0,o=0,s=n.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==_.ghost&&(i||s[o]!==_.dragged)&&it(s[o],e.draggable,n,!1)){if(r===t)return s[o];r++}o++}return null}function $e(n,t){for(var e=n.lastElementChild;e&&(e===_.ghost||y(e,"display")==="none"||t&&!le(e,t));)e=e.previousElementSibling;return e||null}function et(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==_.clone&&(!t||le(n,t))&&e++;return e}function cn(n){var t=0,e=0,i=st();if(n)do{var r=Dt(n),o=r.a,s=r.d;t+=n.scrollLeft*o,e+=n.scrollTop*s}while(n!==i&&(n=n.parentNode));return[t,e]}function Zi(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function mt(n,t){if(!n||!n.getBoundingClientRect)return st();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=y(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return st();if(i||t)return e;i=!0}}while(e=e.parentNode);return st()}function tr(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ae(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}function bn(n,t){return function(){if(!Nt){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),Nt=setTimeout(function(){Nt=void 0},t)}}}function er(){clearTimeout(Nt),Nt=void 0}function yn(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function _n(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function wn(n,t,e){var i={};return Array.from(n.children).forEach(function(r){var o,s,a,l;if(!(!it(r,t.draggable,n,!1)||r.animated||r===e)){var c=B(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,c.left),i.top=Math.min((s=i.top)!==null&&s!==void 0?s:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function nr(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(y(r,"display")==="none"||r===_.ghost)){n.push({target:r,rect:B(r)});var o=at({},n[n.length-1].rect);if(r.thisAnimationDuration){var s=Dt(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(Zi(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var o=!1,s=0;n.forEach(function(a){var l=0,c=a.target,u=c.fromRect,d=B(c),f=c.prevFromRect,v=c.prevToRect,p=a.rect,g=Dt(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&Ae(f,d)&&!Ae(u,d)&&(p.top-d.top)/(p.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=rr(p,f,v,r.options)),Ae(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=r.options.animation),r.animate(c,p,d,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof i=="function"&&i()},s):typeof i=="function"&&i(),n=[]},animate:function(i,r,o,s){if(s){y(i,"transition",""),y(i,"transform","");var a=Dt(this.el),l=a&&a.a,c=a&&a.d,u=(r.left-o.left)/(l||1),d=(r.top-o.top)/(c||1);i.animatingX=!!u,i.animatingY=!!d,y(i,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=ir(i),y(i,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),y(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){y(i,"transition",""),y(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},s)}}}}function ir(n){return n.offsetWidth}function rr(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}function or(n){var t=n.sortable,e=n.rootEl,i=n.name,r=n.targetEl,o=n.cloneEl,s=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,d=n.newDraggableIndex,f=n.originalEvent,v=n.putSortable,p=n.extraEventProperties;if(t=t||e&&e[X],!!t){var g,E=t.options,O="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!dt&&!Kt?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=s||e,g.from=a||e,g.item=r||e,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=v?v.lastPutMode:void 0;var m=at(at({},p),$t.getEventProperties(i,t));for(var D in m)g[D]=m[D];e&&e.dispatchEvent(g),E[O]&&E[O].call(t,g)}}function G(n){or(at({putSortable:V,cloneEl:F,targetEl:h,rootEl:P,oldIndex:At,oldDraggableIndex:Rt,newIndex:J,newDraggableIndex:ht},n))}function _(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=ut({},t),n[X]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return En(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&(!Mt||Ke),emptyInsertThreshold:5};$t.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);On(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:ar,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?T(n,"pointerdown",this._onTapStart):(T(n,"mousedown",this._onTapStart),T(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(n,"dragover",this),T(n,"dragenter",this)),ue.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ut(this,nr())}function dr(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function ne(n,t,e,i,r,o,s,a){var l,c=n[X],u=c.options.onMove,d;return window.CustomEvent&&!dt&&!Kt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=n,l.dragged=e,l.draggedRect=i,l.related=r||t,l.relatedRect=o||B(t),l.willInsertAfter=a,l.originalEvent=s,n.dispatchEvent(l),u&&(d=u.call(c,l,s)),d}function ke(n){n.draggable=!1}function fr(){Ne=!1}function pr(n,t,e){var i=B(Tt(e.el,0,e.options,!0)),r=wn(e.el,e.options,w),o=10;return t?n.clientX<r.left-o||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-o||n.clientY<i.bottom&&n.clientX<i.left}function hr(n,t,e){var i=B($e(e.el,e.options.draggable)),r=wn(e.el,e.options,w),o=10;return t?n.clientX>r.right+o||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+o||n.clientX>i.right&&n.clientY>i.top}function gr(n,t,e,i,r,o,s,a){var l=i?n.clientY:n.clientX,c=i?e.height:e.width,u=i?e.top:e.left,d=i?e.bottom:e.right,f=!1;if(!s){if(a&&oe<c*r){if(!Bt&&(Ht===1?l>u+c*o/2:l<d-c*o/2)&&(Bt=!0),Bt)f=!0;else if(Ht===1?l<u+oe:l>d-oe)return-Ht}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return mr(t)}return f=f||s,f&&(l<u+c*o/2||l>d-c*o/2)?l>u+c/2?1:-1:0}function mr(n){return et(h)<et(n)?1:-1}function vr(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function br(n){de.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&de.push(i)}}function se(n){return setTimeout(n,0)}function Re(n){return clearTimeout(n)}function yr(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):i.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll)),pn(),ae(),er()},nulling:function(){fe=He=Pt=Be=Ft=Pe=Fe=null,H.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,s);if(fe=e,i||this.options.forceAutoScrollFallback||Kt||dt||Mt){Me(e,this.options,a,i);var l=mt(a,!0);Be&&(!Ft||o!==Pe||s!==Fe)&&(Ft&&pn(),Ft=setInterval(function(){var c=mt(document.elementFromPoint(o,s),!0);c!==l&&(l=c,ae()),Me(e,r.options,c,i)},10),Pe=o,Fe=s)}else{if(!this.options.bubbleScroll||mt(a,!0)===st()){ae();return}Me(e,this.options,mt(a,!1),!1)}}},ut(n,{pluginName:"scroll",initializeByDefault:!0})}function ae(){H.forEach(function(n){clearInterval(n.pid)}),H=[]}function pn(){clearInterval(Ft)}function Ye(){}function Ve(){}var Ji,dt,Kt,sn,Mt,Ke,hn,gn,an,Nt,X,Ot,De,$t,sr,U,h,R,w,P,Et,re,F,gt,At,J,Rt,ht,Zt,V,xt,ce,ue,wt,nt,Te,Ie,un,dn,kt,Ct,Ht,Bt,te,oe,j,Le,Ne,de,pe,ee,fn,ar,Sn,En,lr,cr,On,Cn,xn,St,ur,H,Pt,He,Be,Pe,Fe,fe,Ft,Me,An,Dn,Tn=I(()=>{Ji="1.15.6";dt=ct(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Kt=ct(/Edge/i),sn=ct(/firefox/i),Mt=ct(/safari/i)&&!ct(/chrome/i)&&!ct(/android/i),Ke=ct(/iP(ad|od|hone)/i),hn=ct(/chrome/i)&&ct(/android/i),gn={capture:!1,passive:!1};an=/\s+/g;X="Sortable"+new Date().getTime();Ot=[],De={initializeByDefault:!0},$t={mount:function(t){for(var e in De)De.hasOwnProperty(e)&&!(e in t)&&(t[e]=De[e]);Ot.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Ot.push(t)},pluginEvent:function(t,e,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=t+"Global";Ot.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](at({sortable:e},i)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](at({sortable:e},i)))})},initializePlugins:function(t,e,i,r){Ot.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,ut(i,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var i={};return Ot.forEach(function(r){typeof r.eventProperties=="function"&&ut(i,r.eventProperties.call(e[r.pluginName],t))}),i},modifyOption:function(t,e,i){var r;return Ot.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],i))}),r}};sr=["evt"],U=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=Qi(i,sr);$t.pluginEvent.bind(_)(t,e,at({dragEl:h,parentEl:R,ghostEl:w,rootEl:P,nextEl:Et,lastDownEl:re,cloneEl:F,cloneHidden:gt,dragStarted:kt,putSortable:V,activeSortable:_.active,originalEvent:r,oldIndex:At,oldDraggableIndex:Rt,newIndex:J,newDraggableIndex:ht,hideGhostForTarget:Cn,unhideGhostForTarget:xn,cloneNowHidden:function(){gt=!0},cloneNowShown:function(){gt=!1},dispatchSortableEvent:function(a){G({sortable:e,name:a,originalEvent:r})}},o))};xt=!1,ce=!1,ue=[],Bt=!1,te=!1,Le=[],Ne=!1,de=[],pe=typeof document<"u",ee=Ke,fn=Kt||dt?"cssFloat":"float",ar=pe&&!hn&&!Ke&&"draggable"in document.createElement("div"),Sn=function(){if(pe){if(dt)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),En=function(t,e){var i=y(t),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=Tt(t,0,e),s=Tt(t,1,e),a=o&&y(o),l=s&&y(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+B(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+B(s).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&i[fn]==="none"||s&&i[fn]==="none"&&c+u>r)?"vertical":"horizontal"},lr=function(t,e,i){var r=i?t.left:t.top,o=i?t.right:t.bottom,s=i?t.width:t.height,a=i?e.left:e.top,l=i?e.right:e.bottom,c=i?e.width:e.height;return r===a||o===l||r+s/2===a+c/2},cr=function(t,e){var i;return ue.some(function(r){var o=r[X].options.emptyInsertThreshold;if(!(!o||$e(r))){var s=B(r),a=t>=s.left-o&&t<=s.right+o,l=e>=s.top-o&&e<=s.bottom+o;if(a&&l)return i=r}}),i},On=function(t){function e(o,s){return function(a,l,c,u){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||d))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(a,l,c,u),s)(a,l,c,u);var f=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var i={},r=t.group;(!r||ie(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=e(r.pull,!0),i.checkPut=e(r.put),i.revertClone=r.revertClone,t.group=i},Cn=function(){!Sn&&w&&y(w,"display","none")},xn=function(){!Sn&&w&&y(w,"display","")};pe&&!hn&&document.addEventListener("click",function(n){if(ce)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ce=!1,!1},!0);St=function(t){if(h){t=t.touches?t.touches[0]:t;var e=cr(t.clientX,t.clientY);if(e){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[X]._onDragOver(i)}}},ur=function(t){h&&h.parentNode[X]._isOutsideThisEl(t.target)};_.prototype={constructor:_,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ct=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,h):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,r=this.options,o=r.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=r.filter;if(br(i),!h&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Mt&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=it(l,r.draggable,i,!1),!(l&&l.animated)&&re!==l)){if(At=et(l),Rt=et(l,r.draggable),typeof u=="function"){if(u.call(this,t,l,this)){G({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),U("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=it(c,d.trim(),i,!1),d)return G({sortable:e,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),U("filter",e,{evt:t}),!0}),u)){o&&t.preventDefault();return}r.handle&&!it(c,r.handle,i,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,i){var r=this,o=r.el,s=r.options,a=o.ownerDocument,l;if(i&&!h&&i.parentNode===o){var c=B(i);if(P=o,h=i,R=h.parentNode,Et=h.nextSibling,re=i,Zt=s.group,_.dragged=h,wt={target:h,clientX:(e||t).clientX,clientY:(e||t).clientY},un=wt.clientX-c.left,dn=wt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,h.style["will-change"]="all",l=function(){if(U("delayEnded",r,{evt:t}),_.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!sn&&r.nativeDraggable&&(h.draggable=!0),r._triggerDragStart(t,e),G({sortable:r,name:"choose",originalEvent:t}),Q(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(u){vn(h,u.trim(),ke)}),T(a,"dragover",St),T(a,"mousemove",St),T(a,"touchmove",St),s.supportPointer?(T(a,"pointerup",r._onDrop),!this.nativeDraggable&&T(a,"pointercancel",r._onDrop)):(T(a,"mouseup",r._onDrop),T(a,"touchend",r._onDrop),T(a,"touchcancel",r._onDrop)),sn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),U("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Kt||dt))){if(_.eventCanceled){this._onDrop();return}s.supportPointer?(T(a,"pointerup",r._disableDelayedDrag),T(a,"pointercancel",r._disableDelayedDrag)):(T(a,"mouseup",r._disableDelayedDrag),T(a,"touchend",r._disableDelayedDrag),T(a,"touchcancel",r._disableDelayedDrag)),T(a,"mousemove",r._delayedDragTouchMoveHandler),T(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&T(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&ke(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;A(t,"mouseup",this._disableDelayedDrag),A(t,"touchend",this._disableDelayedDrag),A(t,"touchcancel",this._disableDelayedDrag),A(t,"pointerup",this._disableDelayedDrag),A(t,"pointercancel",this._disableDelayedDrag),A(t,"mousemove",this._delayedDragTouchMoveHandler),A(t,"touchmove",this._delayedDragTouchMoveHandler),A(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):e?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(h,"dragend",this),T(P,"dragstart",this._onDragStart));try{document.selection?se(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(xt=!1,P&&h){U("dragStarted",this,{evt:e}),this.nativeDraggable&&T(document,"dragover",ur);var i=this.options;!t&&Q(h,i.dragClass,!1),Q(h,i.ghostClass,!0),_.active=this,t&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(nt){this._lastX=nt.clientX,this._lastY=nt.clientY,Cn();for(var t=document.elementFromPoint(nt.clientX,nt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(nt.clientX,nt.clientY),t!==e);)e=t;if(h.parentNode[X]._isOutsideThisEl(t),e)do{if(e[X]){var i=void 0;if(i=e[X]._onDragOver({clientX:nt.clientX,clientY:nt.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=mn(e));xn()}},_onTouchMove:function(t){if(wt){var e=this.options,i=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=w&&Dt(w,!0),a=w&&s&&s.a,l=w&&s&&s.d,c=ee&&j&&cn(j),u=(o.clientX-wt.clientX+r.x)/(a||1)+(c?c[0]-Le[0]:0)/(a||1),d=(o.clientY-wt.clientY+r.y)/(l||1)+(c?c[1]-Le[1]:0)/(l||1);if(!_.active&&!xt){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(w){s?(s.e+=u-(Te||0),s.f+=d-(Ie||0)):s={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");y(w,"webkitTransform",f),y(w,"mozTransform",f),y(w,"msTransform",f),y(w,"transform",f),Te=u,Ie=d,nt=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!w){var t=this.options.fallbackOnBody?document.body:P,e=B(h,!0,ee,!0,t),i=this.options;if(ee){for(j=t;y(j,"position")==="static"&&y(j,"transform")==="none"&&j!==document;)j=j.parentNode;j!==document.body&&j!==document.documentElement?(j===document&&(j=st()),e.top+=j.scrollTop,e.left+=j.scrollLeft):j=st(),Le=cn(j)}w=h.cloneNode(!0),Q(w,i.ghostClass,!1),Q(w,i.fallbackClass,!0),Q(w,i.dragClass,!0),y(w,"transition",""),y(w,"transform",""),y(w,"box-sizing","border-box"),y(w,"margin",0),y(w,"top",e.top),y(w,"left",e.left),y(w,"width",e.width),y(w,"height",e.height),y(w,"opacity","0.8"),y(w,"position",ee?"absolute":"fixed"),y(w,"zIndex","100000"),y(w,"pointerEvents","none"),_.ghost=w,t.appendChild(w),y(w,"transform-origin",un/parseInt(w.style.width)*100+"% "+dn/parseInt(w.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,r=t.dataTransfer,o=i.options;if(U("dragStart",this,{evt:t}),_.eventCanceled){this._onDrop();return}U("setupClone",this),_.eventCanceled||(F=_n(h),F.removeAttribute("id"),F.draggable=!1,F.style["will-change"]="",this._hideClone(),Q(F,this.options.chosenClass,!1),_.clone=F),i.cloneId=se(function(){U("clone",i),!_.eventCanceled&&(i.options.removeCloneOnHide||P.insertBefore(F,h),i._hideClone(),G({sortable:i,name:"clone"}))}),!e&&Q(h,o.dragClass,!0),e?(ce=!0,i._loopId=setInterval(i._emulateDragOver,50)):(A(document,"mouseup",i._onDrop),A(document,"touchend",i._onDrop),A(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,h)),T(document,"drop",i),y(h,"transform","translateZ(0)")),xt=!0,i._dragStartId=se(i._dragStarted.bind(i,e,t)),T(document,"selectstart",i),kt=!0,window.getSelection().removeAllRanges(),Mt&&y(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,r,o,s,a=this.options,l=a.group,c=_.active,u=Zt===l,d=a.sort,f=V||c,v,p=this,g=!1;if(Ne)return;function E(Lt,Gi){U(Lt,p,at({evt:t,isOwner:u,axis:v?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:d,fromSortable:f,target:i,completed:m,onMove:function(rn,zi){return ne(P,e,h,r,rn,B(rn),t,zi)},changed:D},Gi))}function O(){E("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function m(Lt){return E("dragOverCompleted",{insertion:Lt}),Lt&&(u?c._hideClone():c._showClone(p),p!==f&&(Q(h,V?V.options.ghostClass:c.options.ghostClass,!1),Q(h,a.ghostClass,!0)),V!==p&&p!==_.active?V=p:p===_.active&&V&&(V=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){E("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===h&&!h.animated||i===e&&!i.animated)&&(Ct=null),!a.dragoverBubble&&!t.rootEl&&i!==document&&(h.parentNode[X]._isOutsideThisEl(t.target),!Lt&&St(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function D(){J=et(h),ht=et(h,a.draggable),G({sortable:p,name:"change",toEl:e,newIndex:J,newDraggableIndex:ht,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=it(i,a.draggable,e,!0),E("dragOver"),_.eventCanceled)return g;if(h.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return m(!1);if(ce=!1,c&&!a.disabled&&(u?d||(s=R!==P):V===this||(this.lastPutMode=Zt.checkPull(this,c,h,t))&&l.checkPut(this,c,h,t))){if(v=this._getDirection(t,i)==="vertical",r=B(h),E("dragOverValid"),_.eventCanceled)return g;if(s)return R=P,O(),this._hideClone(),E("revert"),_.eventCanceled||(Et?P.insertBefore(h,Et):P.appendChild(h)),m(!0);var k=$e(e,a.draggable);if(!k||hr(t,v,this)&&!k.animated){if(k===h)return m(!1);if(k&&e===t.target&&(i=k),i&&(o=B(i)),ne(P,e,h,r,i,o,t,!!i)!==!1)return O(),k&&k.nextSibling?e.insertBefore(h,k.nextSibling):e.appendChild(h),R=e,D(),m(!0)}else if(k&&pr(t,v,this)){var tt=Tt(e,0,a,!0);if(tt===h)return m(!1);if(i=tt,o=B(i),ne(P,e,h,r,i,o,t,!1)!==!1)return O(),e.insertBefore(h,tt),R=e,D(),m(!0)}else if(i.parentNode===e){o=B(i);var Y=0,S,x=h.parentNode!==e,b=!lr(h.animated&&h.toRect||r,i.animated&&i.toRect||o,v),N=v?"top":"left",C=ln(i,"top","top")||ln(h,"top","top"),ot=C?C.scrollTop:void 0;Ct!==i&&(S=o[N],Bt=!1,te=!b&&a.invertSwap||x),Y=gr(t,i,o,v,b?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,te,Ct===i);var z;if(Y!==0){var lt=et(h);do lt-=Y,z=R.children[lt];while(z&&(y(z,"display")==="none"||z===w))}if(Y===0||z===i)return m(!1);Ct=i,Ht=Y;var _t=i.nextElementSibling,pt=!1;pt=Y===1;var Jt=ne(P,e,h,r,i,o,t,pt);if(Jt!==!1)return(Jt===1||Jt===-1)&&(pt=Jt===1),Ne=!0,setTimeout(fr,30),O(),pt&&!_t?e.appendChild(h):i.parentNode.insertBefore(h,pt?_t:i),C&&yn(C,0,ot-C.scrollTop),R=h.parentNode,S!==void 0&&!te&&(oe=Math.abs(S-B(i)[N])),D(),m(!0)}if(e.contains(h))return m(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove),A(document,"touchmove",this._onTouchMove),A(document,"pointermove",this._onTouchMove),A(document,"dragover",St),A(document,"mousemove",St),A(document,"touchmove",St)},_offUpEvents:function(){var t=this.el.ownerDocument;A(t,"mouseup",this._onDrop),A(t,"touchend",this._onDrop),A(t,"pointerup",this._onDrop),A(t,"pointercancel",this._onDrop),A(t,"touchcancel",this._onDrop),A(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(J=et(h),ht=et(h,i.draggable),U("drop",this,{evt:t}),R=h&&h.parentNode,J=et(h),ht=et(h,i.draggable),_.eventCanceled){this._nulling();return}xt=!1,te=!1,Bt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Re(this.cloneId),Re(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Mt&&y(document.body,"user-select",""),y(h,"transform",""),t&&(kt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(P===R||V&&V.lastPutMode!=="clone")&&F&&F.parentNode&&F.parentNode.removeChild(F),h&&(this.nativeDraggable&&A(h,"dragend",this),ke(h),h.style["will-change"]="",kt&&!xt&&Q(h,V?V.options.ghostClass:this.options.ghostClass,!1),Q(h,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:t}),P!==R?(J>=0&&(G({rootEl:R,name:"add",toEl:R,fromEl:P,originalEvent:t}),G({sortable:this,name:"remove",toEl:R,originalEvent:t}),G({rootEl:R,name:"sort",toEl:R,fromEl:P,originalEvent:t}),G({sortable:this,name:"sort",toEl:R,originalEvent:t})),V&&V.save()):J!==At&&J>=0&&(G({sortable:this,name:"update",toEl:R,originalEvent:t}),G({sortable:this,name:"sort",toEl:R,originalEvent:t})),_.active&&((J==null||J===-1)&&(J=At,ht=Rt),G({sortable:this,name:"end",toEl:R,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){U("nulling",this),P=h=R=w=Et=F=re=gt=wt=nt=kt=J=ht=At=Rt=Ct=Ht=V=Zt=_.dragged=_.ghost=_.clone=_.active=null,de.forEach(function(t){t.checked=!0}),de.length=Te=Ie=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":h&&(this._onDragOver(t),dr(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,r=0,o=i.length,s=this.options;r<o;r++)e=i[r],it(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||vr(e));return t},sort:function(t,e){var i={},r=this.el;this.toArray().forEach(function(o,s){var a=r.children[s];it(a,this.options.draggable,r,!1)&&(i[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return it(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var r=$t.modifyOption(this,t,e);typeof r<"u"?i[t]=r:i[t]=e,t==="group"&&On(i)},destroy:function(){U("destroy",this);var t=this.el;t[X]=null,A(t,"mousedown",this._onTapStart),A(t,"touchstart",this._onTapStart),A(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(t,"dragover",this),A(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ue.splice(ue.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!gt){if(U("hideClone",this),_.eventCanceled)return;y(F,"display","none"),this.options.removeCloneOnHide&&F.parentNode&&F.parentNode.removeChild(F),gt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(gt){if(U("showClone",this),_.eventCanceled)return;h.parentNode==P&&!this.options.group.revertClone?P.insertBefore(F,h):Et?P.insertBefore(F,Et):P.appendChild(F),this.options.group.revertClone&&this.animate(h,F),y(F,"display",""),gt=!1}}};pe&&T(document,"touchmove",function(n){(_.active||xt)&&n.cancelable&&n.preventDefault()});_.utils={on:T,off:A,css:y,find:vn,is:function(t,e){return!!it(t,e,t,!1)},extend:tr,throttle:bn,closest:it,toggleClass:Q,clone:_n,index:et,nextTick:se,cancelNextTick:Re,detectDirection:En,getChild:Tt,expando:X};_.get=function(n){return n[X]};_.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(_.utils=at(at({},_.utils),i.utils)),$t.mount(i)})};_.create=function(n,t){return new _(n,t)};_.version=Ji;H=[],Be=!1;Me=bn(function(n,t,e,i){if(t.scroll){var r=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=st(),c=!1,u;He!==e&&(He=e,ae(),Pt=t.scroll,u=t.scrollFn,Pt===!0&&(Pt=mt(e,!0)));var d=0,f=Pt;do{var v=f,p=B(v),g=p.top,E=p.bottom,O=p.left,m=p.right,D=p.width,k=p.height,tt=void 0,Y=void 0,S=v.scrollWidth,x=v.scrollHeight,b=y(v),N=v.scrollLeft,C=v.scrollTop;v===l?(tt=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),Y=k<x&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(tt=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"),Y=k<x&&(b.overflowY==="auto"||b.overflowY==="scroll"));var ot=tt&&(Math.abs(m-r)<=s&&N+D<S)-(Math.abs(O-r)<=s&&!!N),z=Y&&(Math.abs(E-o)<=s&&C+k<x)-(Math.abs(g-o)<=s&&!!C);if(!H[d])for(var lt=0;lt<=d;lt++)H[lt]||(H[lt]={});(H[d].vx!=ot||H[d].vy!=z||H[d].el!==v)&&(H[d].el=v,H[d].vx=ot,H[d].vy=z,clearInterval(H[d].pid),(ot!=0||z!=0)&&(c=!0,H[d].pid=setInterval(function(){i&&this.layer===0&&_.active._onTouchMove(fe);var _t=H[this.layer].vy?H[this.layer].vy*a:0,pt=H[this.layer].vx?H[this.layer].vx*a:0;typeof u=="function"&&u.call(_.dragged.parentNode[X],pt,_t,n,fe,H[this.layer].el)!=="continue"||yn(H[this.layer].el,pt,_t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==l&&(f=mt(f,!1)));Be=c}},30),An=function(t){var e=t.originalEvent,i=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=i||o;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(s("spill"),this.onSpill({dragEl:r,putSortable:i}))}};Ye.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=Tt(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:An};ut(Ye,{pluginName:"revertOnSpill"});Ve.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,r=i||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:An};ut(Ve,{pluginName:"removeOnSpill"});_.mount(new yr);_.mount(Ve,Ye);Dn=_});var Yt,In=I(()=>{Yt=class{constructor(t){this.props={closeOnClickOutside:!0,root:document.body,...t},this.dialog=null,this.addListener("close-dialog",this.close)}clickListener(t){!t.target.closest(".rs-util-settings-dialog__content")&&this.props.closeOnClickOutside&&this.close();let e=t.target.closest("button");e&&e.dataset.action&&document.dispatchEvent(new CustomEvent("dialog-action."+e.dataset.action,{detail:{dialog:this.dialog,button:e}}))}addListener(t,e){document.addEventListener("dialog-action."+t,e)}close({detail:t}){let{dialog:e}=t||{};document.body.classList.remove("rs-util-settings-dialog-open"),e&&e.remove()}open(){document.body.classList.add("rs-util-settings-dialog-open"),this.render()}render(t={}){t={...this.props,...t};let e=document.createElement("div");return e.classList.add("rs-util-settings-dialog"),e.innerHTML=`
			<div class="rs-util-settings-dialog__content">
				<div class="rs-util-settings-dialog__header">
					<h2>${t.title}</h2>
					<button type="button" class="rs-util-settings-dialog__close" data-action="close-dialog">Close</button>
				</div>
				<div class="rs-util-settings-dialog__body">
					${t.content}
					<div class="rs-util-settings-dialog__actions">
						${t.actions.map(i=>{let r=document.createElement("button");return r.type="button",r.classList.add("button","rs-util-settings-dialog__action"),i.primary&&r.classList.add("button-primary"),i.classes&&r.classList.add(...i.classes),i.action&&(r.dataset.action=i.action),r.innerHTML=i.label,r.outerHTML}).join("")}
					</div>
				</div>
			</div>
		`,this.dialog=e,this.props.root.appendChild(e),e.addEventListener("click",this.clickListener.bind(this)),e}}});function je(n,t){n.split(/\s+/).forEach(e=>{t(e)})}var Vt,Ln=I(()=>{Vt=class{constructor(){this._events={}}on(t,e){je(t,i=>{let r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}je(t,r=>{if(i===1){delete this._events[r];return}let o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;je(t,r=>{let o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}}});function qe(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;let r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}var kn=I(()=>{});var jt,Ge,ze,_r,vt,wr,Sr,Pn=I(()=>{jt=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":wr(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Ge=n=>{if(!_r(n))return n.join("");let t="",e=0,i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},ze=n=>{let t=Array.from(n);return jt(t)},_r=n=>new Set(n).size!==n.length,vt=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),wr=n=>n.reduce((t,e)=>Math.max(t,Sr(e)),0),Sr=n=>Array.from(n).length});var Ue,Fn=I(()=>{Ue=n=>{if(n.length===1)return[[n]];let t=[],e=n.substring(1);return Ue(e).forEach(function(r){let o=r.slice(0);o[0]=n.charAt(0)+o[0],t.push(o),o=r.slice(0),o.unshift(n.charAt(0)),t.push(o)}),t}});function*Tr(n){for(let[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=qt(r);o!=r.toLowerCase()&&(o.length>Cr||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}var Er,Or,he,Hn,Cr,Xe,Mn,xr,Ar,Nn,qt,Dr,Ir,Lr,kr,Pr,Rn,Fr,ge,Bn,me=I(()=>{Pn();Fn();Er=[[0,65535]],Or="[\u0300-\u036F\xB7\u02BE\u02BC]",Cr=3,Xe={},Mn={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let n in Mn){let t=Mn[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Xe[i]=n}}xr=new RegExp(Object.keys(Xe).join("|")+"|"+Or,"gu"),Ar=n=>{he===void 0&&(he=Lr(n||Er))},Nn=(n,t="NFKD")=>n.normalize(t),qt=n=>Array.from(n).reduce((t,e)=>t+Dr(e),""),Dr=n=>(n=Nn(n).toLowerCase().replace(xr,t=>Xe[t]||""),Nn(n,"NFC"));Ir=n=>{let t={},e=(i,r)=>{let o=t[i]||new Set,s=new RegExp("^"+ze(o)+"$","iu");r.match(s)||(o.add(vt(r)),t[i]=o)};for(let i of Tr(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},Lr=n=>{let t=Ir(n),e={},i=[];for(let o in t){let s=t[o];s&&(e[o]=ze(s)),o.length>1&&i.push(vt(o))}i.sort((o,s)=>s.length-o.length);let r=jt(i);return Hn=new RegExp("^"+r,"u"),e},kr=(n,t=1)=>{let e=0;return n=n.map(i=>(he[i]&&(e+=i.length),he[i]||i)),e>=t?Ge(n):""},Pr=(n,t=1)=>(t=Math.max(t,n.length-1),jt(Ue(n).map(e=>kr(e,t)))),Rn=(n,t=!0)=>{let e=n.length>1?1:0;return jt(n.map(i=>{let r=[],o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(Pr(i.substrs[s]||"",e));return Ge(r)}))},Fr=(n,t)=>{for(let e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts,r=s=>{for(let a of i){if(a.start===s.start&&a.substr===s.substr)return!1;if(!(s.length==1||a.length==1)&&(s.start<a.start&&s.end>a.start||a.start<s.start&&a.end>s.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1},ge=class n{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new n,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(let l of r)i.add(l);let s=e.substr.substring(0,t-o.start),a=s.length;return i.add({start:o.start,end:o.start+a,length:a,substr:s}),i}},Bn=n=>{Ar(),n=qt(n);let t="",e=[new ge];for(let i=0;i<n.length;i++){let o=n.substring(i).match(Hn),s=n.substring(i,i+1),a=o?o[0]:null,l=[],c=new Set;for(let u of e){let d=u.last();if(!d||d.length==1||d.end<=i)if(a){let f=a.length;u.add({start:i,end:i+f,length:f,substr:a}),c.add("1")}else u.add({start:i,end:i+1,length:1,substr:s}),c.add("2");else if(a){let f=u.clone(i,d),v=a.length;f.add({start:i,end:i+v,length:v,substr:a}),l.push(f)}else c.add("3")}if(l.length>0){l=l.sort((u,d)=>u.length()-d.length());for(let u of l)Fr(u,e)||e.push(u);continue}if(i>0&&c.size==1&&!c.has("3")){t+=Rn(e,!1);let u=new ge,d=e[0];d&&u.add(d.last()),e=[u]}}return t+=Rn(e,!0),t}});var Kn,$n,ve,be,Gt,Yn,Vn=I(()=>{me();Kn=(n,t)=>{if(n)return n[t]},$n=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},ve=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},be=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Gt=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Yn=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=qt(n+"").toLowerCase(),t=qt(t+"").toLowerCase(),n>t?1:t>n?-1:0)});var jn=I(()=>{});var ye,qn=I(()=>{Vn();me();jn();ye=class{items;settings;constructor(t,e){this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];let r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(vt).join("|")+"):(.*)$")),o.forEach(a=>{let l,c=null,u=null;s&&(l=a.match(s))&&(c=l[1],a=l[2]),a.length>0&&(this.settings.diacritics?u=Bn(a)||null:u=vt(a),u&&e&&(u="\\b"+u)),r.push({string:a,regex:u?new RegExp(u,"iu"):null,field:c})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){let e=t.tokens,i=e.length;if(!i)return function(){return 0};let r=t.options.fields,o=t.weights,s=r.length,a=t.getAttrFn;if(!s)return function(){return 1};let l=function(){return s===1?function(c,u){let d=r[0].field;return ve(a(u,d),c,o[d]||1)}:function(c,u){var d=0;if(c.field){let f=a(u,c.field);!c.regex&&f?d+=1/s:d+=ve(f,c,1)}else Gt(o,(f,v)=>{d+=ve(a(u,v),c,f)});return d/s}}();return i===1?function(c){return l(e[0],c)}:t.options.conjunction==="and"?function(c){var u,d=0;for(let f of e){if(u=l(f,c),u<=0)return 0;d+=u}return d/i}:function(c){var u=0;return Gt(e,d=>{u+=l(d,c)}),u/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];let r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);let a=function(c,u){return c==="$score"?u.score:t.getAttrFn(r.items[u.id],c)};if(s)for(let c of s)(t.query||c.field!=="$score")&&i.push(c);if(t.query){e=!0;for(let c of i)if(c.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(c=>c.field!=="$score");return i.length?function(c,u){var d,f;for(let v of i)if(f=v.field,d=(v.direction==="desc"?-1:1)*Yn(a(f,c),a(f,u)),d)return d;return 0}:null}prepareSearch(t,e){let i={};var r=Object.assign({},e);if(be(r,"sort"),be(r,"sort_empty"),r.fields){be(r,"fields");let o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?$n:Kn}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;let s=e.score||i._getScoreFunction(o);t.length?Gt(i.items,(l,c)=>{r=s(l),(e.filter===!1||r>0)&&o.items.push({score:r,id:c})}):Gt(i.items,(l,c)=>{o.items.push({score:1,id:c})});let a=i._getSortFunction(o);return a&&o.items.sort(a),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}}});var Z,zt,_e,Gn,zn,We,Un,M,q,bt,we,Qe,yt,K,Se=I(()=>{Z=n=>typeof n>"u"||n===null?null:zt(n),zt=n=>typeof n=="boolean"?n?"1":"0":n+"",_e=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Gn=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),zn=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},We=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},Un=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),M=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},q=(n,t,e,i)=>{n.addEventListener(t,e,i)},bt=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},we=(n,t)=>{let e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},Qe=n=>n.replace(/[\\"']/g,"\\$&"),yt=(n,t)=>{t&&n.append(t)},K=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)}});var rt,Je,Xn,Ee,Ut,W,ft,Wn,Qn,Oe,Ze,Jn,tn,L,Xt,en=I(()=>{Se();rt=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Je(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Je=n=>typeof n=="string"&&n.indexOf("<")>-1,Xn=n=>n.replace(/['"\\]/g,"\\$&"),Ee=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},Ut=(n,t)=>{Object.assign(n.style,t)},W=(n,...t)=>{var e=Wn(t);n=Qn(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},ft=(n,...t)=>{var e=Wn(t);n=Qn(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Wn=n=>{var t=[];return K(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Qn=n=>(Array.isArray(n)||(n=[n]),n),Oe=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Ze=(n,t=0)=>t>0?n[n.length-1]:n[0],Jn=n=>Object.keys(n).length===0,tn=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},L=(n,t)=>{K(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Xt=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)}});var Zn,ti,ei=I(()=>{en();Zn=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}let e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var a=document.createElement("span");a.className="highlight";var l=o.splitText(s.index);l.splitText(s[0].length);var c=l.cloneNode(!0);return a.appendChild(c),Xt(l,a),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},ti=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})}});var Mr,Wt,ni=I(()=>{Mr=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Wt=Mr?"metaKey":"ctrlKey"});var nn,ii=I(()=>{nn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}}});function Ce(n,t){var e=Object.assign({},nn,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,a=e.optgroupField,l=e.optgroupLabelField,c=e.optgroupValueField,u=n.tagName.toLowerCase(),d=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!d&&!e.allowEmptyOption){let g=n.querySelector('option[value=""]');g&&(d=g.textContent)}var f={placeholder:d,options:[],optgroups:[],items:[],maxItems:null},v=()=>{var g,E=f.options,O={},m=1;let D=0;var k=S=>{var x=Object.assign({},S.dataset),b=i&&x[i];return typeof b=="string"&&b.length&&(x=Object.assign(x,JSON.parse(b))),x},tt=(S,x)=>{var b=Z(S.value);if(b!=null&&!(!b&&!e.allowEmptyOption)){if(O.hasOwnProperty(b)){if(x){var N=O[b][a];N?Array.isArray(N)?N.push(x):O[b][a]=[N,x]:O[b][a]=x}}else{var C=k(S);C[r]=C[r]||S.textContent,C[o]=C[o]||b,C[s]=C[s]||S.disabled,C[a]=C[a]||x,C.$option=S,C.$order=C.$order||++D,O[b]=C,E.push(C)}S.selected&&f.items.push(b)}},Y=S=>{var x,b;b=k(S),b[l]=b[l]||S.getAttribute("label")||"",b[c]=b[c]||m++,b[s]=b[s]||S.disabled,b.$order=b.$order||++D,f.optgroups.push(b),x=b[c],K(S.children,N=>{tt(N,x)})};f.maxItems=n.hasAttribute("multiple")?null:1,K(n.children,S=>{g=S.tagName.toLowerCase(),g==="optgroup"?Y(S):g==="option"&&tt(S)})},p=()=>{let g=n.getAttribute(i);if(g)f.options=JSON.parse(g),K(f.options,O=>{f.items.push(O[o])});else{var E=n.value.trim()||"";if(!e.allowEmptyOption&&!E.length)return;let O=E.split(e.delimiter);K(O,m=>{let D={};D[r]=m,D[o]=m,f.options.push(D)}),f.items=O}};return u==="select"?v():p(),Object.assign({},nn,f,t)}var ri=I(()=>{ii();Se()});var ai,$,li=I(()=>{Ln();kn();qn();me();ei();ni();ri();Se();en();ai=0,$=class extends qe(Vt){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,ai++;var i,r=rt(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");let s=Ce(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=we(r,"tomselect-"+ai),this.isRequired=r.required,this.sifter=new ye(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var a=s.createFilter;typeof a!="function"&&(typeof a=="string"&&(a=new RegExp(a)),a instanceof RegExp?s.createFilter=E=>a.test(E):s.createFilter=E=>this.settings.duplicates||!this.options[E]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();let l=rt("<div>"),c=rt("<div>"),u=this._render("dropdown"),d=rt('<div role="listbox" tabindex="-1">'),f=this.input.getAttribute("class")||"",v=s.mode;var p;if(W(l,s.wrapperClass,f,v),W(c,s.controlClass),yt(l,c),W(u,s.dropdownClass,v),s.copyClassesToDropdown&&W(u,f),W(d,s.dropdownContentClass),yt(u,d),rt(s.dropdownParent||l).appendChild(u),Je(s.controlInput)){p=rt(s.controlInput);var g=["autocorrect","autocapitalize","autocomplete","spellcheck"];K(g,E=>{r.getAttribute(E)&&L(p,{[E]:r.getAttribute(E)})}),p.tabIndex=-1,c.appendChild(p),this.focus_node=p}else s.controlInput?(p=rt(s.controlInput),this.focus_node=p):(p=rt("<input/>"),this.focus_node=c);this.wrapper=l,this.dropdown=u,this.dropdown_content=d,this.control=c,this.control_input=p,this.setup()}setup(){let t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,a=t.control,l=t.input,c=t.focus_node,u={passive:!0},d=t.inputId+"-ts-dropdown";L(o,{id:d}),L(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":d});let f=we(c,t.inputId+"-ts-control"),v="label[for='"+Xn(t.inputId)+"']",p=document.querySelector(v),g=t.focus.bind(t);if(p){q(p,"click",g),L(p,{for:f});let m=we(p,t.inputId+"-ts-label");L(c,{"aria-labelledby":m}),L(o,{"aria-labelledby":m})}if(s.style.width=l.style.width,t.plugins.names.length){let m="plugin-"+t.plugins.names.join(" plugin-");W([s,r],m)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&L(l,{multiple:"multiple"}),e.placeholder&&L(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+vt(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=zn(e.load,e.loadThrottle)),q(r,"mousemove",()=>{t.ignoreHover=!1}),q(r,"mouseenter",m=>{var D=Oe(m.target,"[data-selectable]",r);D&&t.onOptionHover(m,D)},{capture:!0}),q(r,"click",m=>{let D=Oe(m.target,"[data-selectable]");D&&(t.onOptionSelect(m,D),M(m,!0))}),q(a,"click",m=>{var D=Oe(m.target,"[data-ts-item]",a);if(D&&t.onItemSelect(m,D)){M(m,!0);return}i.value==""&&(t.onClick(),M(m,!0))}),q(c,"keydown",m=>t.onKeyDown(m)),q(i,"keypress",m=>t.onKeyPress(m)),q(i,"input",m=>t.onInput(m)),q(c,"blur",m=>t.onBlur(m)),q(c,"focus",m=>t.onFocus(m)),q(i,"paste",m=>t.onPaste(m));let E=m=>{let D=m.composedPath()[0];if(!s.contains(D)&&!r.contains(D)){t.isFocused&&t.blur(),t.inputState();return}D==i&&t.isOpen?m.stopPropagation():M(m,!0)},O=()=>{t.isOpen&&t.positionDropdown()};q(document,"mousedown",E),q(window,"scroll",O,u),q(window,"resize",O,u),this._destroy=()=>{document.removeEventListener("mousedown",E),window.removeEventListener("scroll",O),window.removeEventListener("resize",O),p&&p.removeEventListener("click",g)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,q(l,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():l.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),W(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),K(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){let e=this,i=t?Ce(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){Ee(this.input,"input"),Ee(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){M(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);K(r,o=>{Z(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){M(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),M(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==9&&M(t);return}switch(t.keyCode){case 65:if(bt(Wt,t)&&e.control_input.value==""){M(t),e.selectAll();return}break;case 27:e.isOpen&&(M(t,!0),e.close()),e.clearActiveItems();return;case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}M(t);return;case 38:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}M(t);return;case 13:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),M(t)):e.settings.create&&e.createItem()?M(t):document.activeElement==e.control_input&&e.isOpen&&M(t);return;case 37:e.advanceSelection(-1,t);return;case 39:e.advanceSelection(1,t);return;case 9:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),M(t)),e.settings.create&&e.createItem()&&M(t));return;case 8:case 46:e.deleteSelection(t);return}e.isInputHidden&&!bt(Wt,t)&&M(t)}onInput(t){if(this.isLocked)return;let e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Gn(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),M(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(M(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){let e=this;if(!e.canLoad(t))return;W(e.wrapper,e.settings.loadingClass),e.loading++;let i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){let i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||ft(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,Ee(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];We(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,a,l,c;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&bt("shiftKey",e)&&i.activeItems.length){for(c=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,c),a=Array.prototype.indexOf.call(i.control.children,t),s>a&&(l=s,s=a,a=l),o=s;o<=a;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);M(e)}else r==="click"&&bt(Wt,e)||r==="keydown"&&bt("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){let e=this,i=e.control.querySelector(".last-active");i&&ft(i,"last-active"),W(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ft(t,"active")}clearActiveItems(){ft(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,L(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),L(t,{"aria-selected":"true"}),W(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;let i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,a=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;a+s>r+o?this.scroll(a-r+s,e):a<o&&this.scroll(a,e)}scroll(t,e){let i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(ft(this.activeOption,"active"),L(this.activeOption,{"aria-selected":null})),this.activeOption=null,L(this.focus_node,{"aria-activedescendant":null})}selectAll(){let t=this;if(t.settings.mode==="single")return;let e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,K(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(L(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&L(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let a=Z(s.id);return!(a&&r.items.indexOf(a)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,a,l,c,u,d;let f={},v=[];var p=this,g=p.inputValue();let E=g===p.lastQuery||g==""&&p.lastQuery==null;var O=p.search(g),m=null,D=p.settings.shouldOpen||!1,k=p.dropdown_content;E&&(m=p.activeOption,m&&(u=m.closest("[data-group]"))),o=O.items.length,typeof p.settings.maxOptions=="number"&&(o=Math.min(o,p.settings.maxOptions)),o>0&&(D=!0);let tt=(S,x)=>{let b=f[S];if(b!==void 0){let C=v[b];if(C!==void 0)return[b,C.fragment]}let N=document.createDocumentFragment();return b=v.length,v.push({fragment:N,order:x,optgroup:S}),[b,N]};for(e=0;e<o;e++){let S=O.items[e];if(!S)continue;let x=S.id,b=p.options[x];if(b===void 0)continue;let N=zt(x),C=p.getOption(N,!0);for(p.settings.hideSelected||C.classList.toggle("selected",p.items.includes(N)),s=b[p.settings.optgroupField]||"",a=Array.isArray(s)?s:[s],i=0,r=a&&a.length;i<r;i++){s=a[i];let ot=b.$order,z=p.optgroups[s];z===void 0?s="":ot=z.$order;let[lt,_t]=tt(s,ot);i>0&&(C=C.cloneNode(!0),L(C,{id:b.$id+"-clone-"+i,"aria-selected":null}),C.classList.add("ts-cloned"),ft(C,"active"),p.activeOption&&p.activeOption.dataset.value==x&&u&&u.dataset.group===s.toString()&&(m=C)),_t.appendChild(C),s!=""&&(f[s]=lt)}}p.settings.lockOptgroupOrder&&v.sort((S,x)=>S.order-x.order),l=document.createDocumentFragment(),K(v,S=>{let x=S.fragment,b=S.optgroup;if(!x||!x.children.length)return;let N=p.optgroups[b];if(N!==void 0){let C=document.createDocumentFragment(),ot=p.render("optgroup_header",N);yt(C,ot),yt(C,x);let z=p.render("optgroup",{group:N,options:C});yt(l,z)}else yt(l,x)}),k.innerHTML="",yt(k,l),p.settings.highlight&&(ti(k),O.query.length&&O.tokens.length&&K(O.tokens,S=>{Zn(k,S.regex)}));var Y=S=>{let x=p.render(S,{input:g});return x&&(D=!0,k.insertBefore(x,k.firstChild)),x};if(p.loading?Y("loading"):p.settings.shouldLoad.call(p,g)?O.items.length===0&&Y("no_results"):Y("not_loading"),c=p.canCreate(g),c&&(d=Y("option_create")),p.hasOptions=O.items.length>0||c,D){if(O.items.length>0){if(!m&&p.settings.mode==="single"&&p.items[0]!=null&&(m=p.getOption(p.items[0])),!k.contains(m)){let S=0;d&&!p.settings.addPrecedence&&(S=1),m=p.selectable()[S]}}else d&&(m=d);t&&!p.isOpen&&(p.open(),p.scrollToOption(m,"auto")),p.setActiveOption(m)}else p.clearActiveOption(),t&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){let i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;let r=Z(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){K(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=Z(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){let i=this;var r,o;let s=Z(t),a=Z(e[i.settings.valueField]);if(s===null)return;let l=i.options[s];if(l==null)return;if(typeof a!="string")throw new Error("Value must be set in option data");let c=i.getOption(s),u=i.getItem(s);if(e.$order=e.$order||l.$order,delete i.options[s],i.uncacheValue(a),i.options[a]=e,c){if(i.dropdown_content.contains(c)){let d=i._render("option",e);Xt(c,d),i.activeOption===c&&i.setActiveOption(d)}c.remove()}u&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,a),r=i._render("item",e),u.classList.contains("active")&&W(r,"active"),Xt(u,r)),i.lastQuery=null}removeOption(t,e){let i=this;t=zt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){let e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};K(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){let i=Z(t);if(i===null)return null;let r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=Z(t);return e!==null?this.control.querySelector(`[data-value="${Qe(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);let o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];We(this,i,()=>{var r,o;let s=this,a=s.settings.mode,l=Z(t);if(!(l&&s.items.indexOf(l)!==-1&&(a==="single"&&s.close(),a==="single"||!s.settings.duplicates))&&!(l===null||!s.options.hasOwnProperty(l))&&(a==="single"&&s.clear(e),!(a==="multi"&&s.isFull()))){if(r=s._render("item",s.options[l]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,l),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let c=s.getOption(l),u=s.getAdjacent(c,1);u&&s.setActiveOption(u)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&a!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",l,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){let i=this;if(t=i.getItem(t),!t)return;var r,o;let s=t.dataset.value;r=tn(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),ft(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,a=l=>{if(i.unlock(),!l||typeof l!="object")return e();var c=Z(l[i.settings.valueField]);if(typeof c!="string")return e();i.setTextboxValue(),i.addOption(l,!0),i.setCaret(r),i.addItem(c),e(l),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,a):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||a(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){let t=this;t.refreshValidityState();let e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);let r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Jn(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){let e=this;var i,r;let o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let l=function(c,u,d){return c||(c=rt('<option value="'+_e(u)+'">'+_e(d)+"</option>")),c!=o&&e.input.append(c),s.push(c),(c!=o||a>0)&&(c.selected=!0),c},s=[],a=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(c=>{c.selected=!1}),e.items.length==0&&e.settings.mode=="single"?l(o,"",""):e.items.forEach(c=>{if(i=e.options[c],r=i[e.settings.labelField]||"",s.includes(i.$option)){let u=e.input.querySelector(`option[value="${Qe(c)}"]:not(:checked)`);l(u,c,r)}else i.$option=l(i.$option,c,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,L(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),Ut(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),Ut(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,L(e.focus_node,{"aria-expanded":"false"}),Ut(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;Ut(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();K(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){let e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===8?-1:1,i=Un(s.control_input);let a=[];if(s.activeItems.length)o=Ze(s.activeItems,e),r=tn(o),e>0&&r++,K(s.activeItems,l=>a.push(l));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){let l=s.controlChildren(),c;e<0&&i.start===0&&i.length===0?c=l[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(c=l[s.caretPos]),c!==void 0&&a.push(c)}if(!s.shouldDelete(a,t))return!1;for(M(t,!0),typeof r<"u"&&s.setCaret(r);a.length;)s.removeItem(a.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){let i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(bt(Wt,e)||bt("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return Ze(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ft(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;let o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,_e),!r))return null;if(r=rt(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?L(r,{"aria-disabled":"true"}):L(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],L(r,{"data-group":i}),e.group[o.settings.disabledField]&&L(r,{"data-disabled":""})),t==="option"||t==="item"){let s=zt(e[o.settings.valueField]);L(r,{"data-value":s}),t==="item"?(W(r,o.settings.itemClass),L(r,{"data-ts-item":""})):(W(r,o.settings.optionClass),L(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){let i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){K(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){let e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,a;return t==="after"&&(s=o.apply(r,arguments)),a=i.apply(r,arguments),t==="instead"?a:(t==="before"&&(s=o.apply(r,arguments)),s)}}}});function ci(){qr(this.input,"change",()=>{this.sync()})}var qr,ui=I(()=>{qr=(n,t,e,i)=>{n.addEventListener(t,e,i)}});function fi(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;let i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(a,l){l?(a.checked=!0,i.uncheckedClassNames&&a.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&a.classList.add(...i.checkedClassNames)):(a.checked=!1,i.checkedClassNames&&a.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&a.classList.add(...i.uncheckedClassNames))},o=function(a){setTimeout(()=>{var l=a.querySelector("input."+i.className);l instanceof HTMLInputElement&&r(l,a.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(a,l)=>{var c=Ur(s.call(t,a,l)),u=document.createElement("input");i.className&&u.classList.add(i.className),u.addEventListener("click",function(f){di(f)}),u.type="checkbox";let d=Gr(a[t.settings.valueField]);return r(u,!!(d&&t.items.indexOf(d)>-1)),c.prepend(u),c}}),t.on("item_remove",s=>{var a=t.getOption(s);a&&(a.classList.remove("selected"),o(a))}),t.on("item_add",s=>{var a=t.getOption(s);a&&o(a)}),t.hook("instead","onOptionSelect",(s,a)=>{if(a.classList.contains("selected")){a.classList.remove("selected"),t.removeItem(a.dataset.value),t.refreshOptions(),di(s,!0);return}e.call(t,s,a),o(a)})}var Gr,zr,di,Ur,Xr,pi=I(()=>{Gr=n=>typeof n>"u"||n===null?null:zr(n),zr=n=>typeof n=="boolean"?n?"1":"0":n+"",di=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Ur=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Xr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Xr=n=>typeof n=="string"&&n.indexOf("<")>-1});function hi(n){let t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=Wr(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}var Wr,Qr,gi=I(()=>{Wr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Qr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Qr=n=>typeof n=="string"&&n.indexOf("<")>-1});function mi(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,a)=>{let l=to(o.call(n,s,a));no(l,{draggable:"true"});let c=g=>{i||Jr(g),g.stopPropagation()},u=g=>{r=l,setTimeout(()=>{l.classList.add("ts-dragging")},0)},d=g=>{g.preventDefault(),l.classList.add("ts-drag-over"),v(l,r)},f=()=>{l.classList.remove("ts-drag-over")},v=(g,E)=>{E!==void 0&&(oo(E,l)?io(g,E):ro(g,E))},p=()=>{var g;document.querySelectorAll(".ts-drag-over").forEach(O=>O.classList.remove("ts-drag-over")),(g=r)==null||g.classList.remove("ts-dragging"),r=void 0;var E=[];n.control.querySelectorAll("[data-value]").forEach(O=>{if(O.dataset.value){let m=O.dataset.value;m&&E.push(m)}}),n.setValue(E)};return It(l,"mousedown",c),It(l,"dragstart",u),It(l,"dragenter",d),It(l,"dragover",d),It(l,"dragleave",f),It(l,"dragend",p),l}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}var Jr,It,Zr,to,eo,no,io,ro,oo,vi=I(()=>{Jr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},It=(n,t,e,i)=>{n.addEventListener(t,e,i)},Zr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},to=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(eo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},eo=n=>typeof n=="string"&&n.indexOf("<")>-1,no=(n,t)=>{Zr(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},io=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},ro=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},oo=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1}});function bi(n){let t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=ao(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{so(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}var so,ao,lo,yi=I(()=>{so=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},ao=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(lo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},lo=n=>typeof n=="string"&&n.indexOf("<")>-1});function _i(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;let e=n.getLastActive(t);if(e){let i=ho(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),uo(e,"last-active")}else n.setCaret(n.caretPos+t)})}var co,uo,fo,po,ho,wi=I(()=>{co=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},uo=(n,...t)=>{var e=fo(t);n=po(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},fo=n=>{var t=[];return co(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},po=n=>(Array.isArray(n)||(n=[n]),n),ho=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e}});function Ei(){let n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,yo(n.control_input,"dropdown-input");let t=Si('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);let e=Si('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:n.isOpen&&(go(e,!0),n.close()),n.clearActiveItems();return;case 9:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});let t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),mo(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}var go,mo,vo,Si,bo,yo,_o,wo,Oi=I(()=>{go=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},mo=(n,t,e,i)=>{n.addEventListener(t,e,i)},vo=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Si=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(bo(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},bo=n=>typeof n=="string"&&n.indexOf("<")>-1,yo=(n,...t)=>{var e=_o(t);n=wo(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},_o=n=>{var t=[];return vo(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},wo=n=>(Array.isArray(n)||(n=[n]),n)});function Ci(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(let o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),xe(e,"input",r),xe(e,"keyup",r),xe(e,"blur",r),xe(e,"update",r)})}var xe,xi=I(()=>{xe=(n,t,e,i)=>{n.addEventListener(t,e,i)}});function Ai(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}var Di=I(()=>{});function Ti(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}var Ii=I(()=>{});function Li(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===37||e.keyCode===39))return t.call(n,e);n.ignoreHover=!0,s=So(n.activeOption,"[data-group]"),i=Eo(n.activeOption,"[data-selectable]"),s&&(e.keyCode===37?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}var So,Eo,ki=I(()=>{So=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Eo=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e}});function Ni(n){let t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+Oo(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var a=Mi(r.call(e,o,s)),l=Mi(i);return a.appendChild(l),Fi(l,"mousedown",c=>{Pi(c,!0)}),Fi(l,"click",c=>{e.isLocked||(Pi(c,!0),!e.isLocked&&e.shouldDelete([a],c)&&(e.removeItem(a),e.refreshOptions(!1),e.inputState()))}),a}})}}var Oo,Pi,Fi,Mi,Co,Ri=I(()=>{Oo=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Pi=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Fi=(n,t,e,i)=>{n.addEventListener(t,e,i)},Mi=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Co(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Co=n=>typeof n=="string"&&n.indexOf("<")>-1});function Hi(n){let t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}var Bi=I(()=>{});function Ki(){let n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,a,l=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var f=n.selectable(),v=Array.from(f).indexOf(n.activeOption);if(v>=f.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];let c=d=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(d in r&&r[d]),u=(d,f)=>n.items.indexOf(f)>=0||l.indexOf(f)>=0;n.setNextUrl=(d,f)=>{r[d]=f},n.getUrl=d=>{if(d in r){let f=r[d];return r[d]=!1,f}return n.clearPagination(),n.settings.firstUrl.call(n,d)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",d=>d in r?c(d):t.call(n,d)),n.hook("instead","loadCallback",(d,f)=>{if(!s)n.clearOptions(u);else if(a){let v=d[0];v!==void 0&&(a.dataset.value=v[n.settings.valueField])}i.call(n,d,f),s=!1}),n.hook("after","refreshOptions",()=>{let d=n.lastValue;var f;c(d)?(f=n.render("loading_more",{query:d}),f&&(f.setAttribute("data-selectable",""),a=f)):d in r&&!o.querySelector(".no-results")&&(f=n.render("no_more_results",{query:d})),f&&(Ao(f,n.settings.optionClass),o.append(f))}),n.on("initialize",()=>{l=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&c(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}var xo,Ao,Do,To,$i=I(()=>{xo=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Ao=(n,...t)=>{var e=Do(t);n=To(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Do=n=>{var t=[];return xo(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},To=n=>(Array.isArray(n)||(n=[n]),n)});var Yi,Vi=I(()=>{li();ui();pi();gi();vi();yi();wi();Oi();xi();Di();Ii();ki();Ri();Bi();$i();$.define("change_listener",ci);$.define("checkbox_options",fi);$.define("clear_button",hi);$.define("drag_drop",mi);$.define("dropdown_header",bi);$.define("caret_position",_i);$.define("dropdown_input",Ei);$.define("input_autogrow",Ci);$.define("no_backspace_delete",Ai);$.define("no_active_items",Ti);$.define("optgroup_columns",Li);$.define("remove_button",Ni);$.define("restore_on_backspace",Hi);$.define("virtual_scroll",Ki);Yi=$});var Qt,ji=I(()=>{Tn();In();Vi();Qt=class n{constructor(t=".rs-util-settings-form"){typeof t=="object"?this.form=t:this.form=document.querySelector(t),this.form.settingsPage=this,n.listen("change",".rs-util-settings-form",this.enableSaveButton.bind(this)),n.listen("change","[data-controls]",e=>this.showTogglableControls(e)),n.listen("click",'[data-action="save-rs-util-page"]',()=>this.save()),n.listen("click",".rs-util-settings-page__tab-toggle",e=>this.clickTab(e)),n.listen("click",".rs-util-settings-field-row-ordering",e=>this.clickReorderButton(e)),n.listen("click",".rs-util-settings-page [data-action]",e=>this.handleAction(e)),n.listen("submit",".rs-util-settings-form",this.onSubmit.bind(this)),n.listen("click",".rs-util-settings-form [data-on-click-event]",this.onClick.bind(this)),window.addEventListener("popstate",this.onPopState),this.init()}init(){this.form.querySelectorAll("[data-toggled-by]").forEach(a=>{let l=this.form.querySelector(`#${a.dataset.toggledBy}`);l&&this.showTogglableControls(l)}),this.form.querySelectorAll("[data-toggles-group]").forEach(a=>{let l;if(a.dataset.togglesGroup==="self"){l=a.closest(".rs-util-settings-field-group");let c=a.closest(".rs-util-settings-field-row"),u=l.children[0],d=l.children[1];d.setAttribute("aria-hidden",a.checked?"false":"true"),d.setAttribute("data-toggled-by",a.id),u.append(c)}else l=this.form.querySelector(`#${a.dataset.togglesGroup}`),l&&(l.setAttribute("aria-hidden",a.checked?"false":"true"),l.setAttribute("data-toggled-by",a.id));a.setAttribute("aria-expanded",a.checked?"true":"false"),a.setAttribute("aria-controls",l?.id??""),a.setAttribute("data-controls",`#${l?.id??""}`)}),this.form.querySelectorAll("[data-ordered]").forEach((a,l)=>{let c=a.querySelector("input[data-ordering-field]");if(!(c?.value??!1))return;a.currentOrder=c.value||l+1;let u=document.createElement("div");u.classList.add("rs-util-settings-field-row-order-controls"),a.append(u);let d=document.createElement("button");d.type="button",d.textContent="Move field up",d.setAttribute("data-action","move-up"),d.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--up"),u.append(d);let f=document.createElement("button");f.type="button",f.textContent="Move field down",f.setAttribute("data-action","move-down"),f.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--down"),u.append(f);let v=document.createElement("button");v.type="button",v.textContent="Drag to reorder",v.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--grabber"),u.append(v),a.parentElement.dataset.orderingGroup=a.dataset.ordered}),this.form.querySelectorAll("[data-ordered]").forEach(a=>{[...a.children].sort((l,c)=>l.currentOrder-c.currentOrder).forEach(l=>a.appendChild(l)),this.makeSortable(a,{handle:".rs-util-settings-field-row-ordering--grabber",onSort:()=>this.updateSortingIds(a)})}),this.form.querySelectorAll('[data-sortable="list"]').forEach(a=>{let l=a.parentElement;this.makeSortable(l,{canCreate:!0,onSort:()=>this.updateListValues(l)})}),document.querySelectorAll("[data-use-tom-select]").forEach(this.makeSelectable.bind(this));let s=new URL(window.location.href);s.hash&&n.switchTab(s.hash.substring(1),this.form),document.dispatchEvent(new CustomEvent("rs-util-settings-page-ready",{detail:this}))}handleAction(t){switch(t.dataset.action){case"remove-item":this.removeListItem(t.closest(".rs-util-settings-sortable-list-item")),this.enableSaveButton();break}}save(){this.onSubmit()}addMessage(t,e="info"){let i=this.form.querySelector(".rs-util-settings-form-messages"),r=document.createElement("p");r.classList.add(`is-state-${e}`),r.textContent=t,i.append(r)}clearMessages(){let t=this.form.querySelector(".rs-util-settings-form-messages");t.innerHTML=""}onClick(t){document.dispatchEvent(new CustomEvent(t.dataset.onClickEvent,{detail:t.closest("[data-on-click-event]")}))}onSubmit(){this.setState("saving");let t=new FormData(this.form),e=new URLSearchParams(t);fetch(this.form.action,{method:"POST",body:e}).then(i=>i.text()).then(i=>{let r=new URL(window.location.href).hash,o=document.createElement("html");o.innerHTML=i;let s=o.querySelector("form.rs-util-settings-form");this.form.replaceWith(s),this.form=s,this.init(),this.setState("saved"),this.addMessage("Settings saved successfully.","success")}).catch(i=>{console.error(i),this.setState("error"),this.openDialog({title:"Error on save",body:"There was an error saving your settings. More details are in the developer console."})}).finally(()=>{window.scrollTo({top:0,behavior:"smooth"})})}setState(t=null){this.form.classList.entries().forEach(e=>{e[1].substring(0,8)==="is-state"&&this.form.classList.remove(e[1])}),t&&this.form.classList.add(`is-state-${t}`)}clickTab(t){history.pushState(null,null,`#${t.dataset.section}`),n.switchTab(t.dataset.section,this.form)}clickReorderButton(t){let e=t.closest(".rs-util-settings-field-row");if(!e.querySelector("input[data-ordering-field]"))return;let r=t.dataset.action==="move-up"?e.previousElementSibling:e.nextElementSibling;r&&(t.dataset.action==="move-up"?e.insertAdjacentElement("afterend",r):e.insertAdjacentElement("beforebegin",r),this.enableSaveButton(),this.updateSortingIds(e.closest('[data-sortable="list"]')))}updateSortingIds(t){t.querySelectorAll(".rs-util-settings-field-row").forEach((i,r)=>{i.querySelector("input[data-ordering-field]").value=r+1,i.currentOrder=r+1})}showTogglableControls(t){let e=this.form.querySelectorAll(`[data-toggled-by="${t.id}"]`);e.forEach(i=>{i.setAttribute("aria-hidden",t.checked??(t.value||!1)?"false":"true")}),e.length&&(t.setAttribute("aria-expanded",t.checked??(t.value||!1)?"true":"false"),t.setAttribute("aria-controls",`[data-toggled-by="${t.id}"]`),t.setAttribute("data-controls",`[data-toggled-by="${t.id}"]`))}onPopState(){let e=new URL(window.location.href).hash.replace("#","");n.switchTab(e,this.form)}enableSaveButton(){this.setState(null),document.querySelector(".rs-util-settings-page .rs-util-settings-page__submit").disabled=!1}static switchTab(t,e){t||(t=e.querySelector(".rs-util-settings-section[data-section]").dataset.section),document.querySelectorAll(".rs-util-settings-page__tab-toggle").forEach(r=>{r.setAttribute("aria-expanded",r.dataset.section===t?"true":"false"),e.querySelector(`.rs-util-settings-section[data-section="${r.dataset.section}"]`).setAttribute("aria-hidden",r.dataset.section===t?"false":"true")})}static listen(t,e,i){document.addEventListener(t,r=>{let o=r.target.closest(e);o&&(r.preventDefault(),i(o,r))})}makeSelectable(t,e={}){let i=(o,s,...a)=>(document.dispatchEvent(new CustomEvent(`rs-util-select-${o}`,{detail:{el:s,args:a}})),!0),r={onChange:(...o)=>i("change",t,...o),onItemAdd:(...o)=>i("item-add",t,...o),onItemRemove:(...o)=>i("item-remove",t,...o),onOptionAdd:(...o)=>i("option-add",t,...o),onOptionRemove:(...o)=>i("option-remove",t,...o),onDropdownOpen:(...o)=>i("open",t,...o),onDropdownClose:(...o)=>i("close",t,...o),onFocus:(...o)=>i("focus",t,...o),onBlur:(...o)=>i("blur",t,...o),onInitialize:(...o)=>i("initialize",t,...o),...e};if(t.dataset.source){let o=JSON.parse(t.dataset.source),s=o.value.split("."),a=o.label.split(".");r.load=(l,c)=>{let u=o.url.replace("@query",encodeURIComponent(l));fetch(u).then(d=>d.json()).then(d=>{let f=[];t.currentResults??={},d.forEach(v=>{let p=v;s.forEach(E=>{p=p[E]});let g=v;a.forEach(E=>{g=g[E]}),f.push({value:p,label:g}),t.currentResults[p]=g}),c(f)}).catch(d=>console.error(d))},r.valueField="value",r.labelField="label",r.searchField="label"}if(t.dataset.useTomSelect!=="true")try{let o=JSON.parse(t.dataset.useTomSelect??t.dataset.tomSelectAgs??"{}");o&&Object.keys(o).forEach(s=>{r[s]=o[s]})}catch{}console.log(t,r),t.tom=new Yi(t,r),(r.closeAfterSelect??!1)&&(t.tom.on("item_select",()=>{t.tom.blur()}),t.tom.on("item_add",()=>{t.tom.blur()}))}makeSortable(t,e={}){let i=t.querySelector('[data-sortable="list"]')||t;if(Dn.create(i,{animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",handle:".rs-util-settings-draggable-handle",...e}),e.canCreate??!1){let r=t.querySelectorAll('[data-sortable="item-fields"] input, [data-sortable="item-fields"] select'),o=t.querySelector('[data-action="add-item"]');r&&o&&o.addEventListener("click",s=>{let a={},l=!0;if(r.forEach(u=>{(u.required??!1)&&(u.checkValidity()?(u.classList.remove("is-state-invalid"),u.tom&&u.tom.wrapper.classList.remove("is-state-invalid")):(u.classList.add("is-state-invalid"),u.tom?u.tom.wrapper.classList.add("is-state-invalid"):u.reportValidity(),l=!1))}),!l)return;r.forEach(u=>{a[u.dataset.key]=["checkbox","radio"].includes(u.type)?u.checked:u.value});let c=this.makeListItemLabel(a,r,i.dataset.label);this.addListItem(t,a,c),r.forEach(u=>{u.value="",u.checked=!1,u.classList.remove("is-state-invalid"),u.tom&&(u.tom.wrapper.classList.remove("is-state-invalid"),u.tom.clear(!0))})})}}makeListItemLabel(t,e,i="{value}"){let r=i+"";return e.forEach(o=>{let s=t[o.dataset.key]??"";if(o.tagName==="SELECT"){let a=o.options[o.selectedIndex],l=o.options[o.selectedIndex].value;r=r.replace(`{${o.dataset.key}.label}`,a.innerHTML),r=r.replace(`{${o.dataset.key}.value}`,a.value),r=r.replace(`{${o.dataset.key}}`,l)}r=r.replace(`{${o.dataset.key}}`,s)}),r}addListItem=(t,e,i)=>{let r=(t.querySelector('input[type="hidden"]').value?JSON.parse(t.querySelector('input[type="hidden"]').value):null)||[];r.push(e),t.querySelector('input[type="hidden"]').value=JSON.stringify(r);let o=document.createElement("div");o.classList.add("rs-util-settings-sortable-list-item"),o.dataset.value=e,o.innerHTML=`
			<span class="rs-util-settings-draggable-handle"></span>
			<span>${i}</span>
			<button type="button" class="rs-util-settings-trash-btn" data-action="remove-item">Remove Item</button>
		`,o.dataset.value=JSON.stringify(e),t.querySelector(".rs-util-settings-sortable-list").append(o),this.enableSaveButton()};removeListItem=t=>{let e=t.closest(".rs-util-settings-field-value");t.remove(),this.updateListValues(e),this.enableSaveButton()};updateListValues(t){let e=t.querySelector('input[type="hidden"]'),i=t.querySelector(".rs-util-settings-sortable-list"),r=[];i.querySelectorAll(".rs-util-settings-sortable-list-item").forEach((o,s)=>{r.push(JSON.parse(o.dataset.value)),o.dataset.order=s}),e.value=JSON.stringify(r),this.enableSaveButton()}openDialog(t){new Yt(t).open()}}});var Io=Ui(()=>{ji();function qi(){document.querySelector(".rs-util-settings-form")&&(window.rsUtil_SettingsPage=new Qt)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",qi):qi()});Io();})();
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
//# sourceMappingURL=rs-settings-page.min.js.map
