(()=>{var I=(n,e)=>()=>(n&&(e=n(n=0)),e);var Ui=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);function on(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?on(Object(t),!0).forEach(function(i){Xi(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):on(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function it(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?it=function(e){return typeof e}:it=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(n)}function Xi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ue(){return ue=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ue.apply(this,arguments)}function Wi(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Qi(n,e){if(n==null)return{};var t=Wi(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function ce(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}function T(n,e,t){n.addEventListener(e,t,!de&&gn)}function A(n,e,t){n.removeEventListener(e,t,!de&&gn)}function lt(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function mn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ie(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&lt(n,e):lt(n,e))||i&&n===t)return n;if(n===t)break}while(n=mn(n))}return null}function Q(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(an," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(an," ")}}function y(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function De(n,e){var t="";if(typeof n=="string")t=n;else do{var i=y(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function vn(n,e,t){if(n){var i=n.getElementsByTagName(e),r=0,o=i.length;if(t)for(;r<o;r++)t(i[r],r);return i}return[]}function se(){var n=document.scrollingElement;return n||document.documentElement}function B(n,e,t,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var o,s,a,l,c,d,u;if(n!==window&&n.parentNode&&n!==se()?(o=n.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,d=o.height,u=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||t)&&n!==window&&(r=r||n.parentNode,!de))do if(r&&r.getBoundingClientRect&&(y(r,"transform")!=="none"||t&&y(r,"position")!=="static")){var f=r.getBoundingClientRect();s-=f.top+parseInt(y(r,"border-top-width")),a-=f.left+parseInt(y(r,"border-left-width")),l=s+o.height,c=a+o.width;break}while(r=r.parentNode);if(i&&n!==window){var v=De(r||n),p=v&&v.a,g=v&&v.d;v&&(s/=g,a/=p,u/=p,d/=g,l=s+d,c=a+u)}return{top:s,left:a,bottom:l,right:c,width:u,height:d}}}function ln(n,e,t){for(var i=me(n,!0),r=B(n)[e];i;){var o=B(i)[t],s=void 0;if(t==="top"||t==="left"?s=r>=o:s=r<=o,!s)return i;if(i===se())break;i=me(i,!1)}return!1}function Te(n,e,t,i){for(var r=0,o=0,s=n.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==_.ghost&&(i||s[o]!==_.dragged)&&ie(s[o],t.draggable,n,!1)){if(r===e)return s[o];r++}o++}return null}function $t(n,e){for(var t=n.lastElementChild;t&&(t===_.ghost||y(t,"display")==="none"||e&&!lt(t,e));)t=t.previousElementSibling;return t||null}function te(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==_.clone&&(!e||lt(n,e))&&t++;return t}function cn(n){var e=0,t=0,i=se();if(n)do{var r=De(n),o=r.a,s=r.d;e+=n.scrollLeft*o,t+=n.scrollTop*s}while(n!==i&&(n=n.parentNode));return[e,t]}function Zi(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function me(n,e){if(!n||!n.getBoundingClientRect)return se();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=y(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return se();if(i||e)return t;i=!0}}while(t=t.parentNode);return se()}function er(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function At(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}function bn(n,e){return function(){if(!Ne){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),Ne=setTimeout(function(){Ne=void 0},e)}}}function tr(){clearTimeout(Ne),Ne=void 0}function yn(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function _n(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function wn(n,e,t){var i={};return Array.from(n.children).forEach(function(r){var o,s,a,l;if(!(!ie(r,e.draggable,n,!1)||r.animated||r===t)){var c=B(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,c.left),i.top=Math.min((s=i.top)!==null&&s!==void 0?s:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function nr(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(y(r,"display")==="none"||r===_.ghost)){n.push({target:r,rect:B(r)});var o=ae({},n[n.length-1].rect);if(r.thisAnimationDuration){var s=De(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(Zi(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,s=0;n.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=B(c),f=c.prevFromRect,v=c.prevToRect,p=a.rect,g=De(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&At(f,u)&&!At(d,u)&&(p.top-u.top)/(p.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=rr(p,f,v,r.options)),At(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=r.options.animation),r.animate(c,p,u,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},s):typeof i=="function"&&i(),n=[]},animate:function(i,r,o,s){if(s){y(i,"transition",""),y(i,"transform","");var a=De(this.el),l=a&&a.a,c=a&&a.d,d=(r.left-o.left)/(l||1),u=(r.top-o.top)/(c||1);i.animatingX=!!d,i.animatingY=!!u,y(i,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=ir(i),y(i,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),y(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){y(i,"transition",""),y(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},s)}}}}function ir(n){return n.offsetWidth}function rr(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}function or(n){var e=n.sortable,t=n.rootEl,i=n.name,r=n.targetEl,o=n.cloneEl,s=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,d=n.oldDraggableIndex,u=n.newDraggableIndex,f=n.originalEvent,v=n.putSortable,p=n.extraEventProperties;if(e=e||t&&t[X],!!e){var g,E=e.options,O="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!de&&!Ke?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=s||t,g.from=a||t,g.item=r||t,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=f,g.pullMode=v?v.lastPutMode:void 0;var m=ae(ae({},p),$e.getEventProperties(i,e));for(var D in m)g[D]=m[D];t&&t.dispatchEvent(g),E[O]&&E[O].call(e,g)}}function G(n){or(ae({putSortable:V,cloneEl:F,targetEl:h,rootEl:P,oldIndex:Ae,oldDraggableIndex:Re,newIndex:J,newDraggableIndex:he},n))}function _(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=ue({},e),n[X]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return En(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&(!Me||Kt),emptyInsertThreshold:5};$e.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);On(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:ar,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(n,"pointerdown",this._onTapStart):(T(n,"mousedown",this._onTapStart),T(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(n,"dragover",this),T(n,"dragenter",this)),ut.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ue(this,nr())}function dr(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function nt(n,e,t,i,r,o,s,a){var l,c=n[X],d=c.options.onMove,u;return window.CustomEvent&&!de&&!Ke?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=i,l.related=r||e,l.relatedRect=o||B(e),l.willInsertAfter=a,l.originalEvent=s,n.dispatchEvent(l),d&&(u=d.call(c,l,s)),u}function kt(n){n.draggable=!1}function fr(){Nt=!1}function pr(n,e,t){var i=B(Te(t.el,0,t.options,!0)),r=wn(t.el,t.options,w),o=10;return e?n.clientX<r.left-o||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-o||n.clientY<i.bottom&&n.clientX<i.left}function hr(n,e,t){var i=B($t(t.el,t.options.draggable)),r=wn(t.el,t.options,w),o=10;return e?n.clientX>r.right+o||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+o||n.clientX>i.right&&n.clientY>i.top}function gr(n,e,t,i,r,o,s,a){var l=i?n.clientY:n.clientX,c=i?t.height:t.width,d=i?t.top:t.left,u=i?t.bottom:t.right,f=!1;if(!s){if(a&&ot<c*r){if(!Be&&(He===1?l>d+c*o/2:l<u-c*o/2)&&(Be=!0),Be)f=!0;else if(He===1?l<d+ot:l>u-ot)return-He}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return mr(e)}return f=f||s,f&&(l<d+c*o/2||l>u-c*o/2)?l>d+c/2?1:-1:0}function mr(n){return te(h)<te(n)?1:-1}function vr(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function br(n){dt.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&dt.push(i)}}function st(n){return setTimeout(n,0)}function Rt(n){return clearTimeout(n)}function yr(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):i.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll)),pn(),at(),tr()},nulling:function(){ft=Ht=Pe=Bt=Fe=Pt=Ft=null,H.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var r=this,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(o,s);if(ft=t,i||this.options.forceAutoScrollFallback||Ke||de||Me){Mt(t,this.options,a,i);var l=me(a,!0);Bt&&(!Fe||o!==Pt||s!==Ft)&&(Fe&&pn(),Fe=setInterval(function(){var c=me(document.elementFromPoint(o,s),!0);c!==l&&(l=c,at()),Mt(t,r.options,c,i)},10),Pt=o,Ft=s)}else{if(!this.options.bubbleScroll||me(a,!0)===se()){at();return}Mt(t,this.options,me(a,!1),!1)}}},ue(n,{pluginName:"scroll",initializeByDefault:!0})}function at(){H.forEach(function(n){clearInterval(n.pid)}),H=[]}function pn(){clearInterval(Fe)}function Yt(){}function Vt(){}var Ji,de,Ke,sn,Me,Kt,hn,gn,an,Ne,X,Oe,Dt,$e,sr,U,h,R,w,P,Ee,rt,F,ge,Ae,J,Re,he,Ze,V,xe,ct,ut,we,ne,Tt,It,un,dn,ke,Ce,He,Be,et,ot,j,Lt,Nt,dt,pt,tt,fn,ar,Sn,En,lr,cr,On,Cn,xn,Se,ur,H,Pe,Ht,Bt,Pt,Ft,ft,Fe,Mt,An,Dn,Tn=I(()=>{Ji="1.15.6";de=ce(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=ce(/Edge/i),sn=ce(/firefox/i),Me=ce(/safari/i)&&!ce(/chrome/i)&&!ce(/android/i),Kt=ce(/iP(ad|od|hone)/i),hn=ce(/chrome/i)&&ce(/android/i),gn={capture:!1,passive:!1};an=/\s+/g;X="Sortable"+new Date().getTime();Oe=[],Dt={initializeByDefault:!0},$e={mount:function(e){for(var t in Dt)Dt.hasOwnProperty(t)&&!(t in e)&&(e[t]=Dt[t]);Oe.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Oe.push(e)},pluginEvent:function(e,t,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=e+"Global";Oe.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][o]&&t[s.pluginName][o](ae({sortable:t},i)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](ae({sortable:t},i)))})},initializePlugins:function(e,t,i,r){Oe.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,ue(i,c.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);typeof s<"u"&&(e.options[o]=s)}},getEventProperties:function(e,t){var i={};return Oe.forEach(function(r){typeof r.eventProperties=="function"&&ue(i,r.eventProperties.call(t[r.pluginName],e))}),i},modifyOption:function(e,t,i){var r;return Oe.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[t]=="function"&&(r=o.optionListeners[t].call(e[o.pluginName],i))}),r}};sr=["evt"],U=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=Qi(i,sr);$e.pluginEvent.bind(_)(e,t,ae({dragEl:h,parentEl:R,ghostEl:w,rootEl:P,nextEl:Ee,lastDownEl:rt,cloneEl:F,cloneHidden:ge,dragStarted:ke,putSortable:V,activeSortable:_.active,originalEvent:r,oldIndex:Ae,oldDraggableIndex:Re,newIndex:J,newDraggableIndex:he,hideGhostForTarget:Cn,unhideGhostForTarget:xn,cloneNowHidden:function(){ge=!0},cloneNowShown:function(){ge=!1},dispatchSortableEvent:function(a){G({sortable:t,name:a,originalEvent:r})}},o))};xe=!1,ct=!1,ut=[],Be=!1,et=!1,Lt=[],Nt=!1,dt=[],pt=typeof document<"u",tt=Kt,fn=Ke||de?"cssFloat":"float",ar=pt&&!hn&&!Kt&&"draggable"in document.createElement("div"),Sn=function(){if(pt){if(de)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),En=function(e,t){var i=y(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=Te(e,0,t),s=Te(e,1,t),a=o&&y(o),l=s&&y(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+B(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+B(s).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&i[fn]==="none"||s&&i[fn]==="none"&&c+d>r)?"vertical":"horizontal"},lr=function(e,t,i){var r=i?e.left:e.top,o=i?e.right:e.bottom,s=i?e.width:e.height,a=i?t.left:t.top,l=i?t.right:t.bottom,c=i?t.width:t.height;return r===a||o===l||r+s/2===a+c/2},cr=function(e,t){var i;return ut.some(function(r){var o=r[X].options.emptyInsertThreshold;if(!(!o||$t(r))){var s=B(r),a=e>=s.left-o&&e<=s.right+o,l=t>=s.top-o&&t<=s.bottom+o;if(a&&l)return i=r}}),i},On=function(e){function t(o,s){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||u))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return t(o(a,l,c,d),s)(a,l,c,d);var f=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var i={},r=e.group;(!r||it(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},Cn=function(){!Sn&&w&&y(w,"display","none")},xn=function(){!Sn&&w&&y(w,"display","")};pt&&!hn&&document.addEventListener("click",function(n){if(ct)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ct=!1,!1},!0);Se=function(e){if(h){e=e.touches?e.touches[0]:e;var t=cr(e.clientX,e.clientY);if(t){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[X]._onDragOver(i)}}},ur=function(e){h&&h.parentNode[X]._isOutsideThisEl(e.target)};_.prototype={constructor:_,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ce=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,r=this.options,o=r.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=r.filter;if(br(i),!h&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Me&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ie(l,r.draggable,i,!1),!(l&&l.animated)&&rt!==l)){if(Ae=te(l),Re=te(l,r.draggable),typeof d=="function"){if(d.call(this,e,l,this)){G({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),U("filter",t,{evt:e}),o&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=ie(c,u.trim(),i,!1),u)return G({sortable:t,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),U("filter",t,{evt:e}),!0}),d)){o&&e.preventDefault();return}r.handle&&!ie(c,r.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,i){var r=this,o=r.el,s=r.options,a=o.ownerDocument,l;if(i&&!h&&i.parentNode===o){var c=B(i);if(P=o,h=i,R=h.parentNode,Ee=h.nextSibling,rt=i,Ze=s.group,_.dragged=h,we={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},un=we.clientX-c.left,dn=we.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",l=function(){if(U("delayEnded",r,{evt:e}),_.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!sn&&r.nativeDraggable&&(h.draggable=!0),r._triggerDragStart(e,t),G({sortable:r,name:"choose",originalEvent:e}),Q(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(d){vn(h,d.trim(),kt)}),T(a,"dragover",Se),T(a,"mousemove",Se),T(a,"touchmove",Se),s.supportPointer?(T(a,"pointerup",r._onDrop),!this.nativeDraggable&&T(a,"pointercancel",r._onDrop)):(T(a,"mouseup",r._onDrop),T(a,"touchend",r._onDrop),T(a,"touchcancel",r._onDrop)),sn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),U("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||de))){if(_.eventCanceled){this._onDrop();return}s.supportPointer?(T(a,"pointerup",r._disableDelayedDrag),T(a,"pointercancel",r._disableDelayedDrag)):(T(a,"mouseup",r._disableDelayedDrag),T(a,"touchend",r._disableDelayedDrag),T(a,"touchcancel",r._disableDelayedDrag)),T(a,"mousemove",r._delayedDragTouchMoveHandler),T(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&T(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&kt(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._disableDelayedDrag),A(e,"touchend",this._disableDelayedDrag),A(e,"touchcancel",this._disableDelayedDrag),A(e,"pointerup",this._disableDelayedDrag),A(e,"pointercancel",this._disableDelayedDrag),A(e,"mousemove",this._delayedDragTouchMoveHandler),A(e,"touchmove",this._delayedDragTouchMoveHandler),A(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):t?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(h,"dragend",this),T(P,"dragstart",this._onDragStart));try{document.selection?st(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(xe=!1,P&&h){U("dragStarted",this,{evt:t}),this.nativeDraggable&&T(document,"dragover",ur);var i=this.options;!e&&Q(h,i.dragClass,!1),Q(h,i.ghostClass,!0),_.active=this,e&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ne){this._lastX=ne.clientX,this._lastY=ne.clientY,Cn();for(var e=document.elementFromPoint(ne.clientX,ne.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ne.clientX,ne.clientY),e!==t);)t=e;if(h.parentNode[X]._isOutsideThisEl(e),t)do{if(t[X]){var i=void 0;if(i=t[X]._onDragOver({clientX:ne.clientX,clientY:ne.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=mn(t));xn()}},_onTouchMove:function(e){if(we){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,s=w&&De(w,!0),a=w&&s&&s.a,l=w&&s&&s.d,c=tt&&j&&cn(j),d=(o.clientX-we.clientX+r.x)/(a||1)+(c?c[0]-Lt[0]:0)/(a||1),u=(o.clientY-we.clientY+r.y)/(l||1)+(c?c[1]-Lt[1]:0)/(l||1);if(!_.active&&!xe){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(w){s?(s.e+=d-(Tt||0),s.f+=u-(It||0)):s={a:1,b:0,c:0,d:1,e:d,f:u};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");y(w,"webkitTransform",f),y(w,"mozTransform",f),y(w,"msTransform",f),y(w,"transform",f),Tt=d,It=u,ne=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:P,t=B(h,!0,tt,!0,e),i=this.options;if(tt){for(j=e;y(j,"position")==="static"&&y(j,"transform")==="none"&&j!==document;)j=j.parentNode;j!==document.body&&j!==document.documentElement?(j===document&&(j=se()),t.top+=j.scrollTop,t.left+=j.scrollLeft):j=se(),Lt=cn(j)}w=h.cloneNode(!0),Q(w,i.ghostClass,!1),Q(w,i.fallbackClass,!0),Q(w,i.dragClass,!0),y(w,"transition",""),y(w,"transform",""),y(w,"box-sizing","border-box"),y(w,"margin",0),y(w,"top",t.top),y(w,"left",t.left),y(w,"width",t.width),y(w,"height",t.height),y(w,"opacity","0.8"),y(w,"position",tt?"absolute":"fixed"),y(w,"zIndex","100000"),y(w,"pointerEvents","none"),_.ghost=w,e.appendChild(w),y(w,"transform-origin",un/parseInt(w.style.width)*100+"% "+dn/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,r=e.dataTransfer,o=i.options;if(U("dragStart",this,{evt:e}),_.eventCanceled){this._onDrop();return}U("setupClone",this),_.eventCanceled||(F=_n(h),F.removeAttribute("id"),F.draggable=!1,F.style["will-change"]="",this._hideClone(),Q(F,this.options.chosenClass,!1),_.clone=F),i.cloneId=st(function(){U("clone",i),!_.eventCanceled&&(i.options.removeCloneOnHide||P.insertBefore(F,h),i._hideClone(),G({sortable:i,name:"clone"}))}),!t&&Q(h,o.dragClass,!0),t?(ct=!0,i._loopId=setInterval(i._emulateDragOver,50)):(A(document,"mouseup",i._onDrop),A(document,"touchend",i._onDrop),A(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,h)),T(document,"drop",i),y(h,"transform","translateZ(0)")),xe=!0,i._dragStartId=st(i._dragStarted.bind(i,t,e)),T(document,"selectstart",i),ke=!0,window.getSelection().removeAllRanges(),Me&&y(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,r,o,s,a=this.options,l=a.group,c=_.active,d=Ze===l,u=a.sort,f=V||c,v,p=this,g=!1;if(Nt)return;function E(Le,Gi){U(Le,p,ae({evt:e,isOwner:d,axis:v?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:u,fromSortable:f,target:i,completed:m,onMove:function(rn,zi){return nt(P,t,h,r,rn,B(rn),e,zi)},changed:D},Gi))}function O(){E("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function m(Le){return E("dragOverCompleted",{insertion:Le}),Le&&(d?c._hideClone():c._showClone(p),p!==f&&(Q(h,V?V.options.ghostClass:c.options.ghostClass,!1),Q(h,a.ghostClass,!0)),V!==p&&p!==_.active?V=p:p===_.active&&V&&(V=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){E("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===h&&!h.animated||i===t&&!i.animated)&&(Ce=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(h.parentNode[X]._isOutsideThisEl(e.target),!Le&&Se(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function D(){J=te(h),he=te(h,a.draggable),G({sortable:p,name:"change",toEl:t,newIndex:J,newDraggableIndex:he,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=ie(i,a.draggable,t,!0),E("dragOver"),_.eventCanceled)return g;if(h.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return m(!1);if(ct=!1,c&&!a.disabled&&(d?u||(s=R!==P):V===this||(this.lastPutMode=Ze.checkPull(this,c,h,e))&&l.checkPut(this,c,h,e))){if(v=this._getDirection(e,i)==="vertical",r=B(h),E("dragOverValid"),_.eventCanceled)return g;if(s)return R=P,O(),this._hideClone(),E("revert"),_.eventCanceled||(Ee?P.insertBefore(h,Ee):P.appendChild(h)),m(!0);var k=$t(t,a.draggable);if(!k||hr(e,v,this)&&!k.animated){if(k===h)return m(!1);if(k&&t===e.target&&(i=k),i&&(o=B(i)),nt(P,t,h,r,i,o,e,!!i)!==!1)return O(),k&&k.nextSibling?t.insertBefore(h,k.nextSibling):t.appendChild(h),R=t,D(),m(!0)}else if(k&&pr(e,v,this)){var ee=Te(t,0,a,!0);if(ee===h)return m(!1);if(i=ee,o=B(i),nt(P,t,h,r,i,o,e,!1)!==!1)return O(),t.insertBefore(h,ee),R=t,D(),m(!0)}else if(i.parentNode===t){o=B(i);var Y=0,S,x=h.parentNode!==t,b=!lr(h.animated&&h.toRect||r,i.animated&&i.toRect||o,v),N=v?"top":"left",C=ln(i,"top","top")||ln(h,"top","top"),oe=C?C.scrollTop:void 0;Ce!==i&&(S=o[N],Be=!1,et=!b&&a.invertSwap||x),Y=gr(e,i,o,v,b?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,et,Ce===i);var z;if(Y!==0){var le=te(h);do le-=Y,z=R.children[le];while(z&&(y(z,"display")==="none"||z===w))}if(Y===0||z===i)return m(!1);Ce=i,He=Y;var _e=i.nextElementSibling,pe=!1;pe=Y===1;var Je=nt(P,t,h,r,i,o,e,pe);if(Je!==!1)return(Je===1||Je===-1)&&(pe=Je===1),Nt=!0,setTimeout(fr,30),O(),pe&&!_e?t.appendChild(h):i.parentNode.insertBefore(h,pe?_e:i),C&&yn(C,0,oe-C.scrollTop),R=h.parentNode,S!==void 0&&!et&&(ot=Math.abs(S-B(i)[N])),D(),m(!0)}if(t.contains(h))return m(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove),A(document,"touchmove",this._onTouchMove),A(document,"pointermove",this._onTouchMove),A(document,"dragover",Se),A(document,"mousemove",Se),A(document,"touchmove",Se)},_offUpEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._onDrop),A(e,"touchend",this._onDrop),A(e,"pointerup",this._onDrop),A(e,"pointercancel",this._onDrop),A(e,"touchcancel",this._onDrop),A(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(J=te(h),he=te(h,i.draggable),U("drop",this,{evt:e}),R=h&&h.parentNode,J=te(h),he=te(h,i.draggable),_.eventCanceled){this._nulling();return}xe=!1,et=!1,Be=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Rt(this.cloneId),Rt(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Me&&y(document.body,"user-select",""),y(h,"transform",""),e&&(ke&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(P===R||V&&V.lastPutMode!=="clone")&&F&&F.parentNode&&F.parentNode.removeChild(F),h&&(this.nativeDraggable&&A(h,"dragend",this),kt(h),h.style["will-change"]="",ke&&!xe&&Q(h,V?V.options.ghostClass:this.options.ghostClass,!1),Q(h,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:e}),P!==R?(J>=0&&(G({rootEl:R,name:"add",toEl:R,fromEl:P,originalEvent:e}),G({sortable:this,name:"remove",toEl:R,originalEvent:e}),G({rootEl:R,name:"sort",toEl:R,fromEl:P,originalEvent:e}),G({sortable:this,name:"sort",toEl:R,originalEvent:e})),V&&V.save()):J!==Ae&&J>=0&&(G({sortable:this,name:"update",toEl:R,originalEvent:e}),G({sortable:this,name:"sort",toEl:R,originalEvent:e})),_.active&&((J==null||J===-1)&&(J=Ae,he=Re),G({sortable:this,name:"end",toEl:R,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){U("nulling",this),P=h=R=w=Ee=F=rt=ge=we=ne=ke=J=he=Ae=Re=Ce=He=V=Ze=_.dragged=_.ghost=_.clone=_.active=null,dt.forEach(function(e){e.checked=!0}),dt.length=Tt=It=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),dr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,r=0,o=i.length,s=this.options;r<o;r++)t=i[r],ie(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||vr(t));return e},sort:function(e,t){var i={},r=this.el;this.toArray().forEach(function(o,s){var a=r.children[s];ie(a,this.options.draggable,r,!1)&&(i[o]=a)},this),t&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ie(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var r=$e.modifyOption(this,e,t);typeof r<"u"?i[e]=r:i[e]=t,e==="group"&&On(i)},destroy:function(){U("destroy",this);var e=this.el;e[X]=null,A(e,"mousedown",this._onTapStart),A(e,"touchstart",this._onTapStart),A(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(e,"dragover",this),A(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ut.splice(ut.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ge){if(U("hideClone",this),_.eventCanceled)return;y(F,"display","none"),this.options.removeCloneOnHide&&F.parentNode&&F.parentNode.removeChild(F),ge=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ge){if(U("showClone",this),_.eventCanceled)return;h.parentNode==P&&!this.options.group.revertClone?P.insertBefore(F,h):Ee?P.insertBefore(F,Ee):P.appendChild(F),this.options.group.revertClone&&this.animate(h,F),y(F,"display",""),ge=!1}}};pt&&T(document,"touchmove",function(n){(_.active||xe)&&n.cancelable&&n.preventDefault()});_.utils={on:T,off:A,css:y,find:vn,is:function(e,t){return!!ie(e,t,e,!1)},extend:er,throttle:bn,closest:ie,toggleClass:Q,clone:_n,index:te,nextTick:st,cancelNextTick:Rt,detectDirection:En,getChild:Te,expando:X};_.get=function(n){return n[X]};_.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(_.utils=ae(ae({},_.utils),i.utils)),$e.mount(i)})};_.create=function(n,e){return new _(n,e)};_.version=Ji;H=[],Bt=!1;Mt=bn(function(n,e,t,i){if(e.scroll){var r=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=e.scrollSensitivity,a=e.scrollSpeed,l=se(),c=!1,d;Ht!==t&&(Ht=t,at(),Pe=e.scroll,d=e.scrollFn,Pe===!0&&(Pe=me(t,!0)));var u=0,f=Pe;do{var v=f,p=B(v),g=p.top,E=p.bottom,O=p.left,m=p.right,D=p.width,k=p.height,ee=void 0,Y=void 0,S=v.scrollWidth,x=v.scrollHeight,b=y(v),N=v.scrollLeft,C=v.scrollTop;v===l?(ee=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),Y=k<x&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(ee=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"),Y=k<x&&(b.overflowY==="auto"||b.overflowY==="scroll"));var oe=ee&&(Math.abs(m-r)<=s&&N+D<S)-(Math.abs(O-r)<=s&&!!N),z=Y&&(Math.abs(E-o)<=s&&C+k<x)-(Math.abs(g-o)<=s&&!!C);if(!H[u])for(var le=0;le<=u;le++)H[le]||(H[le]={});(H[u].vx!=oe||H[u].vy!=z||H[u].el!==v)&&(H[u].el=v,H[u].vx=oe,H[u].vy=z,clearInterval(H[u].pid),(oe!=0||z!=0)&&(c=!0,H[u].pid=setInterval(function(){i&&this.layer===0&&_.active._onTouchMove(ft);var _e=H[this.layer].vy?H[this.layer].vy*a:0,pe=H[this.layer].vx?H[this.layer].vx*a:0;typeof d=="function"&&d.call(_.dragged.parentNode[X],pe,_e,n,ft,H[this.layer].el)!=="continue"||yn(H[this.layer].el,pe,_e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&f!==l&&(f=me(f,!1)));Bt=c}},30),An=function(e){var t=e.originalEvent,i=e.putSortable,r=e.dragEl,o=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=i||o;a();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(s("spill"),this.onSpill({dragEl:r,putSortable:i}))}};Yt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=Te(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:An};ue(Yt,{pluginName:"revertOnSpill"});Vt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:An};ue(Vt,{pluginName:"removeOnSpill"});_.mount(new yr);_.mount(Vt,Yt);Dn=_});var Ye,In=I(()=>{Ye=class{constructor(e){this.props={closeOnClickOutside:!0,root:document.body,...e},this.dialog=null,this.addListener("close-dialog",this.close)}clickListener(e){!e.target.closest(".rs-util-settings-dialog__content")&&this.props.closeOnClickOutside&&this.close();let t=e.target.closest("button");t&&t.dataset.action&&document.dispatchEvent(new CustomEvent("dialog-action."+t.dataset.action,{detail:{dialog:this.dialog,button:t}}))}addListener(e,t){document.addEventListener("dialog-action."+e,t)}close({detail:e}){let{dialog:t}=e||{};document.body.classList.remove("rs-util-settings-dialog-open"),t&&t.remove()}open(){document.body.classList.add("rs-util-settings-dialog-open"),this.render()}render(e={}){e={...this.props,...e};let t=document.createElement("div");return t.classList.add("rs-util-settings-dialog"),t.innerHTML=`
			<div class="rs-util-settings-dialog__content">
				<div class="rs-util-settings-dialog__header">
					<h2>${e.title}</h2>
					<button type="button" class="rs-util-settings-dialog__close" data-action="close-dialog">Close</button>
				</div>
				<div class="rs-util-settings-dialog__body">
					${e.content}
					<div class="rs-util-settings-dialog__actions">
						${e.actions.map(i=>{let r=document.createElement("button");return r.type="button",r.classList.add("button","rs-util-settings-dialog__action"),i.primary&&r.classList.add("button-primary"),i.classes&&r.classList.add(...i.classes),i.action&&(r.dataset.action=i.action),r.innerHTML=i.label,r.outerHTML}).join("")}
					</div>
				</div>
			</div>
		`,this.dialog=t,this.props.root.appendChild(t),t.addEventListener("click",this.clickListener.bind(this)),t}}});function jt(n,e){n.split(/\s+/).forEach(t=>{e(t)})}var Ve,Ln=I(()=>{Ve=class{constructor(){this._events={}}on(e,t){jt(e,i=>{let r=this._events[i]||[];r.push(t),this._events[i]=r})}off(e,t){var i=arguments.length;if(i===0){this._events={};return}jt(e,r=>{if(i===1){delete this._events[r];return}let o=this._events[r];o!==void 0&&(o.splice(o.indexOf(t),1),this._events[r]=o)})}trigger(e,...t){var i=this;jt(e,r=>{let o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,t)})})}}});function qt(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,t){n.plugins[e]={name:e,fn:t}}initializePlugins(e){var t,i;let r=this,o=[];if(Array.isArray(e))e.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(e)for(t in e)e.hasOwnProperty(t)&&(r.plugins.settings[t]=e[t],o.push(t));for(;i=o.shift();)r.require(i)}loadPlugin(e){var t=this,i=t.plugins,r=n.plugins[e];if(!n.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=r.fn.apply(t,[t.plugins.settings[e]||{}]),i.names.push(e)}require(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]}}}var kn=I(()=>{});var je,Gt,zt,_r,ve,wr,Sr,Pn=I(()=>{je=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":wr(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Gt=n=>{if(!_r(n))return n.join("");let e="",t=0,i=()=>{t>1&&(e+="{"+t+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){t++;return}i(),e+=r,t=1}),i(),e},zt=n=>{let e=Array.from(n);return je(e)},_r=n=>new Set(n).size!==n.length,ve=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),wr=n=>n.reduce((e,t)=>Math.max(e,Sr(t)),0),Sr=n=>Array.from(n).length});var Ut,Fn=I(()=>{Ut=n=>{if(n.length===1)return[[n]];let e=[],t=n.substring(1);return Ut(t).forEach(function(r){let o=r.slice(0);o[0]=n.charAt(0)+o[0],e.push(o),o=r.slice(0),o.unshift(n.charAt(0)),e.push(o)}),e}});function*Tr(n){for(let[e,t]of n)for(let i=e;i<=t;i++){let r=String.fromCharCode(i),o=qe(r);o!=r.toLowerCase()&&(o.length>Cr||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}var Er,Or,ht,Hn,Cr,Xt,Mn,xr,Ar,Nn,qe,Dr,Ir,Lr,kr,Pr,Rn,Fr,gt,Bn,mt=I(()=>{Pn();Fn();Er=[[0,65535]],Or="[\u0300-\u036F\xB7\u02BE\u02BC]",Cr=3,Xt={},Mn={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let n in Mn){let e=Mn[n]||"";for(let t=0;t<e.length;t++){let i=e.substring(t,t+1);Xt[i]=n}}xr=new RegExp(Object.keys(Xt).join("|")+"|"+Or,"gu"),Ar=n=>{ht===void 0&&(ht=Lr(n||Er))},Nn=(n,e="NFKD")=>n.normalize(e),qe=n=>Array.from(n).reduce((e,t)=>e+Dr(t),""),Dr=n=>(n=Nn(n).toLowerCase().replace(xr,e=>Xt[e]||""),Nn(n,"NFC"));Ir=n=>{let e={},t=(i,r)=>{let o=e[i]||new Set,s=new RegExp("^"+zt(o)+"$","iu");r.match(s)||(o.add(ve(r)),e[i]=o)};for(let i of Tr(n))t(i.folded,i.folded),t(i.folded,i.composed);return e},Lr=n=>{let e=Ir(n),t={},i=[];for(let o in e){let s=e[o];s&&(t[o]=zt(s)),o.length>1&&i.push(ve(o))}i.sort((o,s)=>s.length-o.length);let r=je(i);return Hn=new RegExp("^"+r,"u"),t},kr=(n,e=1)=>{let t=0;return n=n.map(i=>(ht[i]&&(t+=i.length),ht[i]||i)),t>=e?Gt(n):""},Pr=(n,e=1)=>(e=Math.max(e,n.length-1),je(Ut(n).map(t=>kr(t,e)))),Rn=(n,e=!0)=>{let t=n.length>1?1:0;return je(n.map(i=>{let r=[],o=e?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(Pr(i.substrs[s]||"",t));return Gt(r)}))},Fr=(n,e)=>{for(let t of e){if(t.start!=n.start||t.end!=n.end||t.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts,r=s=>{for(let a of i){if(a.start===s.start&&a.substr===s.substr)return!1;if(!(s.length==1||a.length==1)&&(s.start<a.start&&s.end>a.start||a.start<s.start&&a.end>s.start))return!0}return!1};if(!(t.parts.filter(r).length>0))return!0}return!1},gt=class n{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(e,t){let i=new n,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(let l of r)i.add(l);let s=t.substr.substring(0,e-o.start),a=s.length;return i.add({start:o.start,end:o.start+a,length:a,substr:s}),i}},Bn=n=>{Ar(),n=qe(n);let e="",t=[new gt];for(let i=0;i<n.length;i++){let o=n.substring(i).match(Hn),s=n.substring(i,i+1),a=o?o[0]:null,l=[],c=new Set;for(let d of t){let u=d.last();if(!u||u.length==1||u.end<=i)if(a){let f=a.length;d.add({start:i,end:i+f,length:f,substr:a}),c.add("1")}else d.add({start:i,end:i+1,length:1,substr:s}),c.add("2");else if(a){let f=d.clone(i,u),v=a.length;f.add({start:i,end:i+v,length:v,substr:a}),l.push(f)}else c.add("3")}if(l.length>0){l=l.sort((d,u)=>d.length()-u.length());for(let d of l)Fr(d,t)||t.push(d);continue}if(i>0&&c.size==1&&!c.has("3")){e+=Rn(t,!1);let d=new gt,u=t[0];u&&d.add(u.last()),t=[d]}}return e+=Rn(t,!0),e}});var Kn,$n,vt,bt,Ge,Yn,Vn=I(()=>{mt();Kn=(n,e)=>{if(n)return n[e]},$n=(n,e)=>{if(n){for(var t,i=e.split(".");(t=i.shift())&&(n=n[t]););return n}},vt=(n,e,t)=>{var i,r;return!n||(n=n+"",e.regex==null)||(r=n.search(e.regex),r===-1)?0:(i=e.string.length/n.length,r===0&&(i+=.5),i*t)},bt=(n,e)=>{var t=n[e];if(typeof t=="function")return t;t&&!Array.isArray(t)&&(n[e]=[t])},Ge=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},Yn=(n,e)=>typeof n=="number"&&typeof e=="number"?n>e?1:n<e?-1:0:(n=qe(n+"").toLowerCase(),e=qe(e+"").toLowerCase(),n>e?1:e>n?-1:0)});var jn=I(()=>{});var yt,qn=I(()=>{Vn();mt();jn();yt=class{items;settings;constructor(e,t){this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,i){if(!e||!e.length)return[];let r=[],o=e.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(ve).join("|")+"):(.*)$")),o.forEach(a=>{let l,c=null,d=null;s&&(l=a.match(s))&&(c=l[1],a=l[2]),a.length>0&&(this.settings.diacritics?d=Bn(a)||null:d=ve(a),d&&t&&(d="\\b"+d)),r.push({string:a,regex:d?new RegExp(d,"iu"):null,field:c})}),r}getScoreFunction(e,t){var i=this.prepareSearch(e,t);return this._getScoreFunction(i)}_getScoreFunction(e){let t=e.tokens,i=t.length;if(!i)return function(){return 0};let r=e.options.fields,o=e.weights,s=r.length,a=e.getAttrFn;if(!s)return function(){return 1};let l=function(){return s===1?function(c,d){let u=r[0].field;return vt(a(d,u),c,o[u]||1)}:function(c,d){var u=0;if(c.field){let f=a(d,c.field);!c.regex&&f?u+=1/s:u+=vt(f,c,1)}else Ge(o,(f,v)=>{u+=vt(a(d,v),c,f)});return u/s}}();return i===1?function(c){return l(t[0],c)}:e.options.conjunction==="and"?function(c){var d,u=0;for(let f of t){if(d=l(f,c),d<=0)return 0;u+=d}return u/i}:function(c){var d=0;return Ge(t,u=>{d+=l(u,c)}),d/i}}getSortFunction(e,t){var i=this.prepareSearch(e,t);return this._getSortFunction(i)}_getSortFunction(e){var t,i=[];let r=this,o=e.options,s=!e.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);let a=function(c,d){return c==="$score"?d.score:e.getAttrFn(r.items[d.id],c)};if(s)for(let c of s)(e.query||c.field!=="$score")&&i.push(c);if(e.query){t=!0;for(let c of i)if(c.field==="$score"){t=!1;break}t&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(c=>c.field!=="$score");return i.length?function(c,d){var u,f;for(let v of i)if(f=v.field,u=(v.direction==="desc"?-1:1)*Yn(a(f,c),a(f,d)),u)return u;return 0}:null}prepareSearch(e,t){let i={};var r=Object.assign({},t);if(bt(r,"sort"),bt(r,"sort_empty"),r.fields){bt(r,"fields");let o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:e.toLowerCase().trim(),tokens:this.tokenize(e,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?$n:Kn}}search(e,t){var i=this,r,o;o=this.prepareSearch(e,t),t=o.options,e=o.query;let s=t.score||i._getScoreFunction(o);e.length?Ge(i.items,(l,c)=>{r=s(l),(t.filter===!1||r>0)&&o.items.push({score:r,id:c})}):Ge(i.items,(l,c)=>{o.items.push({score:1,id:c})});let a=i._getSortFunction(o);return a&&o.items.sort(a),o.total=o.items.length,typeof t.limit=="number"&&(o.items=o.items.slice(0,t.limit)),o}}});var Z,ze,_t,Gn,zn,Wt,Un,M,q,be,wt,Qt,ye,K,St=I(()=>{Z=n=>typeof n>"u"||n===null?null:ze(n),ze=n=>typeof n=="boolean"?n?"1":"0":n+"",_t=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Gn=(n,e)=>e>0?window.setTimeout(n,e):(n.call(null),null),zn=(n,e)=>{var t;return function(i,r){var o=this;t&&(o.loading=Math.max(o.loading-1,0),clearTimeout(t)),t=setTimeout(function(){t=null,o.loadedSearches[i]=!0,n.call(o,i,r)},e)}},Wt=(n,e,t)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(e.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},t.apply(n,[]),n.trigger=r;for(i of e)i in o&&r.apply(n,o[i])},Un=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),M=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},q=(n,e,t,i)=>{n.addEventListener(e,t,i)},be=(n,e)=>{if(!e||!e[n])return!1;var t=(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0);return t===1},wt=(n,e)=>{let t=n.getAttribute("id");return t||(n.setAttribute("id",e),e)},Qt=n=>n.replace(/[\\"']/g,"\\$&"),ye=(n,e)=>{e&&n.append(e)},K=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)}});var re,Jt,Xn,Et,Ue,W,fe,Wn,Qn,Ot,Zt,Jn,en,L,Xe,tn=I(()=>{St();re=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Jt(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},Jt=n=>typeof n=="string"&&n.indexOf("<")>-1,Xn=n=>n.replace(/['"\\]/g,"\\$&"),Et=(n,e)=>{var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),n.dispatchEvent(t)},Ue=(n,e)=>{Object.assign(n.style,e)},W=(n,...e)=>{var t=Wn(e);n=Qn(n),n.map(i=>{t.map(r=>{i.classList.add(r)})})},fe=(n,...e)=>{var t=Wn(e);n=Qn(n),n.map(i=>{t.map(r=>{i.classList.remove(r)})})},Wn=n=>{var e=[];return K(n,t=>{typeof t=="string"&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},Qn=n=>(Array.isArray(n)||(n=[n]),n),Ot=(n,e,t)=>{if(!(t&&!t.contains(n)))for(;n&&n.matches;){if(n.matches(e))return n;n=n.parentNode}},Zt=(n,e=0)=>e>0?n[n.length-1]:n[0],Jn=n=>Object.keys(n).length===0,en=(n,e)=>{if(!n)return-1;e=e||n.nodeName;for(var t=0;n=n.previousElementSibling;)n.matches(e)&&t++;return t},L=(n,e)=>{K(e,(t,i)=>{t==null?n.removeAttribute(i):n.setAttribute(i,""+t)})},Xe=(n,e)=>{n.parentNode&&n.parentNode.replaceChild(e,n)}});var Zn,ei,ti=I(()=>{tn();Zn=(n,e)=>{if(e===null)return;if(typeof e=="string"){if(!e.length)return;e=new RegExp(e,"i")}let t=o=>{var s=o.data.match(e);if(s&&o.data.length>0){var a=document.createElement("span");a.className="highlight";var l=o.splitText(s.index);l.splitText(s[0].length);var c=l.cloneNode(!0);return a.appendChild(c),Xe(l,a),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?t(o):(i(o),0);r(n)},ei=n=>{var e=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(t){var i=t.parentNode;i.replaceChild(t.firstChild,t),i.normalize()})}});var Mr,We,ni=I(()=>{Mr=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),We=Mr?"metaKey":"ctrlKey"});var nn,ii=I(()=>{nn={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}}});function Ct(n,e){var t=Object.assign({},nn,e),i=t.dataAttr,r=t.labelField,o=t.valueField,s=t.disabledField,a=t.optgroupField,l=t.optgroupLabelField,c=t.optgroupValueField,d=n.tagName.toLowerCase(),u=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!u&&!t.allowEmptyOption){let g=n.querySelector('option[value=""]');g&&(u=g.textContent)}var f={placeholder:u,options:[],optgroups:[],items:[],maxItems:null},v=()=>{var g,E=f.options,O={},m=1;let D=0;var k=S=>{var x=Object.assign({},S.dataset),b=i&&x[i];return typeof b=="string"&&b.length&&(x=Object.assign(x,JSON.parse(b))),x},ee=(S,x)=>{var b=Z(S.value);if(b!=null&&!(!b&&!t.allowEmptyOption)){if(O.hasOwnProperty(b)){if(x){var N=O[b][a];N?Array.isArray(N)?N.push(x):O[b][a]=[N,x]:O[b][a]=x}}else{var C=k(S);C[r]=C[r]||S.textContent,C[o]=C[o]||b,C[s]=C[s]||S.disabled,C[a]=C[a]||x,C.$option=S,C.$order=C.$order||++D,O[b]=C,E.push(C)}S.selected&&f.items.push(b)}},Y=S=>{var x,b;b=k(S),b[l]=b[l]||S.getAttribute("label")||"",b[c]=b[c]||m++,b[s]=b[s]||S.disabled,b.$order=b.$order||++D,f.optgroups.push(b),x=b[c],K(S.children,N=>{ee(N,x)})};f.maxItems=n.hasAttribute("multiple")?null:1,K(n.children,S=>{g=S.tagName.toLowerCase(),g==="optgroup"?Y(S):g==="option"&&ee(S)})},p=()=>{let g=n.getAttribute(i);if(g)f.options=JSON.parse(g),K(f.options,O=>{f.items.push(O[o])});else{var E=n.value.trim()||"";if(!t.allowEmptyOption&&!E.length)return;let O=E.split(t.delimiter);K(O,m=>{let D={};D[r]=m,D[o]=m,f.options.push(D)}),f.items=O}};return d==="select"?v():p(),Object.assign({},nn,f,e)}var ri=I(()=>{ii();St()});var ai,$,li=I(()=>{Ln();kn();qn();mt();ti();ni();ri();St();tn();ai=0,$=class extends qt(Ve){constructor(e,t){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,ai++;var i,r=re(e);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");let s=Ct(r,t);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=wt(r,"tomselect-"+ai),this.isRequired=r.required,this.sifter=new yt(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var a=s.createFilter;typeof a!="function"&&(typeof a=="string"&&(a=new RegExp(a)),a instanceof RegExp?s.createFilter=E=>a.test(E):s.createFilter=E=>this.settings.duplicates||!this.options[E]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();let l=re("<div>"),c=re("<div>"),d=this._render("dropdown"),u=re('<div role="listbox" tabindex="-1">'),f=this.input.getAttribute("class")||"",v=s.mode;var p;if(W(l,s.wrapperClass,f,v),W(c,s.controlClass),ye(l,c),W(d,s.dropdownClass,v),s.copyClassesToDropdown&&W(d,f),W(u,s.dropdownContentClass),ye(d,u),re(s.dropdownParent||l).appendChild(d),Jt(s.controlInput)){p=re(s.controlInput);var g=["autocorrect","autocapitalize","autocomplete","spellcheck"];K(g,E=>{r.getAttribute(E)&&L(p,{[E]:r.getAttribute(E)})}),p.tabIndex=-1,c.appendChild(p),this.focus_node=p}else s.controlInput?(p=re(s.controlInput),this.focus_node=p):(p=re("<input/>"),this.focus_node=c);this.wrapper=l,this.dropdown=d,this.dropdown_content=u,this.control=c,this.control_input=p,this.setup()}setup(){let e=this,t=e.settings,i=e.control_input,r=e.dropdown,o=e.dropdown_content,s=e.wrapper,a=e.control,l=e.input,c=e.focus_node,d={passive:!0},u=e.inputId+"-ts-dropdown";L(o,{id:u}),L(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":u});let f=wt(c,e.inputId+"-ts-control"),v="label[for='"+Xn(e.inputId)+"']",p=document.querySelector(v),g=e.focus.bind(e);if(p){q(p,"click",g),L(p,{for:f});let m=wt(p,e.inputId+"-ts-label");L(c,{"aria-labelledby":m}),L(o,{"aria-labelledby":m})}if(s.style.width=l.style.width,e.plugins.names.length){let m="plugin-"+e.plugins.names.join(" plugin-");W([s,r],m)}(t.maxItems===null||t.maxItems>1)&&e.is_select_tag&&L(l,{multiple:"multiple"}),t.placeholder&&L(i,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+ve(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=zn(t.load,t.loadThrottle)),q(r,"mousemove",()=>{e.ignoreHover=!1}),q(r,"mouseenter",m=>{var D=Ot(m.target,"[data-selectable]",r);D&&e.onOptionHover(m,D)},{capture:!0}),q(r,"click",m=>{let D=Ot(m.target,"[data-selectable]");D&&(e.onOptionSelect(m,D),M(m,!0))}),q(a,"click",m=>{var D=Ot(m.target,"[data-ts-item]",a);if(D&&e.onItemSelect(m,D)){M(m,!0);return}i.value==""&&(e.onClick(),M(m,!0))}),q(c,"keydown",m=>e.onKeyDown(m)),q(i,"keypress",m=>e.onKeyPress(m)),q(i,"input",m=>e.onInput(m)),q(c,"blur",m=>e.onBlur(m)),q(c,"focus",m=>e.onFocus(m)),q(i,"paste",m=>e.onPaste(m));let E=m=>{let D=m.composedPath()[0];if(!s.contains(D)&&!r.contains(D)){e.isFocused&&e.blur(),e.inputState();return}D==i&&e.isOpen?m.stopPropagation():M(m,!0)},O=()=>{e.isOpen&&e.positionDropdown()};q(document,"mousedown",E),q(window,"scroll",O,d),q(window,"resize",O,d),this._destroy=()=>{document.removeEventListener("mousedown",E),window.removeEventListener("scroll",O),window.removeEventListener("resize",O),p&&p.removeEventListener("click",g)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,q(l,"invalid",()=>{e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())}),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,l.disabled?e.disable():l.readOnly?e.setReadOnly(!0):e.enable(),e.on("change",this.onChange),W(l,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),t.preload===!0&&e.preload()}setupOptions(e=[],t=[]){this.addOptions(e),K(t,i=>{this.registerOptionGroup(i)})}setupTemplates(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[t])+"</div>",item:(o,s)=>"<div>"+s(o[t])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},r,e.settings.render)}setupCallbacks(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)t=this.settings[i[e]],t&&this.on(e,t)}sync(e=!0){let t=this,i=e?Ct(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(i.options,i.optgroups),t.setValue(i.items||[],!0),t.lastQuery=null}onClick(){var e=this;if(e.activeItems.length>0){e.clearActiveItems(),e.focus();return}e.isFocused&&e.isOpen?e.blur():e.focus()}onMouseDown(){}onChange(){Et(this.input,"input"),Et(this.input,"change")}onPaste(e){var t=this;if(t.isInputHidden||t.isLocked){M(e);return}t.settings.splitOn&&setTimeout(()=>{var i=t.inputValue();if(i.match(t.settings.splitOn)){var r=i.trim().split(t.settings.splitOn);K(r,o=>{Z(o)&&(this.options[o]?t.addItem(o):t.createItem(o))})}},0)}onKeyPress(e){var t=this;if(t.isLocked){M(e);return}var i=String.fromCharCode(e.keyCode||e.which);if(t.settings.create&&t.settings.mode==="multi"&&i===t.settings.delimiter){t.createItem(),M(e);return}}onKeyDown(e){var t=this;if(t.ignoreHover=!0,t.isLocked){e.keyCode!==9&&M(e);return}switch(e.keyCode){case 65:if(be(We,e)&&t.control_input.value==""){M(e),t.selectAll();return}break;case 27:t.isOpen&&(M(e,!0),t.close()),t.clearActiveItems();return;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let i=t.getAdjacent(t.activeOption,1);i&&t.setActiveOption(i)}M(e);return;case 38:if(t.activeOption){let i=t.getAdjacent(t.activeOption,-1);i&&t.setActiveOption(i)}M(e);return;case 13:t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),M(e)):t.settings.create&&t.createItem()?M(e):document.activeElement==t.control_input&&t.isOpen&&M(e);return;case 37:t.advanceSelection(-1,e);return;case 39:t.advanceSelection(1,e);return;case 9:t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),M(e)),t.settings.create&&t.createItem()&&M(e));return;case 8:case 46:t.deleteSelection(e);return}t.isInputHidden&&!be(We,e)&&M(e)}onInput(e){if(this.isLocked)return;let t=this.inputValue();if(this.lastValue!==t){if(this.lastValue=t,t==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=Gn(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let e=this.lastValue;this.settings.shouldLoad.call(this,e)&&this.load(e),this.refreshOptions(),this.trigger("type",e)}onOptionHover(e,t){this.ignoreHover||this.setActiveOption(t,!1)}onFocus(e){var t=this,i=t.isFocused;if(t.isDisabled||t.isReadOnly){t.blur(),M(e);return}t.ignoreFocus||(t.isFocused=!0,t.settings.preload==="focus"&&t.preload(),i||t.trigger("focus"),t.activeItems.length||(t.inputState(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){if(document.hasFocus()!==!1){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var i=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,i):i()}}}onOptionSelect(e,t){var i,r=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=t.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&e.type&&/click/.test(e.type)&&r.setActiveOption(t))))}canSelect(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}onItemSelect(e,t){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(M(e),i.setActiveItem(t,e),!0):!1}canLoad(e){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(e))}load(e){let t=this;if(!t.canLoad(e))return;W(t.wrapper,t.settings.loadingClass),t.loading++;let i=t.loadCallback.bind(t);t.settings.load.call(t,e,i)}loadCallback(e,t){let i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(e,t),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||fe(i.wrapper,i.settings.loadingClass),i.trigger("load",e,t)}preload(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}setTextboxValue(e=""){var t=this.control_input,i=t.value!==e;i&&(t.value=e,Et(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){var i=t?[]:["change"];Wt(this,i,()=>{this.clear(t),this.addItems(e,t)})}setMaxItems(e){e===0&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var i=this,r,o,s,a,l,c;if(i.settings.mode!=="single"){if(!e){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=t&&t.type.toLowerCase(),r==="click"&&be("shiftKey",t)&&i.activeItems.length){for(c=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,c),a=Array.prototype.indexOf.call(i.control.children,e),s>a&&(l=s,s=a,a=l),o=s;o<=a;o++)e=i.control.children[o],i.activeItems.indexOf(e)===-1&&i.setActiveItemClass(e);M(t)}else r==="click"&&be(We,t)||r==="keydown"&&be("shiftKey",t)?e.classList.contains("active")?i.removeActiveItem(e):i.setActiveItemClass(e):(i.clearActiveItems(),i.setActiveItemClass(e));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(e){let t=this,i=t.control.querySelector(".last-active");i&&fe(i,"last-active"),W(e,"active last-active"),t.trigger("item_select",e),t.activeItems.indexOf(e)==-1&&t.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),fe(e,"active")}clearActiveItems(){fe(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e,t=!0){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,L(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),L(e,{"aria-selected":"true"}),W(e,"active"),t&&this.scrollToOption(e)))}scrollToOption(e,t){if(!e)return;let i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=e.offsetHeight,a=e.getBoundingClientRect().top-i.getBoundingClientRect().top+o;a+s>r+o?this.scroll(a-r+s,t):a<o&&this.scroll(a,t)}scroll(e,t){let i=this.dropdown_content;t&&(i.style.scrollBehavior=t),i.scrollTop=e,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(fe(this.activeOption,"active"),L(this.activeOption,{"aria-selected":null})),this.activeOption=null,L(this.focus_node,{"aria-activedescendant":null})}selectAll(){let e=this;if(e.settings.mode==="single")return;let t=e.controlChildren();t.length&&(e.inputState(),e.close(),e.activeItems=t,K(t,i=>{e.setActiveItemClass(i)}))}inputState(){var e=this;e.control.contains(e.control_input)&&(L(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&L(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||e.isReadOnly||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout(()=>{e.ignoreFocus=!1,e.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return typeof e.sortField=="string"&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,e),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==r.lastQuery?(r.lastQuery=e,t=r.sifter.search(e,Object.assign(o,{score:i})),r.currentResults=t):t=Object.assign({},r.currentResults),r.settings.hideSelected&&(t.items=t.items.filter(s=>{let a=Z(s.id);return!(a&&r.items.indexOf(a)!==-1)})),t}refreshOptions(e=!0){var t,i,r,o,s,a,l,c,d,u;let f={},v=[];var p=this,g=p.inputValue();let E=g===p.lastQuery||g==""&&p.lastQuery==null;var O=p.search(g),m=null,D=p.settings.shouldOpen||!1,k=p.dropdown_content;E&&(m=p.activeOption,m&&(d=m.closest("[data-group]"))),o=O.items.length,typeof p.settings.maxOptions=="number"&&(o=Math.min(o,p.settings.maxOptions)),o>0&&(D=!0);let ee=(S,x)=>{let b=f[S];if(b!==void 0){let C=v[b];if(C!==void 0)return[b,C.fragment]}let N=document.createDocumentFragment();return b=v.length,v.push({fragment:N,order:x,optgroup:S}),[b,N]};for(t=0;t<o;t++){let S=O.items[t];if(!S)continue;let x=S.id,b=p.options[x];if(b===void 0)continue;let N=ze(x),C=p.getOption(N,!0);for(p.settings.hideSelected||C.classList.toggle("selected",p.items.includes(N)),s=b[p.settings.optgroupField]||"",a=Array.isArray(s)?s:[s],i=0,r=a&&a.length;i<r;i++){s=a[i];let oe=b.$order,z=p.optgroups[s];z===void 0?s="":oe=z.$order;let[le,_e]=ee(s,oe);i>0&&(C=C.cloneNode(!0),L(C,{id:b.$id+"-clone-"+i,"aria-selected":null}),C.classList.add("ts-cloned"),fe(C,"active"),p.activeOption&&p.activeOption.dataset.value==x&&d&&d.dataset.group===s.toString()&&(m=C)),_e.appendChild(C),s!=""&&(f[s]=le)}}p.settings.lockOptgroupOrder&&v.sort((S,x)=>S.order-x.order),l=document.createDocumentFragment(),K(v,S=>{let x=S.fragment,b=S.optgroup;if(!x||!x.children.length)return;let N=p.optgroups[b];if(N!==void 0){let C=document.createDocumentFragment(),oe=p.render("optgroup_header",N);ye(C,oe),ye(C,x);let z=p.render("optgroup",{group:N,options:C});ye(l,z)}else ye(l,x)}),k.innerHTML="",ye(k,l),p.settings.highlight&&(ei(k),O.query.length&&O.tokens.length&&K(O.tokens,S=>{Zn(k,S.regex)}));var Y=S=>{let x=p.render(S,{input:g});return x&&(D=!0,k.insertBefore(x,k.firstChild)),x};if(p.loading?Y("loading"):p.settings.shouldLoad.call(p,g)?O.items.length===0&&Y("no_results"):Y("not_loading"),c=p.canCreate(g),c&&(u=Y("option_create")),p.hasOptions=O.items.length>0||c,D){if(O.items.length>0){if(!m&&p.settings.mode==="single"&&p.items[0]!=null&&(m=p.getOption(p.items[0])),!k.contains(m)){let S=0;u&&!p.settings.addPrecedence&&(S=1),m=p.selectable()[S]}}else u&&(m=u);e&&!p.isOpen&&(p.open(),p.scrollToOption(m,"auto")),p.setActiveOption(m)}else p.clearActiveOption(),e&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e,t=!1){let i=this;if(Array.isArray(e))return i.addOptions(e,t),!1;let r=Z(e[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(e.$order=e.$order||++i.order,e.$id=i.inputId+"-opt-"+e.$order,i.options[r]=e,i.lastQuery=null,t&&(i.userOptions[r]=t,i.trigger("option_add",r,e)),r)}addOptions(e,t=!1){K(e,i=>{this.addOption(i,t)})}registerOption(e){return this.addOption(e)}registerOptionGroup(e){var t=Z(e[this.settings.optgroupValueField]);return t===null?!1:(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var i;t[this.settings.optgroupValueField]=e,(i=this.registerOptionGroup(t))&&this.trigger("optgroup_add",i,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){let i=this;var r,o;let s=Z(e),a=Z(t[i.settings.valueField]);if(s===null)return;let l=i.options[s];if(l==null)return;if(typeof a!="string")throw new Error("Value must be set in option data");let c=i.getOption(s),d=i.getItem(s);if(t.$order=t.$order||l.$order,delete i.options[s],i.uncacheValue(a),i.options[a]=t,c){if(i.dropdown_content.contains(c)){let u=i._render("option",t);Xe(c,u),i.activeOption===c&&i.setActiveOption(u)}c.remove()}d&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,a),r=i._render("item",t),d.classList.contains("active")&&W(r,"active"),Xe(d,r)),i.lastQuery=null}removeOption(e,t){let i=this;e=ze(e),i.uncacheValue(e),delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)}clearOptions(e){let t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};K(this.options,(r,o)=>{t(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(e,t){return this.items.indexOf(t)>=0}getOption(e,t=!1){let i=Z(e);if(i===null)return null;let r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(t)return this._render("option",r)}return null}getAdjacent(e,t,i="option"){var r=this,o;if(!e)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==e)return t>0?o[s+1]:o[s-1];return null}getItem(e){if(typeof e=="object")return e;var t=Z(e);return t!==null?this.control.querySelector(`[data-value="${Qt(t)}"]`):null}addItems(e,t){var i=this,r=Array.isArray(e)?e:[e];r=r.filter(s=>i.items.indexOf(s)===-1);let o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,t)})}addItem(e,t){var i=t?[]:["change","dropdown_close"];Wt(this,i,()=>{var r,o;let s=this,a=s.settings.mode,l=Z(e);if(!(l&&s.items.indexOf(l)!==-1&&(a==="single"&&s.close(),a==="single"||!s.settings.duplicates))&&!(l===null||!s.options.hasOwnProperty(l))&&(a==="single"&&s.clear(t),!(a==="multi"&&s.isFull()))){if(r=s._render("item",s.options[l]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,l),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let c=s.getOption(l),d=s.getAdjacent(c,1);d&&s.setActiveOption(d)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&a!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",l,r),s.isPending||s.updateOriginalInput({silent:t})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(e=null,t){let i=this;if(e=i.getItem(e),!e)return;var r,o;let s=e.dataset.value;r=en(e),e.remove(),e.classList.contains("active")&&(o=i.activeItems.indexOf(e),i.activeItems.splice(o,1),fe(e,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,t),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:t}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,e)}createItem(e=null,t=()=>{}){arguments.length===3&&(t=arguments[2]),typeof t!="function"&&(t=()=>{});var i=this,r=i.caretPos,o;if(e=e||i.inputValue(),!i.canCreate(e))return t(),!1;i.lock();var s=!1,a=l=>{if(i.unlock(),!l||typeof l!="object")return t();var c=Z(l[i.settings.valueField]);if(typeof c!="string")return t();i.setTextboxValue(),i.addOption(l,!0),i.setCaret(r),i.addItem(c),t(l),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,e,a):o={[i.settings.labelField]:e,[i.settings.valueField]:e},s||a(o),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){let e=this;e.refreshValidityState();let t=e.isFull(),i=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);let r=e.wrapper.classList;r.toggle("focus",e.isFocused),r.toggle("disabled",e.isDisabled),r.toggle("readonly",e.isReadOnly),r.toggle("required",e.isRequired),r.toggle("invalid",!e.isValid),r.toggle("locked",i),r.toggle("full",t),r.toggle("input-active",e.isFocused&&!e.isInputHidden),r.toggle("dropdown-active",e.isOpen),r.toggle("has-options",Jn(e.options)),r.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){let t=this;var i,r;let o=t.input.querySelector('option[value=""]');if(t.is_select_tag){let l=function(c,d,u){return c||(c=re('<option value="'+_t(d)+'">'+_t(u)+"</option>")),c!=o&&t.input.append(c),s.push(c),(c!=o||a>0)&&(c.selected=!0),c},s=[],a=t.input.querySelectorAll("option:checked").length;t.input.querySelectorAll("option:checked").forEach(c=>{c.selected=!1}),t.items.length==0&&t.settings.mode=="single"?l(o,"",""):t.items.forEach(c=>{if(i=t.options[c],r=i[t.settings.labelField]||"",s.includes(i.$option)){let d=t.input.querySelector(`option[value="${Qt(c)}"]:not(:checked)`);l(d,c,r)}else i.$option=l(i.$option,c,r)})}else t.input.value=t.getValue();t.isSetup&&(e.silent||t.trigger("change",t.getValue()))}open(){var e=this;e.isLocked||e.isOpen||e.settings.mode==="multi"&&e.isFull()||(e.isOpen=!0,L(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),Ue(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),Ue(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,i=t.isOpen;e&&(t.setTextboxValue(),t.settings.mode==="single"&&t.items.length&&t.inputState()),t.isOpen=!1,L(t.focus_node,{"aria-expanded":"false"}),Ue(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),i&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var e=this.control,t=e.getBoundingClientRect(),i=e.offsetHeight+t.top+window.scrollY,r=t.left+window.scrollX;Ue(this.dropdown,{width:t.width+"px",top:i+"px",left:r+"px"})}}clear(e){var t=this;if(t.items.length){var i=t.controlChildren();K(i,r=>{t.removeItem(r,!0)}),t.inputState(),e||t.updateOriginalInput(),t.trigger("clear")}}insertAtCaret(e){let t=this,i=t.caretPos,r=t.control;r.insertBefore(e,r.children[i]||null),t.setCaret(i+1)}deleteSelection(e){var t,i,r,o,s=this;t=e&&e.keyCode===8?-1:1,i=Un(s.control_input);let a=[];if(s.activeItems.length)o=Zt(s.activeItems,t),r=en(o),t>0&&r++,K(s.activeItems,l=>a.push(l));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){let l=s.controlChildren(),c;t<0&&i.start===0&&i.length===0?c=l[s.caretPos-1]:t>0&&i.start===s.inputValue().length&&(c=l[s.caretPos]),c!==void 0&&a.push(c)}if(!s.shouldDelete(a,e))return!1;for(M(e,!0),typeof r<"u"&&s.setCaret(r);a.length;)s.removeItem(a.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(e,t){let i=e.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,t)===!1)}advanceSelection(e,t){var i,r,o=this;o.rtl&&(e*=-1),!o.inputValue().length&&(be(We,t)||be("shiftKey",t)?(i=o.getLastActive(e),i?i.classList.contains("active")?r=o.getAdjacent(i,e,"item"):r=i:e>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(e))}moveCaret(e){}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var i=this.control.querySelectorAll(".active");if(i)return Zt(i,e)}setCaret(e){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(e=this.isReadOnly||this.isDisabled){this.isLocked=e,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(e){this.focus_node.tabIndex=e?-1:this.tabIndex,this.isDisabled=e,this.input.disabled=e,this.control_input.disabled=e,this.setLocked()}setReadOnly(e){this.isReadOnly=e,this.input.readOnly=e,this.control_input.readOnly=e,this.setLocked()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,fe(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}render(e,t){var i,r;let o=this;if(typeof this.settings.render[e]!="function"||(r=o.settings.render[e].call(this,t,_t),!r))return null;if(r=re(r),e==="option"||e==="option_create"?t[o.settings.disabledField]?L(r,{"aria-disabled":"true"}):L(r,{"data-selectable":""}):e==="optgroup"&&(i=t.group[o.settings.optgroupValueField],L(r,{"data-group":i}),t.group[o.settings.disabledField]&&L(r,{"data-disabled":""})),e==="option"||e==="item"){let s=ze(t[o.settings.valueField]);L(r,{"data-value":s}),e==="item"?(W(r,o.settings.itemClass),L(r,{"data-ts-item":""})):(W(r,o.settings.optionClass),L(r,{role:"option",id:t.$id}),t.$div=r,o.options[s]=t)}return r}_render(e,t){let i=this.render(e,t);if(i==null)throw"HTMLElement expected";return i}clearCache(){K(this.options,e=>{e.$div&&(e.$div.remove(),delete e.$div)})}uncacheValue(e){let t=this.getOption(e);t&&t.remove()}canCreate(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}hook(e,t,i){var r=this,o=r[t];r[t]=function(){var s,a;return e==="after"&&(s=o.apply(r,arguments)),a=i.apply(r,arguments),e==="instead"?a:(e==="before"&&(s=o.apply(r,arguments)),s)}}}});function ci(){qr(this.input,"change",()=>{this.sync()})}var qr,ui=I(()=>{qr=(n,e,t,i)=>{n.addEventListener(e,t,i)}});function fi(n){var e=this,t=e.onOptionSelect;e.settings.hideSelected=!1;let i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(a,l){l?(a.checked=!0,i.uncheckedClassNames&&a.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&a.classList.add(...i.checkedClassNames)):(a.checked=!1,i.checkedClassNames&&a.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&a.classList.add(...i.uncheckedClassNames))},o=function(a){setTimeout(()=>{var l=a.querySelector("input."+i.className);l instanceof HTMLInputElement&&r(l,a.classList.contains("selected"))},1)};e.hook("after","setupTemplates",()=>{var s=e.settings.render.option;e.settings.render.option=(a,l)=>{var c=Ur(s.call(e,a,l)),d=document.createElement("input");i.className&&d.classList.add(i.className),d.addEventListener("click",function(f){di(f)}),d.type="checkbox";let u=Gr(a[e.settings.valueField]);return r(d,!!(u&&e.items.indexOf(u)>-1)),c.prepend(d),c}}),e.on("item_remove",s=>{var a=e.getOption(s);a&&(a.classList.remove("selected"),o(a))}),e.on("item_add",s=>{var a=e.getOption(s);a&&o(a)}),e.hook("instead","onOptionSelect",(s,a)=>{if(a.classList.contains("selected")){a.classList.remove("selected"),e.removeItem(a.dataset.value),e.refreshOptions(),di(s,!0);return}t.call(e,s,a),o(a)})}var Gr,zr,di,Ur,Xr,pi=I(()=>{Gr=n=>typeof n>"u"||n===null?null:zr(n),zr=n=>typeof n=="boolean"?n?"1":"0":n+"",di=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},Ur=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Xr(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},Xr=n=>typeof n=="string"&&n.indexOf("<")>-1});function hi(n){let e=this,t=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);e.on("initialize",()=>{var i=Wr(t.html(t));i.addEventListener("click",r=>{e.isLocked||(e.clear(),e.settings.mode==="single"&&e.settings.allowEmptyOption&&e.addItem(""),r.preventDefault(),r.stopPropagation())}),e.control.appendChild(i)})}var Wr,Qr,gi=I(()=>{Wr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Qr(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},Qr=n=>typeof n=="string"&&n.indexOf("<")>-1});function mi(){var n=this;if(n.settings.mode!=="multi")return;var e=n.lock,t=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,a)=>{let l=eo(o.call(n,s,a));no(l,{draggable:"true"});let c=g=>{i||Jr(g),g.stopPropagation()},d=g=>{r=l,setTimeout(()=>{l.classList.add("ts-dragging")},0)},u=g=>{g.preventDefault(),l.classList.add("ts-drag-over"),v(l,r)},f=()=>{l.classList.remove("ts-drag-over")},v=(g,E)=>{E!==void 0&&(oo(E,l)?io(g,E):ro(g,E))},p=()=>{var g;document.querySelectorAll(".ts-drag-over").forEach(O=>O.classList.remove("ts-drag-over")),(g=r)==null||g.classList.remove("ts-dragging"),r=void 0;var E=[];n.control.querySelectorAll("[data-value]").forEach(O=>{if(O.dataset.value){let m=O.dataset.value;m&&E.push(m)}}),n.setValue(E)};return Ie(l,"mousedown",c),Ie(l,"dragstart",d),Ie(l,"dragenter",u),Ie(l,"dragover",u),Ie(l,"dragleave",f),Ie(l,"dragend",p),l}}),n.hook("instead","lock",()=>(i=!1,e.call(n))),n.hook("instead","unlock",()=>(i=!0,t.call(n)))}var Jr,Ie,Zr,eo,to,no,io,ro,oo,vi=I(()=>{Jr=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},Ie=(n,e,t,i)=>{n.addEventListener(e,t,i)},Zr=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},eo=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(to(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},to=n=>typeof n=="string"&&n.indexOf("<")>-1,no=(n,e)=>{Zr(e,(t,i)=>{t==null?n.removeAttribute(i):n.setAttribute(i,""+t)})},io=(n,e)=>{var t;(t=n.parentNode)==null||t.insertBefore(e,n.nextSibling)},ro=(n,e)=>{var t;(t=n.parentNode)==null||t.insertBefore(e,n)},oo=(n,e)=>{do{var t;if(e=(t=e)==null?void 0:t.previousElementSibling,n==e)return!0}while(e&&e.previousElementSibling);return!1}});function bi(n){let e=this,t=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);e.on("initialize",()=>{var i=ao(t.html(t)),r=i.querySelector("."+t.closeClass);r&&r.addEventListener("click",o=>{so(o,!0),e.close()}),e.dropdown.insertBefore(i,e.dropdown.firstChild)})}var so,ao,lo,yi=I(()=>{so=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},ao=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(lo(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},lo=n=>typeof n=="string"&&n.indexOf("<")>-1});function _i(){var n=this;n.hook("instead","setCaret",e=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?e=n.items.length:(e=Math.max(0,Math.min(n.items.length,e)),e!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((t,i)=>{i<e?n.control_input.insertAdjacentElement("beforebegin",t):n.control.appendChild(t)})),n.caretPos=e}),n.hook("instead","moveCaret",e=>{if(!n.isFocused)return;let t=n.getLastActive(e);if(t){let i=ho(t);n.setCaret(e>0?i+1:i),n.setActiveItem(),uo(t,"last-active")}else n.setCaret(n.caretPos+e)})}var co,uo,fo,po,ho,wi=I(()=>{co=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},uo=(n,...e)=>{var t=fo(e);n=po(n),n.map(i=>{t.map(r=>{i.classList.remove(r)})})},fo=n=>{var e=[];return co(n,t=>{typeof t=="string"&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},po=n=>(Array.isArray(n)||(n=[n]),n),ho=(n,e)=>{if(!n)return-1;e=e||n.nodeName;for(var t=0;n=n.previousElementSibling;)n.matches(e)&&t++;return t}});function Ei(){let n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,yo(n.control_input,"dropdown-input");let e=Si('<div class="dropdown-input-wrap">');e.append(n.control_input),n.dropdown.insertBefore(e,n.dropdown.firstChild);let t=Si('<input class="items-placeholder" tabindex="-1" />');t.placeholder=n.settings.placeholder||"",n.control.append(t)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",t=>{switch(t.keyCode){case 27:n.isOpen&&(go(t,!0),n.close()),n.clearActiveItems();return;case 9:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,t)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});let e=n.onBlur;n.hook("instead","onBlur",t=>{if(!(t&&t.relatedTarget==n.control_input))return e.call(n)}),mo(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}var go,mo,vo,Si,bo,yo,_o,wo,Oi=I(()=>{go=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},mo=(n,e,t,i)=>{n.addEventListener(e,t,i)},vo=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},Si=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(bo(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},bo=n=>typeof n=="string"&&n.indexOf("<")>-1,yo=(n,...e)=>{var t=_o(e);n=wo(n),n.map(i=>{t.map(r=>{i.classList.add(r)})})},_o=n=>{var e=[];return vo(n,t=>{typeof t=="string"&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},wo=n=>(Array.isArray(n)||(n=[n]),n)});function Ci(){var n=this;n.on("initialize",()=>{var e=document.createElement("span"),t=n.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(e);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(let o of i)e.style[o]=t.style[o];var r=()=>{e.textContent=t.value,t.style.width=e.clientWidth+"px"};r(),n.on("update item_add item_remove",r),xt(t,"input",r),xt(t,"keyup",r),xt(t,"blur",r),xt(t,"update",r)})}var xt,xi=I(()=>{xt=(n,e,t,i)=>{n.addEventListener(e,t,i)}});function Ai(){var n=this,e=n.deleteSelection;this.hook("instead","deleteSelection",t=>n.activeItems.length?e.call(n,t):!1)}var Di=I(()=>{});function Ti(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}var Ii=I(()=>{});function Li(){var n=this,e=n.onKeyDown;n.hook("instead","onKeyDown",t=>{var i,r,o,s;if(!n.isOpen||!(t.keyCode===37||t.keyCode===39))return e.call(n,t);n.ignoreHover=!0,s=So(n.activeOption,"[data-group]"),i=Eo(n.activeOption,"[data-selectable]"),s&&(t.keyCode===37?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}var So,Eo,ki=I(()=>{So=(n,e,t)=>{for(;n&&n.matches;){if(n.matches(e))return n;n=n.parentNode}},Eo=(n,e)=>{if(!n)return-1;e=e||n.nodeName;for(var t=0;n=n.previousElementSibling;)n.matches(e)&&t++;return t}});function Ni(n){let e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var t=this;if(e.append){var i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+Oo(e.title)+'">'+e.label+"</a>";t.hook("after","setupTemplates",()=>{var r=t.settings.render.item;t.settings.render.item=(o,s)=>{var a=Mi(r.call(t,o,s)),l=Mi(i);return a.appendChild(l),Fi(l,"mousedown",c=>{Pi(c,!0)}),Fi(l,"click",c=>{t.isLocked||(Pi(c,!0),!t.isLocked&&t.shouldDelete([a],c)&&(t.removeItem(a),t.refreshOptions(!1),t.inputState()))}),a}})}}var Oo,Pi,Fi,Mi,Co,Ri=I(()=>{Oo=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Pi=(n,e=!1)=>{n&&(n.preventDefault(),e&&n.stopPropagation())},Fi=(n,e,t,i)=>{n.addEventListener(e,t,i)},Mi=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Co(n)){var e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}return document.querySelector(n)},Co=n=>typeof n=="string"&&n.indexOf("<")>-1});function Hi(n){let e=this,t=Object.assign({text:i=>i[e.settings.labelField]},n);e.on("item_remove",function(i){if(e.isFocused&&e.control_input.value.trim()===""){var r=e.options[i];r&&e.setTextboxValue(t.text.call(e,r))}})}var Bi=I(()=>{});function Ki(){let n=this,e=n.canLoad,t=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,a,l=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var f=n.selectable(),v=Array.from(f).indexOf(n.activeOption);if(v>=f.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];let c=u=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(u in r&&r[u]),d=(u,f)=>n.items.indexOf(f)>=0||l.indexOf(f)>=0;n.setNextUrl=(u,f)=>{r[u]=f},n.getUrl=u=>{if(u in r){let f=r[u];return r[u]=!1,f}return n.clearPagination(),n.settings.firstUrl.call(n,u)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return t.call(n)}),n.hook("instead","canLoad",u=>u in r?c(u):e.call(n,u)),n.hook("instead","loadCallback",(u,f)=>{if(!s)n.clearOptions(d);else if(a){let v=u[0];v!==void 0&&(a.dataset.value=v[n.settings.valueField])}i.call(n,u,f),s=!1}),n.hook("after","refreshOptions",()=>{let u=n.lastValue;var f;c(u)?(f=n.render("loading_more",{query:u}),f&&(f.setAttribute("data-selectable",""),a=f)):u in r&&!o.querySelector(".no-results")&&(f=n.render("no_more_results",{query:u})),f&&(Ao(f,n.settings.optionClass),o.append(f))}),n.on("initialize",()=>{l=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&c(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}var xo,Ao,Do,To,$i=I(()=>{xo=(n,e)=>{if(Array.isArray(n))n.forEach(e);else for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},Ao=(n,...e)=>{var t=Do(e);n=To(n),n.map(i=>{t.map(r=>{i.classList.add(r)})})},Do=n=>{var e=[];return xo(n,t=>{typeof t=="string"&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},To=n=>(Array.isArray(n)||(n=[n]),n)});var Yi,Vi=I(()=>{li();ui();pi();gi();vi();yi();wi();Oi();xi();Di();Ii();ki();Ri();Bi();$i();$.define("change_listener",ci);$.define("checkbox_options",fi);$.define("clear_button",hi);$.define("drag_drop",mi);$.define("dropdown_header",bi);$.define("caret_position",_i);$.define("dropdown_input",Ei);$.define("input_autogrow",Ci);$.define("no_backspace_delete",Ai);$.define("no_active_items",Ti);$.define("optgroup_columns",Li);$.define("remove_button",Ni);$.define("restore_on_backspace",Hi);$.define("virtual_scroll",Ki);Yi=$});var Qe,ji=I(()=>{Tn();In();Vi();Qe=class n{constructor(e=".rs-util-settings-form"){typeof e=="object"?this.form=e:this.form=document.querySelector(e),this.form.settingsPage=this,n.listen("change",".rs-util-settings-form",this.enableSaveButton.bind(this)),n.listen("change","[data-controls]",t=>this.showTogglableControls(t)),n.listen("click",'[data-action="save-rs-util-page"]',()=>this.save()),n.listen("click",".rs-util-settings-page__tab-toggle",t=>this.clickTab(t)),n.listen("click",".rs-util-settings-field-row-ordering",t=>this.clickReorderButton(t)),n.listen("click",".rs-util-settings-page [data-action]",t=>this.handleAction(t)),n.listen("submit",".rs-util-settings-form",this.onSubmit.bind(this)),n.listen("click",".rs-util-settings-form [data-on-click-event]",this.onClick.bind(this)),window.addEventListener("popstate",this.onPopState),this.init()}init(){this.form.querySelectorAll("[data-toggled-by]").forEach(a=>{let l=this.form.querySelector(`#${a.dataset.toggledBy}`);l&&this.showTogglableControls(l)}),this.form.querySelectorAll("[data-toggles-group]").forEach(a=>{let l;if(a.dataset.togglesGroup==="self"){l=a.closest(".rs-util-settings-field-group");let c=a.closest(".rs-util-settings-field-row"),d=l.children[0],u=l.children[1];u.setAttribute("aria-hidden",a.checked?"false":"true"),u.setAttribute("data-toggled-by",a.id),d.append(c)}else l=this.form.querySelector(`#${a.dataset.togglesGroup}`),l&&(l.setAttribute("aria-hidden",a.checked?"false":"true"),l.setAttribute("data-toggled-by",a.id));a.setAttribute("aria-expanded",a.checked?"true":"false"),a.setAttribute("aria-controls",l?.id??""),a.setAttribute("data-controls",`#${l?.id??""}`)}),this.form.querySelectorAll("[data-ordered]").forEach((a,l)=>{let c=a.querySelector("input[data-ordering-field]");if(!(c?.value??!1))return;a.currentOrder=c.value||l+1;let d=document.createElement("div");d.classList.add("rs-util-settings-field-row-order-controls"),a.append(d);let u=document.createElement("button");u.type="button",u.textContent="Move field up",u.setAttribute("data-action","move-up"),u.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--up"),d.append(u);let f=document.createElement("button");f.type="button",f.textContent="Move field down",f.setAttribute("data-action","move-down"),f.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--down"),d.append(f);let v=document.createElement("button");v.type="button",v.textContent="Drag to reorder",v.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--grabber"),d.append(v),a.parentElement.dataset.orderingGroup=a.dataset.ordered}),this.form.querySelectorAll("[data-ordered]").forEach(a=>{[...a.children].sort((l,c)=>l.currentOrder-c.currentOrder).forEach(l=>a.appendChild(l)),this.makeSortable(a,{handle:".rs-util-settings-field-row-ordering--grabber",onSort:()=>this.updateSortingIds(a)})}),this.form.querySelectorAll('[data-sortable="list"]').forEach(a=>{let l=a.parentElement;this.makeSortable(l,{canCreate:!0,onSort:()=>this.updateListValues(l)})}),document.querySelectorAll("[data-use-tom-select]").forEach(this.makeSelectable.bind(this));let s=new URL(window.location.href);s.hash&&n.switchTab(s.hash.substring(1),this.form),document.dispatchEvent(new CustomEvent("rs-util-settings-page-ready",{detail:this}))}handleAction(e){switch(e.dataset.action){case"remove-item":this.removeListItem(e.closest(".rs-util-settings-sortable-list-item")),this.enableSaveButton();break}}save(){this.onSubmit()}addMessage(e,t="info"){let i=this.form.querySelector(".rs-util-settings-form-messages"),r=document.createElement("p");r.classList.add(`is-state-${t}`),r.textContent=e,i.append(r)}clearMessages(){let e=this.form.querySelector(".rs-util-settings-form-messages");e.innerHTML=""}onClick(e){document.dispatchEvent(new CustomEvent(e.dataset.onClickEvent,{detail:e.closest("[data-on-click-event]")}))}onSubmit(){this.setState("saving");let e=new FormData(this.form),t=new URLSearchParams(e);fetch(this.form.action,{method:"POST",body:t}).then(i=>i.text()).then(i=>{let r=new URL(window.location.href).hash,o=document.createElement("html");o.innerHTML=i;let s=o.querySelector("form.rs-util-settings-form");this.form.replaceWith(s),this.form=s,this.init(),this.setState("saved"),this.addMessage("Settings saved successfully.","success")}).catch(i=>{console.error(i),this.setState("error"),this.openDialog({title:"Error on save",body:"There was an error saving your settings. More details are in the developer console."})}).finally(()=>{window.scrollTo({top:0,behavior:"smooth"})})}setState(e=null){this.form.classList.entries().forEach(t=>{t[1].substring(0,8)==="is-state"&&this.form.classList.remove(t[1])}),e&&this.form.classList.add(`is-state-${e}`)}clickTab(e){history.pushState(null,null,`#${e.dataset.section}`),n.switchTab(e.dataset.section,this.form)}clickReorderButton(e){let t=e.closest(".rs-util-settings-field-row");if(!t.querySelector("input[data-ordering-field]"))return;let r=e.dataset.action==="move-up"?t.previousElementSibling:t.nextElementSibling;r&&(e.dataset.action==="move-up"?t.insertAdjacentElement("afterend",r):t.insertAdjacentElement("beforebegin",r),this.enableSaveButton(),this.updateSortingIds(t.closest('[data-sortable="list"]')))}updateSortingIds(e){e.querySelectorAll(".rs-util-settings-field-row").forEach((i,r)=>{i.querySelector("input[data-ordering-field]").value=r+1,i.currentOrder=r+1})}showTogglableControls(e){let t=this.form.querySelectorAll(`[data-toggled-by="${e.id}"]`);t.forEach(i=>{i.setAttribute("aria-hidden",e.checked??(e.value||!1)?"false":"true")}),t.length&&(e.setAttribute("aria-expanded",e.checked??(e.value||!1)?"true":"false"),e.setAttribute("aria-controls",`[data-toggled-by="${e.id}"]`),e.setAttribute("data-controls",`[data-toggled-by="${e.id}"]`))}onPopState(){let t=new URL(window.location.href).hash.replace("#","");n.switchTab(t,this.form)}enableSaveButton(){this.setState(null),document.querySelector(".rs-util-settings-page .rs-util-settings-page__submit").disabled=!1}static switchTab(e,t){e||(e=t.querySelector(".rs-util-settings-section[data-section]").dataset.section),document.querySelectorAll(".rs-util-settings-page__tab-toggle").forEach(r=>{r.setAttribute("aria-expanded",r.dataset.section===e?"true":"false"),t.querySelector(`.rs-util-settings-section[data-section="${r.dataset.section}"]`).setAttribute("aria-hidden",r.dataset.section===e?"false":"true")})}static listen(e,t,i){document.addEventListener(e,r=>{let o=r.target.closest(t);o&&(r.preventDefault(),i(o,r))})}makeSelectable(e,t={}){let i=(o,s,...a)=>(document.dispatchEvent(new CustomEvent(`rs-util-select-${o}`,{detail:{el:s,args:a}})),!0),r={onChange:(...o)=>i("change",e,...o),onItemAdd:(...o)=>i("item-add",e,...o),onItemRemove:(...o)=>i("item-remove",e,...o),onOptionAdd:(...o)=>i("option-add",e,...o),onOptionRemove:(...o)=>i("option-remove",e,...o),onDropdownOpen:(...o)=>i("open",e,...o),onDropdownClose:(...o)=>i("close",e,...o),onFocus:(...o)=>i("focus",e,...o),onBlur:(...o)=>i("blur",e,...o),onInitialize:(...o)=>i("initialize",e,...o),...t};if(e.dataset.source){let o=JSON.parse(e.dataset.source),s=o.value.split("."),a=o.label.split(".");r.load=(l,c)=>{let d=o.url.replace("@query",encodeURIComponent(l));fetch(d).then(u=>u.json()).then(u=>{let f=[];e.currentResults??={},u.forEach(v=>{let p=v;s.forEach(E=>{p=p[E]});let g=v;a.forEach(E=>{g=g[E]}),f.push({value:p,label:g}),e.currentResults[p]=g}),c(f)}).catch(u=>console.error(u))},r.valueField="value",r.labelField="label",r.searchField="label"}if(e.dataset.useTomSelect!=="true")try{let o=JSON.parse(e.dataset.tomSelectArgs??"{}");o&&Object.keys(o).forEach(s=>{r[s]=o[s]})}catch{}e.tom=new Yi(e,r)}makeSortable(e,t={}){let i=e.querySelector('[data-sortable="list"]')||e;if(Dn.create(i,{animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",handle:".rs-util-settings-draggable-handle",...t}),t.canCreate??!1){let r=e.querySelectorAll('[data-sortable="item-fields"] input, [data-sortable="item-fields"] select'),o=e.querySelector('[data-action="add-item"]');r&&o&&o.addEventListener("click",s=>{let a={};r.forEach(c=>{a[c.dataset.key]=["checkbox","radio"].includes(c.type)?c.checked:c.value,c.value=""});let l=this.makeListItemLabel(a,r,i.dataset.label);this.addListItem(e,a,l)})}}makeListItemLabel(e,t,i="{value}"){let r=i+"";return t.forEach(o=>{let s=e[o.dataset.key]??"";if(o.tagName==="SELECT"){let a=o.options[o.selectedIndex].innerHTML,l=o.options[o.selectedIndex].value;r=r.replace(`{${o.dataset.key}:label}`,a),r=r.replace(`{${o.dataset.key}:label}`,l)}r=r.replace(`{${o.dataset.key}}`,s)}),r}addListItem=(e,t,i)=>{let r=(e.querySelector('input[type="hidden"]').value?JSON.parse(e.querySelector('input[type="hidden"]').value):null)||[];r.push(t),e.querySelector('input[type="hidden"]').value=JSON.stringify(r);let o=document.createElement("div");o.classList.add("rs-util-settings-sortable-list-item"),o.dataset.value=t,o.innerHTML=`
			<span class="rs-util-settings-draggable-handle"></span>
			<span>${i}</span>
			<button type="button" class="rs-util-settings-trash-btn" data-action="remove-item">Remove Item</button>
		`,o.dataset.value=JSON.stringify(t),e.querySelector(".rs-util-settings-sortable-list").append(o),this.enableSaveButton()};removeListItem=e=>{let t=e.closest(".rs-util-settings-field-value");e.remove(),this.updateListValues(t),this.enableSaveButton()};updateListValues(e){let t=e.querySelector('input[type="hidden"]'),i=e.querySelector(".rs-util-settings-sortable-list"),r=[];i.querySelectorAll(".rs-util-settings-sortable-list-item").forEach((o,s)=>{r.push(JSON.parse(o.dataset.value)),o.dataset.order=s}),t.value=JSON.stringify(r),this.enableSaveButton()}openDialog(e){new Ye(e).open()}}});var Io=Ui(()=>{ji();function qi(){document.querySelector(".rs-util-settings-form")&&(window.rsUtil_SettingsPage=new Qe)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",qi):qi()});Io();})();
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
//# sourceMappingURL=rs-settings-page.min.js.map
