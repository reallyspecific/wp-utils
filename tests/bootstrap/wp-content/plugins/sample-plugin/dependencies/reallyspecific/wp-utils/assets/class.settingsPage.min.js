(()=>{function tn(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function st(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tn(Object(e),!0).forEach(function(i){pi(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):tn(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ee(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ee=function(t){return typeof t}:ee=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(n)}function pi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ct(){return ct=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ct.apply(this,arguments)}function hi(n,t){if(n==null)return{};var e={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function gi(n,t){if(n==null)return{};var e=hi(n,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}var mi="1.15.6";function lt(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var ut=lt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Bt=lt(/Edge/i),en=lt(/firefox/i),Ft=lt(/safari/i)&&!lt(/chrome/i)&&!lt(/android/i),Ne=lt(/iP(ad|od|hone)/i),un=lt(/chrome/i)&&lt(/android/i),dn={capture:!1,passive:!1};function T(n,t,e){n.addEventListener(t,e,!ut&&dn)}function x(n,t,e){n.removeEventListener(t,e,!ut&&dn)}function se(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function fn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function nt(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&se(n,t):se(n,t))||i&&n===e)return n;if(n===e)break}while(n=fn(n))}return null}var nn=/\s+/g;function W(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(nn," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(nn," ")}}function y(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function xt(n,t){var e="";if(typeof n=="string")e=n;else do{var i=y(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function pn(n,t,e){if(n){var i=n.getElementsByTagName(t),r=0,o=i.length;if(e)for(;r<o;r++)e(i[r],r);return i}return[]}function ot(){var n=document.scrollingElement;return n||document.documentElement}function H(n,t,e,i,r){if(!(!n.getBoundingClientRect&&n!==window)){var o,s,a,l,c,d,u;if(n!==window&&n.parentNode&&n!==ot()?(o=n.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,d=o.height,u=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||e)&&n!==window&&(r=r||n.parentNode,!ut))do if(r&&r.getBoundingClientRect&&(y(r,"transform")!=="none"||e&&y(r,"position")!=="static")){var f=r.getBoundingClientRect();s-=f.top+parseInt(y(r,"border-top-width")),a-=f.left+parseInt(y(r,"border-left-width")),l=s+o.height,c=a+o.width;break}while(r=r.parentNode);if(i&&n!==window){var v=xt(r||n),p=v&&v.a,g=v&&v.d;v&&(s/=g,a/=p,u/=p,d/=g,l=s+d,c=a+u)}return{top:s,left:a,bottom:l,right:c,width:u,height:d}}}function rn(n,t,e){for(var i=gt(n,!0),r=H(n)[t];i;){var o=H(i)[e],s=void 0;if(e==="top"||e==="left"?s=r>=o:s=r<=o,!s)return i;if(i===ot())break;i=gt(i,!1)}return!1}function Dt(n,t,e,i){for(var r=0,o=0,s=n.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==_.ghost&&(i||s[o]!==_.dragged)&&nt(s[o],e.draggable,n,!1)){if(r===t)return s[o];r++}o++}return null}function Re(n,t){for(var e=n.lastElementChild;e&&(e===_.ghost||y(e,"display")==="none"||t&&!se(e,t));)e=e.previousElementSibling;return e||null}function tt(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==_.clone&&(!t||se(n,t))&&e++;return e}function on(n){var t=0,e=0,i=ot();if(n)do{var r=xt(n),o=r.a,s=r.d;t+=n.scrollLeft*o,e+=n.scrollTop*s}while(n!==i&&(n=n.parentNode));return[t,e]}function vi(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function gt(n,t){if(!n||!n.getBoundingClientRect)return ot();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=y(e);if(e.clientWidth<e.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return ot();if(i||t)return e;i=!0}}while(e=e.parentNode);return ot()}function bi(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ee(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var Mt;function hn(n,t){return function(){if(!Mt){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),Mt=setTimeout(function(){Mt=void 0},t)}}}function yi(){clearTimeout(Mt),Mt=void 0}function gn(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function mn(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function vn(n,t,e){var i={};return Array.from(n.children).forEach(function(r){var o,s,a,l;if(!(!nt(r,t.draggable,n,!1)||r.animated||r===e)){var c=H(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,c.left),i.top=Math.min((s=i.top)!==null&&s!==void 0?s:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var U="Sortable"+new Date().getTime();function _i(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(y(r,"display")==="none"||r===_.ghost)){n.push({target:r,rect:H(r)});var o=st({},n[n.length-1].rect);if(r.thisAnimationDuration){var s=xt(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(vi(n,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var o=!1,s=0;n.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=H(c),f=c.prevFromRect,v=c.prevToRect,p=a.rect,g=xt(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&Ee(f,u)&&!Ee(d,u)&&(p.top-u.top)/(p.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Si(p,f,v,r.options)),Ee(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=r.options.animation),r.animate(c,p,u,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof i=="function"&&i()},s):typeof i=="function"&&i(),n=[]},animate:function(i,r,o,s){if(s){y(i,"transition",""),y(i,"transform","");var a=xt(this.el),l=a&&a.a,c=a&&a.d,d=(r.left-o.left)/(l||1),u=(r.top-o.top)/(c||1);i.animatingX=!!d,i.animatingY=!!u,y(i,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=wi(i),y(i,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),y(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){y(i,"transition",""),y(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},s)}}}}function wi(n){return n.offsetWidth}function Si(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}var Et=[],Oe={initializeByDefault:!0},Kt={mount:function(t){for(var e in Oe)Oe.hasOwnProperty(e)&&!(e in t)&&(t[e]=Oe[e]);Et.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Et.push(t)},pluginEvent:function(t,e,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=t+"Global";Et.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](st({sortable:e},i)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](st({sortable:e},i)))})},initializePlugins:function(t,e,i,r){Et.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,ct(i,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var i={};return Et.forEach(function(r){typeof r.eventProperties=="function"&&ct(i,r.eventProperties.call(e[r.pluginName],t))}),i},modifyOption:function(t,e,i){var r;return Et.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(r=o.optionListeners[e].call(t[o.pluginName],i))}),r}};function Ei(n){var t=n.sortable,e=n.rootEl,i=n.name,r=n.targetEl,o=n.cloneEl,s=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,d=n.oldDraggableIndex,u=n.newDraggableIndex,f=n.originalEvent,v=n.putSortable,p=n.extraEventProperties;if(t=t||e&&e[U],!!t){var g,E=t.options,O="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!ut&&!Bt?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=s||e,g.from=a||e,g.item=r||e,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=f,g.pullMode=v?v.lastPutMode:void 0;var m=st(st({},p),Kt.getEventProperties(i,t));for(var D in m)g[D]=m[D];e&&e.dispatchEvent(g),E[O]&&E[O].call(t,g)}}var Oi=["evt"],q=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=gi(i,Oi);Kt.pluginEvent.bind(_)(t,e,st({dragEl:h,parentEl:N,ghostEl:w,rootEl:P,nextEl:St,lastDownEl:ne,cloneEl:k,cloneHidden:ht,dragStarted:Lt,putSortable:Y,activeSortable:_.active,originalEvent:r,oldIndex:At,oldDraggableIndex:Nt,newIndex:Q,newDraggableIndex:pt,hideGhostForTarget:wn,unhideGhostForTarget:Sn,cloneNowHidden:function(){ht=!0},cloneNowShown:function(){ht=!1},dispatchSortableEvent:function(a){G({sortable:e,name:a,originalEvent:r})}},o))};function G(n){Ei(st({putSortable:Y,cloneEl:k,targetEl:h,rootEl:P,oldIndex:At,oldDraggableIndex:Nt,newIndex:Q,newDraggableIndex:pt},n))}var h,N,w,P,St,ne,k,ht,At,Q,Nt,pt,Qt,Y,Ct=!1,ae=!1,le=[],_t,et,Ce,Ae,sn,an,Lt,Ot,Rt,Ht=!1,Jt=!1,ie,V,xe=[],Pe=!1,ce=[],de=typeof document<"u",Zt=Ne,ln=Bt||ut?"cssFloat":"float",Ci=de&&!un&&!Ne&&"draggable"in document.createElement("div"),bn=function(){if(de){if(ut)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),yn=function(t,e){var i=y(t),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=Dt(t,0,e),s=Dt(t,1,e),a=o&&y(o),l=s&&y(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+H(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+H(s).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&i[ln]==="none"||s&&i[ln]==="none"&&c+d>r)?"vertical":"horizontal"},Ai=function(t,e,i){var r=i?t.left:t.top,o=i?t.right:t.bottom,s=i?t.width:t.height,a=i?e.left:e.top,l=i?e.right:e.bottom,c=i?e.width:e.height;return r===a||o===l||r+s/2===a+c/2},xi=function(t,e){var i;return le.some(function(r){var o=r[U].options.emptyInsertThreshold;if(!(!o||Re(r))){var s=H(r),a=t>=s.left-o&&t<=s.right+o,l=e>=s.top-o&&e<=s.bottom+o;if(a&&l)return i=r}}),i},_n=function(t){function e(o,s){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||u))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(a,l,c,d),s)(a,l,c,d);var f=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var i={},r=t.group;(!r||ee(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=e(r.pull,!0),i.checkPut=e(r.put),i.revertClone=r.revertClone,t.group=i},wn=function(){!bn&&w&&y(w,"display","none")},Sn=function(){!bn&&w&&y(w,"display","")};de&&!un&&document.addEventListener("click",function(n){if(ae)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ae=!1,!1},!0);var wt=function(t){if(h){t=t.touches?t.touches[0]:t;var e=xi(t.clientX,t.clientY);if(e){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[U]._onDragOver(i)}}},Di=function(t){h&&h.parentNode[U]._isOutsideThisEl(t.target)};function _(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=ct({},t),n[U]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yn(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_.supportPointer!==!1&&"PointerEvent"in window&&(!Ft||Ne),emptyInsertThreshold:5};Kt.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);_n(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Ci,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?T(n,"pointerdown",this._onTapStart):(T(n,"mousedown",this._onTapStart),T(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(n,"dragover",this),T(n,"dragenter",this)),le.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ct(this,_i())}_.prototype={constructor:_,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ot=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,h):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,r=this.options,o=r.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=r.filter;if(Ni(i),!h&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ft&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=nt(l,r.draggable,i,!1),!(l&&l.animated)&&ne!==l)){if(At=tt(l),Nt=tt(l,r.draggable),typeof d=="function"){if(d.call(this,t,l,this)){G({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),q("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=nt(c,u.trim(),i,!1),u)return G({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),q("filter",e,{evt:t}),!0}),d)){o&&t.preventDefault();return}r.handle&&!nt(c,r.handle,i,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,i){var r=this,o=r.el,s=r.options,a=o.ownerDocument,l;if(i&&!h&&i.parentNode===o){var c=H(i);if(P=o,h=i,N=h.parentNode,St=h.nextSibling,ne=i,Qt=s.group,_.dragged=h,_t={target:h,clientX:(e||t).clientX,clientY:(e||t).clientY},sn=_t.clientX-c.left,an=_t.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,h.style["will-change"]="all",l=function(){if(q("delayEnded",r,{evt:t}),_.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!en&&r.nativeDraggable&&(h.draggable=!0),r._triggerDragStart(t,e),G({sortable:r,name:"choose",originalEvent:t}),W(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(d){pn(h,d.trim(),De)}),T(a,"dragover",wt),T(a,"mousemove",wt),T(a,"touchmove",wt),s.supportPointer?(T(a,"pointerup",r._onDrop),!this.nativeDraggable&&T(a,"pointercancel",r._onDrop)):(T(a,"mouseup",r._onDrop),T(a,"touchend",r._onDrop),T(a,"touchcancel",r._onDrop)),en&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),q("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Bt||ut))){if(_.eventCanceled){this._onDrop();return}s.supportPointer?(T(a,"pointerup",r._disableDelayedDrag),T(a,"pointercancel",r._disableDelayedDrag)):(T(a,"mouseup",r._disableDelayedDrag),T(a,"touchend",r._disableDelayedDrag),T(a,"touchcancel",r._disableDelayedDrag)),T(a,"mousemove",r._delayedDragTouchMoveHandler),T(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&T(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&De(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._disableDelayedDrag),x(t,"touchend",this._disableDelayedDrag),x(t,"touchcancel",this._disableDelayedDrag),x(t,"pointerup",this._disableDelayedDrag),x(t,"pointercancel",this._disableDelayedDrag),x(t,"mousemove",this._delayedDragTouchMoveHandler),x(t,"touchmove",this._delayedDragTouchMoveHandler),x(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):e?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(h,"dragend",this),T(P,"dragstart",this._onDragStart));try{document.selection?re(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Ct=!1,P&&h){q("dragStarted",this,{evt:e}),this.nativeDraggable&&T(document,"dragover",Di);var i=this.options;!t&&W(h,i.dragClass,!1),W(h,i.ghostClass,!0),_.active=this,t&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(et){this._lastX=et.clientX,this._lastY=et.clientY,wn();for(var t=document.elementFromPoint(et.clientX,et.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(et.clientX,et.clientY),t!==e);)e=t;if(h.parentNode[U]._isOutsideThisEl(t),e)do{if(e[U]){var i=void 0;if(i=e[U]._onDragOver({clientX:et.clientX,clientY:et.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=fn(e));Sn()}},_onTouchMove:function(t){if(_t){var e=this.options,i=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=w&&xt(w,!0),a=w&&s&&s.a,l=w&&s&&s.d,c=Zt&&V&&on(V),d=(o.clientX-_t.clientX+r.x)/(a||1)+(c?c[0]-xe[0]:0)/(a||1),u=(o.clientY-_t.clientY+r.y)/(l||1)+(c?c[1]-xe[1]:0)/(l||1);if(!_.active&&!Ct){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(w){s?(s.e+=d-(Ce||0),s.f+=u-(Ae||0)):s={a:1,b:0,c:0,d:1,e:d,f:u};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");y(w,"webkitTransform",f),y(w,"mozTransform",f),y(w,"msTransform",f),y(w,"transform",f),Ce=d,Ae=u,et=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!w){var t=this.options.fallbackOnBody?document.body:P,e=H(h,!0,Zt,!0,t),i=this.options;if(Zt){for(V=t;y(V,"position")==="static"&&y(V,"transform")==="none"&&V!==document;)V=V.parentNode;V!==document.body&&V!==document.documentElement?(V===document&&(V=ot()),e.top+=V.scrollTop,e.left+=V.scrollLeft):V=ot(),xe=on(V)}w=h.cloneNode(!0),W(w,i.ghostClass,!1),W(w,i.fallbackClass,!0),W(w,i.dragClass,!0),y(w,"transition",""),y(w,"transform",""),y(w,"box-sizing","border-box"),y(w,"margin",0),y(w,"top",e.top),y(w,"left",e.left),y(w,"width",e.width),y(w,"height",e.height),y(w,"opacity","0.8"),y(w,"position",Zt?"absolute":"fixed"),y(w,"zIndex","100000"),y(w,"pointerEvents","none"),_.ghost=w,t.appendChild(w),y(w,"transform-origin",sn/parseInt(w.style.width)*100+"% "+an/parseInt(w.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,r=t.dataTransfer,o=i.options;if(q("dragStart",this,{evt:t}),_.eventCanceled){this._onDrop();return}q("setupClone",this),_.eventCanceled||(k=mn(h),k.removeAttribute("id"),k.draggable=!1,k.style["will-change"]="",this._hideClone(),W(k,this.options.chosenClass,!1),_.clone=k),i.cloneId=re(function(){q("clone",i),!_.eventCanceled&&(i.options.removeCloneOnHide||P.insertBefore(k,h),i._hideClone(),G({sortable:i,name:"clone"}))}),!e&&W(h,o.dragClass,!0),e?(ae=!0,i._loopId=setInterval(i._emulateDragOver,50)):(x(document,"mouseup",i._onDrop),x(document,"touchend",i._onDrop),x(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,h)),T(document,"drop",i),y(h,"transform","translateZ(0)")),Ct=!0,i._dragStartId=re(i._dragStarted.bind(i,e,t)),T(document,"selectstart",i),Lt=!0,window.getSelection().removeAllRanges(),Ft&&y(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,r,o,s,a=this.options,l=a.group,c=_.active,d=Qt===l,u=a.sort,f=Y||c,v,p=this,g=!1;if(Pe)return;function E(It,di){q(It,p,st({evt:t,isOwner:d,axis:v?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:u,fromSortable:f,target:i,completed:m,onMove:function(Ze,fi){return te(P,e,h,r,Ze,H(Ze),t,fi)},changed:D},di))}function O(){E("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function m(It){return E("dragOverCompleted",{insertion:It}),It&&(d?c._hideClone():c._showClone(p),p!==f&&(W(h,Y?Y.options.ghostClass:c.options.ghostClass,!1),W(h,a.ghostClass,!0)),Y!==p&&p!==_.active?Y=p:p===_.active&&Y&&(Y=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){E("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===h&&!h.animated||i===e&&!i.animated)&&(Ot=null),!a.dragoverBubble&&!t.rootEl&&i!==document&&(h.parentNode[U]._isOutsideThisEl(t.target),!It&&wt(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function D(){Q=tt(h),pt=tt(h,a.draggable),G({sortable:p,name:"change",toEl:e,newIndex:Q,newDraggableIndex:pt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=nt(i,a.draggable,e,!0),E("dragOver"),_.eventCanceled)return g;if(h.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return m(!1);if(ae=!1,c&&!a.disabled&&(d?u||(s=N!==P):Y===this||(this.lastPutMode=Qt.checkPull(this,c,h,t))&&l.checkPut(this,c,h,t))){if(v=this._getDirection(t,i)==="vertical",r=H(h),E("dragOverValid"),_.eventCanceled)return g;if(s)return N=P,O(),this._hideClone(),E("revert"),_.eventCanceled||(St?P.insertBefore(h,St):P.appendChild(h)),m(!0);var L=Re(e,a.draggable);if(!L||Pi(t,v,this)&&!L.animated){if(L===h)return m(!1);if(L&&e===t.target&&(i=L),i&&(o=H(i)),te(P,e,h,r,i,o,t,!!i)!==!1)return O(),L&&L.nextSibling?e.insertBefore(h,L.nextSibling):e.appendChild(h),N=e,D(),m(!0)}else if(L&&Li(t,v,this)){var Z=Dt(e,0,a,!0);if(Z===h)return m(!1);if(i=Z,o=H(i),te(P,e,h,r,i,o,t,!1)!==!1)return O(),e.insertBefore(h,Z),N=e,D(),m(!0)}else if(i.parentNode===e){o=H(i);var $=0,S,A=h.parentNode!==e,b=!Ai(h.animated&&h.toRect||r,i.animated&&i.toRect||o,v),M=v?"top":"left",C=rn(i,"top","top")||rn(h,"top","top"),rt=C?C.scrollTop:void 0;Ot!==i&&(S=o[M],Ht=!1,Jt=!b&&a.invertSwap||A),$=ki(t,i,o,v,b?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Jt,Ot===i);var z;if($!==0){var at=tt(h);do at-=$,z=N.children[at];while(z&&(y(z,"display")==="none"||z===w))}if($===0||z===i)return m(!1);Ot=i,Rt=$;var yt=i.nextElementSibling,ft=!1;ft=$===1;var Wt=te(P,e,h,r,i,o,t,ft);if(Wt!==!1)return(Wt===1||Wt===-1)&&(ft=Wt===1),Pe=!0,setTimeout(Ii,30),O(),ft&&!yt?e.appendChild(h):i.parentNode.insertBefore(h,ft?yt:i),C&&gn(C,0,rt-C.scrollTop),N=h.parentNode,S!==void 0&&!Jt&&(ie=Math.abs(S-H(i)[M])),D(),m(!0)}if(e.contains(h))return m(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",wt),x(document,"mousemove",wt),x(document,"touchmove",wt)},_offUpEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._onDrop),x(t,"touchend",this._onDrop),x(t,"pointerup",this._onDrop),x(t,"pointercancel",this._onDrop),x(t,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(Q=tt(h),pt=tt(h,i.draggable),q("drop",this,{evt:t}),N=h&&h.parentNode,Q=tt(h),pt=tt(h,i.draggable),_.eventCanceled){this._nulling();return}Ct=!1,Jt=!1,Ht=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ke(this.cloneId),ke(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ft&&y(document.body,"user-select",""),y(h,"transform",""),t&&(Lt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(P===N||Y&&Y.lastPutMode!=="clone")&&k&&k.parentNode&&k.parentNode.removeChild(k),h&&(this.nativeDraggable&&x(h,"dragend",this),De(h),h.style["will-change"]="",Lt&&!Ct&&W(h,Y?Y.options.ghostClass:this.options.ghostClass,!1),W(h,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:t}),P!==N?(Q>=0&&(G({rootEl:N,name:"add",toEl:N,fromEl:P,originalEvent:t}),G({sortable:this,name:"remove",toEl:N,originalEvent:t}),G({rootEl:N,name:"sort",toEl:N,fromEl:P,originalEvent:t}),G({sortable:this,name:"sort",toEl:N,originalEvent:t})),Y&&Y.save()):Q!==At&&Q>=0&&(G({sortable:this,name:"update",toEl:N,originalEvent:t}),G({sortable:this,name:"sort",toEl:N,originalEvent:t})),_.active&&((Q==null||Q===-1)&&(Q=At,pt=Nt),G({sortable:this,name:"end",toEl:N,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){q("nulling",this),P=h=N=w=St=k=ne=ht=_t=et=Lt=Q=pt=At=Nt=Ot=Rt=Y=Qt=_.dragged=_.ghost=_.clone=_.active=null,ce.forEach(function(t){t.checked=!0}),ce.length=Ce=Ae=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":h&&(this._onDragOver(t),Ti(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,r=0,o=i.length,s=this.options;r<o;r++)e=i[r],nt(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||Mi(e));return t},sort:function(t,e){var i={},r=this.el;this.toArray().forEach(function(o,s){var a=r.children[s];nt(a,this.options.draggable,r,!1)&&(i[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return nt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var r=Kt.modifyOption(this,t,e);typeof r<"u"?i[t]=r:i[t]=e,t==="group"&&_n(i)},destroy:function(){q("destroy",this);var t=this.el;t[U]=null,x(t,"mousedown",this._onTapStart),x(t,"touchstart",this._onTapStart),x(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(t,"dragover",this),x(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),le.splice(le.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ht){if(q("hideClone",this),_.eventCanceled)return;y(k,"display","none"),this.options.removeCloneOnHide&&k.parentNode&&k.parentNode.removeChild(k),ht=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ht){if(q("showClone",this),_.eventCanceled)return;h.parentNode==P&&!this.options.group.revertClone?P.insertBefore(k,h):St?P.insertBefore(k,St):P.appendChild(k),this.options.group.revertClone&&this.animate(h,k),y(k,"display",""),ht=!1}}};function Ti(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function te(n,t,e,i,r,o,s,a){var l,c=n[U],d=c.options.onMove,u;return window.CustomEvent&&!ut&&!Bt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=n,l.dragged=e,l.draggedRect=i,l.related=r||t,l.relatedRect=o||H(t),l.willInsertAfter=a,l.originalEvent=s,n.dispatchEvent(l),d&&(u=d.call(c,l,s)),u}function De(n){n.draggable=!1}function Ii(){Pe=!1}function Li(n,t,e){var i=H(Dt(e.el,0,e.options,!0)),r=vn(e.el,e.options,w),o=10;return t?n.clientX<r.left-o||n.clientY<i.top&&n.clientX<i.right:n.clientY<r.top-o||n.clientY<i.bottom&&n.clientX<i.left}function Pi(n,t,e){var i=H(Re(e.el,e.options.draggable)),r=vn(e.el,e.options,w),o=10;return t?n.clientX>r.right+o||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>r.bottom+o||n.clientX>i.right&&n.clientY>i.top}function ki(n,t,e,i,r,o,s,a){var l=i?n.clientY:n.clientX,c=i?e.height:e.width,d=i?e.top:e.left,u=i?e.bottom:e.right,f=!1;if(!s){if(a&&ie<c*r){if(!Ht&&(Rt===1?l>d+c*o/2:l<u-c*o/2)&&(Ht=!0),Ht)f=!0;else if(Rt===1?l<d+ie:l>u-ie)return-Rt}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return Fi(t)}return f=f||s,f&&(l<d+c*o/2||l>u-c*o/2)?l>d+c/2?1:-1:0}function Fi(n){return tt(h)<tt(n)?1:-1}function Mi(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function Ni(n){ce.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&ce.push(i)}}function re(n){return setTimeout(n,0)}function ke(n){return clearTimeout(n)}de&&T(document,"touchmove",function(n){(_.active||Ct)&&n.cancelable&&n.preventDefault()});_.utils={on:T,off:x,css:y,find:pn,is:function(t,e){return!!nt(t,e,t,!1)},extend:bi,throttle:hn,closest:nt,toggleClass:W,clone:mn,index:tt,nextTick:re,cancelNextTick:ke,detectDirection:yn,getChild:Dt,expando:U};_.get=function(n){return n[U]};_.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(_.utils=st(st({},_.utils),i.utils)),Kt.mount(i)})};_.create=function(n,t){return new _(n,t)};_.version=mi;var R=[],Pt,Fe,Me=!1,Te,Ie,ue,kt;function Ri(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):i.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),cn(),oe(),yi()},nulling:function(){ue=Fe=Pt=Me=kt=Te=Ie=null,R.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,s);if(ue=e,i||this.options.forceAutoScrollFallback||Bt||ut||Ft){Le(e,this.options,a,i);var l=gt(a,!0);Me&&(!kt||o!==Te||s!==Ie)&&(kt&&cn(),kt=setInterval(function(){var c=gt(document.elementFromPoint(o,s),!0);c!==l&&(l=c,oe()),Le(e,r.options,c,i)},10),Te=o,Ie=s)}else{if(!this.options.bubbleScroll||gt(a,!0)===ot()){oe();return}Le(e,this.options,gt(a,!1),!1)}}},ct(n,{pluginName:"scroll",initializeByDefault:!0})}function oe(){R.forEach(function(n){clearInterval(n.pid)}),R=[]}function cn(){clearInterval(kt)}var Le=hn(function(n,t,e,i){if(t.scroll){var r=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=ot(),c=!1,d;Fe!==e&&(Fe=e,oe(),Pt=t.scroll,d=t.scrollFn,Pt===!0&&(Pt=gt(e,!0)));var u=0,f=Pt;do{var v=f,p=H(v),g=p.top,E=p.bottom,O=p.left,m=p.right,D=p.width,L=p.height,Z=void 0,$=void 0,S=v.scrollWidth,A=v.scrollHeight,b=y(v),M=v.scrollLeft,C=v.scrollTop;v===l?(Z=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),$=L<A&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(Z=D<S&&(b.overflowX==="auto"||b.overflowX==="scroll"),$=L<A&&(b.overflowY==="auto"||b.overflowY==="scroll"));var rt=Z&&(Math.abs(m-r)<=s&&M+D<S)-(Math.abs(O-r)<=s&&!!M),z=$&&(Math.abs(E-o)<=s&&C+L<A)-(Math.abs(g-o)<=s&&!!C);if(!R[u])for(var at=0;at<=u;at++)R[at]||(R[at]={});(R[u].vx!=rt||R[u].vy!=z||R[u].el!==v)&&(R[u].el=v,R[u].vx=rt,R[u].vy=z,clearInterval(R[u].pid),(rt!=0||z!=0)&&(c=!0,R[u].pid=setInterval(function(){i&&this.layer===0&&_.active._onTouchMove(ue);var yt=R[this.layer].vy?R[this.layer].vy*a:0,ft=R[this.layer].vx?R[this.layer].vx*a:0;typeof d=="function"&&d.call(_.dragged.parentNode[U],ft,yt,n,ue,R[this.layer].el)!=="continue"||gn(R[this.layer].el,ft,yt)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&f!==l&&(f=gt(f,!1)));Me=c}},30),En=function(t){var e=t.originalEvent,i=t.putSortable,r=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=i||o;a();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(s("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function He(){}He.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=Dt(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:En};ct(He,{pluginName:"revertOnSpill"});function Be(){}Be.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,r=i||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:En};ct(Be,{pluginName:"removeOnSpill"});_.mount(new Ri);_.mount(Be,He);var On=_;var $t=class{constructor(t){this.props={closeOnClickOutside:!0,root:document.body,...t},this.dialog=null,this.addListener("close-dialog",this.close)}clickListener(t){!t.target.closest(".rs-util-settings-dialog__content")&&this.props.closeOnClickOutside&&this.close();let e=t.target.closest("button");e&&e.dataset.action&&document.dispatchEvent(new CustomEvent("dialog-action."+e.dataset.action,{detail:{dialog:this.dialog,button:e}}))}addListener(t,e){document.addEventListener("dialog-action."+t,e)}close({detail:t}){let{dialog:e}=t||{};document.body.classList.remove("rs-util-settings-dialog-open"),e&&e.remove()}open(){document.body.classList.add("rs-util-settings-dialog-open"),this.render()}render(t={}){t={...this.props,...t};let e=document.createElement("div");return e.classList.add("rs-util-settings-dialog"),e.innerHTML=`
			<div class="rs-util-settings-dialog__content">
				<div class="rs-util-settings-dialog__header">
					<h2>${t.title}</h2>
					<button type="button" class="rs-util-settings-dialog__close" data-action="close-dialog">Close</button>
				</div>
				<div class="rs-util-settings-dialog__body">
					${t.content}
					<div class="rs-util-settings-dialog__actions">
						${t.actions.map(i=>{let r=document.createElement("button");return r.type="button",r.classList.add("button","rs-util-settings-dialog__action"),i.primary&&r.classList.add("button-primary"),i.classes&&r.classList.add(...i.classes),i.action&&(r.dataset.action=i.action),r.innerHTML=i.label,r.outerHTML}).join("")}
					</div>
				</div>
			</div>
		`,this.dialog=e,this.props.root.appendChild(e),e.addEventListener("click",this.clickListener.bind(this)),e}};function Ke(n,t){n.split(/\s+/).forEach(e=>{t(e)})}var Yt=class{constructor(){this._events={}}on(t,e){Ke(t,i=>{let r=this._events[i]||[];r.push(e),this._events[i]=r})}off(t,e){var i=arguments.length;if(i===0){this._events={};return}Ke(t,r=>{if(i===1){delete this._events[r];return}let o=this._events[r];o!==void 0&&(o.splice(o.indexOf(e),1),this._events[r]=o)})}trigger(t,...e){var i=this;Ke(t,r=>{let o=i._events[r];o!==void 0&&o.forEach(s=>{s.apply(i,e)})})}};function $e(n){return n.plugins={},class extends n{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){n.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,i;let r=this,o=[];if(Array.isArray(t))t.forEach(s=>{typeof s=="string"?o.push(s):(r.plugins.settings[s.name]=s.options,o.push(s.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],o.push(e));for(;i=o.shift();)r.require(i)}loadPlugin(t){var e=this,i=e.plugins,r=n.plugins[t];if(!n.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),i.names.push(t)}require(t){var e=this,i=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(i.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return i.loaded[t]}}}var Vt=n=>(n=n.filter(Boolean),n.length<2?n[0]||"":Bi(n)==1?"["+n.join("")+"]":"(?:"+n.join("|")+")"),Ye=n=>{if(!Hi(n))return n.join("");let t="",e=0,i=()=>{e>1&&(t+="{"+e+"}")};return n.forEach((r,o)=>{if(r===n[o-1]){e++;return}i(),t+=r,e=1}),i(),t},Ve=n=>{let t=Array.from(n);return Vt(t)},Hi=n=>new Set(n).size!==n.length,mt=n=>(n+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Bi=n=>n.reduce((t,e)=>Math.max(t,Ki(e)),0),Ki=n=>Array.from(n).length;var je=n=>{if(n.length===1)return[[n]];let t=[],e=n.substring(1);return je(e).forEach(function(r){let o=r.slice(0);o[0]=n.charAt(0)+o[0],t.push(o),o=r.slice(0),o.unshift(n.charAt(0)),t.push(o)}),t};var $i=[[0,65535]],Yi="[\u0300-\u036F\xB7\u02BE\u02BC]",fe,Dn,Vi=3,Ge={},Cn={"/":"\u2044\u2215",0:"\u07C0",a:"\u2C65\u0250\u0251",aa:"\uA733",ae:"\xE6\u01FD\u01E3",ao:"\uA735",au:"\uA737",av:"\uA739\uA73B",ay:"\uA73D",b:"\u0180\u0253\u0183",c:"\uA73F\u0188\u023C\u2184",d:"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266",e:"\u025B\u01DD\u1D07\u0247",f:"\uA77C\u0192",g:"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262",h:"\u0127\u2C68\u2C76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2C6A\uA741\uA743\uA745\uA7A3",l:"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D",m:"\u0271\u026F\u03FB",n:"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509",o:"\xF8\u01FF\u0254\u0275\uA74B\uA74D\u1D11",oe:"\u0153",oi:"\u01A3",oo:"\uA74F",ou:"\u0223",p:"\u01A5\u1D7D\uA751\uA753\uA755\u03C1",q:"\uA757\uA759\u024B",r:"\u024D\u027D\uA75B\uA7A7\uA783",s:"\xDF\u023F\uA7A9\uA785\u0282",t:"\u0167\u01AD\u0288\u2C66\uA787",th:"\xFE",tz:"\uA729",u:"\u0289",v:"\u028B\uA75F\u028C",vy:"\uA761",w:"\u2C73",y:"\u01B4\u024F\u1EFF",z:"\u01B6\u0225\u0240\u2C6C\uA763",hv:"\u0195"};for(let n in Cn){let t=Cn[n]||"";for(let e=0;e<t.length;e++){let i=t.substring(e,e+1);Ge[i]=n}}var ji=new RegExp(Object.keys(Ge).join("|")+"|"+Yi,"gu"),Gi=n=>{fe===void 0&&(fe=Xi(n||$i))},An=(n,t="NFKD")=>n.normalize(t),jt=n=>Array.from(n).reduce((t,e)=>t+zi(e),""),zi=n=>(n=An(n).toLowerCase().replace(ji,t=>Ge[t]||""),An(n,"NFC"));function*qi(n){for(let[t,e]of n)for(let i=t;i<=e;i++){let r=String.fromCharCode(i),o=jt(r);o!=r.toLowerCase()&&(o.length>Vi||o.length!=0&&(yield{folded:o,composed:r,code_point:i}))}}var Ui=n=>{let t={},e=(i,r)=>{let o=t[i]||new Set,s=new RegExp("^"+Ve(o)+"$","iu");r.match(s)||(o.add(mt(r)),t[i]=o)};for(let i of qi(n))e(i.folded,i.folded),e(i.folded,i.composed);return t},Xi=n=>{let t=Ui(n),e={},i=[];for(let o in t){let s=t[o];s&&(e[o]=Ve(s)),o.length>1&&i.push(mt(o))}i.sort((o,s)=>s.length-o.length);let r=Vt(i);return Dn=new RegExp("^"+r,"u"),e},Wi=(n,t=1)=>{let e=0;return n=n.map(i=>(fe[i]&&(e+=i.length),fe[i]||i)),e>=t?Ye(n):""},Qi=(n,t=1)=>(t=Math.max(t,n.length-1),Vt(je(n).map(e=>Wi(e,t)))),xn=(n,t=!0)=>{let e=n.length>1?1:0;return Vt(n.map(i=>{let r=[],o=t?i.length():i.length()-1;for(let s=0;s<o;s++)r.push(Qi(i.substrs[s]||"",e));return Ye(r)}))},Ji=(n,t)=>{for(let e of t){if(e.start!=n.start||e.end!=n.end||e.substrs.join("")!==n.substrs.join(""))continue;let i=n.parts,r=s=>{for(let a of i){if(a.start===s.start&&a.substr===s.substr)return!1;if(!(s.length==1||a.length==1)&&(s.start<a.start&&s.end>a.start||a.start<s.start&&a.end>s.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1},pe=class n{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new n,r=JSON.parse(JSON.stringify(this.parts)),o=r.pop();for(let l of r)i.add(l);let s=e.substr.substring(0,t-o.start),a=s.length;return i.add({start:o.start,end:o.start+a,length:a,substr:s}),i}},Tn=n=>{Gi(),n=jt(n);let t="",e=[new pe];for(let i=0;i<n.length;i++){let o=n.substring(i).match(Dn),s=n.substring(i,i+1),a=o?o[0]:null,l=[],c=new Set;for(let d of e){let u=d.last();if(!u||u.length==1||u.end<=i)if(a){let f=a.length;d.add({start:i,end:i+f,length:f,substr:a}),c.add("1")}else d.add({start:i,end:i+1,length:1,substr:s}),c.add("2");else if(a){let f=d.clone(i,u),v=a.length;f.add({start:i,end:i+v,length:v,substr:a}),l.push(f)}else c.add("3")}if(l.length>0){l=l.sort((d,u)=>d.length()-u.length());for(let d of l)Ji(d,e)||e.push(d);continue}if(i>0&&c.size==1&&!c.has("3")){t+=xn(e,!1);let d=new pe,u=e[0];u&&d.add(u.last()),e=[d]}}return t+=xn(e,!0),t};var In=(n,t)=>{if(n)return n[t]},Ln=(n,t)=>{if(n){for(var e,i=t.split(".");(e=i.shift())&&(n=n[e]););return n}},he=(n,t,e)=>{var i,r;return!n||(n=n+"",t.regex==null)||(r=n.search(t.regex),r===-1)?0:(i=t.string.length/n.length,r===0&&(i+=.5),i*e)},ge=(n,t)=>{var e=n[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(n[t]=[e])},Gt=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Pn=(n,t)=>typeof n=="number"&&typeof t=="number"?n>t?1:n<t?-1:0:(n=jt(n+"").toLowerCase(),t=jt(t+"").toLowerCase(),n>t?1:t>n?-1:0);var me=class{items;settings;constructor(t,e){this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){if(!t||!t.length)return[];let r=[],o=t.split(/\s+/);var s;return i&&(s=new RegExp("^("+Object.keys(i).map(mt).join("|")+"):(.*)$")),o.forEach(a=>{let l,c=null,d=null;s&&(l=a.match(s))&&(c=l[1],a=l[2]),a.length>0&&(this.settings.diacritics?d=Tn(a)||null:d=mt(a),d&&e&&(d="\\b"+d)),r.push({string:a,regex:d?new RegExp(d,"iu"):null,field:c})}),r}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){let e=t.tokens,i=e.length;if(!i)return function(){return 0};let r=t.options.fields,o=t.weights,s=r.length,a=t.getAttrFn;if(!s)return function(){return 1};let l=function(){return s===1?function(c,d){let u=r[0].field;return he(a(d,u),c,o[u]||1)}:function(c,d){var u=0;if(c.field){let f=a(d,c.field);!c.regex&&f?u+=1/s:u+=he(f,c,1)}else Gt(o,(f,v)=>{u+=he(a(d,v),c,f)});return u/s}}();return i===1?function(c){return l(e[0],c)}:t.options.conjunction==="and"?function(c){var d,u=0;for(let f of e){if(d=l(f,c),d<=0)return 0;u+=d}return u/i}:function(c){var d=0;return Gt(e,u=>{d+=l(u,c)}),d/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];let r=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if(typeof s=="function")return s.bind(this);let a=function(c,d){return c==="$score"?d.score:t.getAttrFn(r.items[d.id],c)};if(s)for(let c of s)(t.query||c.field!=="$score")&&i.push(c);if(t.query){e=!0;for(let c of i)if(c.field==="$score"){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(c=>c.field!=="$score");return i.length?function(c,d){var u,f;for(let v of i)if(f=v.field,u=(v.direction==="desc"?-1:1)*Pn(a(f,c),a(f,d)),u)return u;return 0}:null}prepareSearch(t,e){let i={};var r=Object.assign({},e);if(ge(r,"sort"),ge(r,"sort_empty"),r.fields){ge(r,"fields");let o=[];r.fields.forEach(s=>{typeof s=="string"&&(s={field:s,weight:1}),o.push(s),i[s.field]="weight"in s?s.weight:1}),r.fields=o}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:r.nesting?Ln:In}}search(t,e){var i=this,r,o;o=this.prepareSearch(t,e),e=o.options,t=o.query;let s=e.score||i._getScoreFunction(o);t.length?Gt(i.items,(l,c)=>{r=s(l),(e.filter===!1||r>0)&&o.items.push({score:r,id:c})}):Gt(i.items,(l,c)=>{o.items.push({score:1,id:c})});let a=i._getSortFunction(o);return a&&o.items.sort(a),o.total=o.items.length,typeof e.limit=="number"&&(o.items=o.items.slice(0,e.limit)),o}};var J=n=>typeof n>"u"||n===null?null:zt(n),zt=n=>typeof n=="boolean"?n?"1":"0":n+"",ve=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),kn=(n,t)=>t>0?window.setTimeout(n,t):(n.call(null),null),Fn=(n,t)=>{var e;return function(i,r){var o=this;e&&(o.loading=Math.max(o.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,o.loadedSearches[i]=!0,n.call(o,i,r)},t)}},ze=(n,t,e)=>{var i,r=n.trigger,o={};n.trigger=function(){var s=arguments[0];if(t.indexOf(s)!==-1)o[s]=arguments;else return r.apply(n,arguments)},e.apply(n,[]),n.trigger=r;for(i of t)i in o&&r.apply(n,o[i])},Mn=n=>({start:n.selectionStart||0,length:(n.selectionEnd||0)-(n.selectionStart||0)}),F=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},j=(n,t,e,i)=>{n.addEventListener(t,e,i)},vt=(n,t)=>{if(!t||!t[n])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},be=(n,t)=>{let e=n.getAttribute("id");return e||(n.setAttribute("id",t),t)},qe=n=>n.replace(/[\\"']/g,"\\$&"),bt=(n,t)=>{t&&n.append(t)},B=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)};var it=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ue(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ue=n=>typeof n=="string"&&n.indexOf("<")>-1,Nn=n=>n.replace(/['"\\]/g,"\\$&"),ye=(n,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),n.dispatchEvent(e)},qt=(n,t)=>{Object.assign(n.style,t)},X=(n,...t)=>{var e=Rn(t);n=Hn(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},dt=(n,...t)=>{var e=Rn(t);n=Hn(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Rn=n=>{var t=[];return B(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Hn=n=>(Array.isArray(n)||(n=[n]),n),_e=(n,t,e)=>{if(!(e&&!e.contains(n)))for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Xe=(n,t=0)=>t>0?n[n.length-1]:n[0],Bn=n=>Object.keys(n).length===0,We=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e},I=(n,t)=>{B(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},Ut=(n,t)=>{n.parentNode&&n.parentNode.replaceChild(t,n)};var Kn=(n,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}let e=o=>{var s=o.data.match(t);if(s&&o.data.length>0){var a=document.createElement("span");a.className="highlight";var l=o.splitText(s.index);l.splitText(s[0].length);var c=l.cloneNode(!0);return a.appendChild(c),Ut(l,a),1}return 0},i=o=>{o.nodeType===1&&o.childNodes&&!/(script|style)/i.test(o.tagName)&&(o.className!=="highlight"||o.tagName!=="SPAN")&&Array.from(o.childNodes).forEach(s=>{r(s)})},r=o=>o.nodeType===3?e(o):(i(o),0);r(n)},$n=n=>{var t=n.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()})};var Zi=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Xt=Zi?"metaKey":"ctrlKey";var Qe={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(n){return n.length>0},render:{}};function we(n,t){var e=Object.assign({},Qe,t),i=e.dataAttr,r=e.labelField,o=e.valueField,s=e.disabledField,a=e.optgroupField,l=e.optgroupLabelField,c=e.optgroupValueField,d=n.tagName.toLowerCase(),u=n.getAttribute("placeholder")||n.getAttribute("data-placeholder");if(!u&&!e.allowEmptyOption){let g=n.querySelector('option[value=""]');g&&(u=g.textContent)}var f={placeholder:u,options:[],optgroups:[],items:[],maxItems:null},v=()=>{var g,E=f.options,O={},m=1;let D=0;var L=S=>{var A=Object.assign({},S.dataset),b=i&&A[i];return typeof b=="string"&&b.length&&(A=Object.assign(A,JSON.parse(b))),A},Z=(S,A)=>{var b=J(S.value);if(b!=null&&!(!b&&!e.allowEmptyOption)){if(O.hasOwnProperty(b)){if(A){var M=O[b][a];M?Array.isArray(M)?M.push(A):O[b][a]=[M,A]:O[b][a]=A}}else{var C=L(S);C[r]=C[r]||S.textContent,C[o]=C[o]||b,C[s]=C[s]||S.disabled,C[a]=C[a]||A,C.$option=S,C.$order=C.$order||++D,O[b]=C,E.push(C)}S.selected&&f.items.push(b)}},$=S=>{var A,b;b=L(S),b[l]=b[l]||S.getAttribute("label")||"",b[c]=b[c]||m++,b[s]=b[s]||S.disabled,b.$order=b.$order||++D,f.optgroups.push(b),A=b[c],B(S.children,M=>{Z(M,A)})};f.maxItems=n.hasAttribute("multiple")?null:1,B(n.children,S=>{g=S.tagName.toLowerCase(),g==="optgroup"?$(S):g==="option"&&Z(S)})},p=()=>{let g=n.getAttribute(i);if(g)f.options=JSON.parse(g),B(f.options,O=>{f.items.push(O[o])});else{var E=n.value.trim()||"";if(!e.allowEmptyOption&&!E.length)return;let O=E.split(e.delimiter);B(O,m=>{let D={};D[r]=m,D[o]=m,f.options.push(D)}),f.items=O}};return d==="select"?v():p(),Object.assign({},Qe,f,t)}var jn=0,K=class extends $e(Yt){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,jn++;var i,r=it(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var o=window.getComputedStyle&&window.getComputedStyle(r,null);i=o.getPropertyValue("direction");let s=we(r,e);this.settings=s,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(i),this.inputId=be(r,"tomselect-"+jn),this.isRequired=r.required,this.sifter=new me(this.options,{diacritics:s.diacritics}),s.mode=s.mode||(s.maxItems===1?"single":"multi"),typeof s.hideSelected!="boolean"&&(s.hideSelected=s.mode==="multi"),typeof s.hidePlaceholder!="boolean"&&(s.hidePlaceholder=s.mode!=="multi");var a=s.createFilter;typeof a!="function"&&(typeof a=="string"&&(a=new RegExp(a)),a instanceof RegExp?s.createFilter=E=>a.test(E):s.createFilter=E=>this.settings.duplicates||!this.options[E]),this.initializePlugins(s.plugins),this.setupCallbacks(),this.setupTemplates();let l=it("<div>"),c=it("<div>"),d=this._render("dropdown"),u=it('<div role="listbox" tabindex="-1">'),f=this.input.getAttribute("class")||"",v=s.mode;var p;if(X(l,s.wrapperClass,f,v),X(c,s.controlClass),bt(l,c),X(d,s.dropdownClass,v),s.copyClassesToDropdown&&X(d,f),X(u,s.dropdownContentClass),bt(d,u),it(s.dropdownParent||l).appendChild(d),Ue(s.controlInput)){p=it(s.controlInput);var g=["autocorrect","autocapitalize","autocomplete","spellcheck"];B(g,E=>{r.getAttribute(E)&&I(p,{[E]:r.getAttribute(E)})}),p.tabIndex=-1,c.appendChild(p),this.focus_node=p}else s.controlInput?(p=it(s.controlInput),this.focus_node=p):(p=it("<input/>"),this.focus_node=c);this.wrapper=l,this.dropdown=d,this.dropdown_content=u,this.control=c,this.control_input=p,this.setup()}setup(){let t=this,e=t.settings,i=t.control_input,r=t.dropdown,o=t.dropdown_content,s=t.wrapper,a=t.control,l=t.input,c=t.focus_node,d={passive:!0},u=t.inputId+"-ts-dropdown";I(o,{id:u}),I(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":u});let f=be(c,t.inputId+"-ts-control"),v="label[for='"+Nn(t.inputId)+"']",p=document.querySelector(v),g=t.focus.bind(t);if(p){j(p,"click",g),I(p,{for:f});let m=be(p,t.inputId+"-ts-label");I(c,{"aria-labelledby":m}),I(o,{"aria-labelledby":m})}if(s.style.width=l.style.width,t.plugins.names.length){let m="plugin-"+t.plugins.names.join(" plugin-");X([s,r],m)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&I(l,{multiple:"multiple"}),e.placeholder&&I(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+mt(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=Fn(e.load,e.loadThrottle)),j(r,"mousemove",()=>{t.ignoreHover=!1}),j(r,"mouseenter",m=>{var D=_e(m.target,"[data-selectable]",r);D&&t.onOptionHover(m,D)},{capture:!0}),j(r,"click",m=>{let D=_e(m.target,"[data-selectable]");D&&(t.onOptionSelect(m,D),F(m,!0))}),j(a,"click",m=>{var D=_e(m.target,"[data-ts-item]",a);if(D&&t.onItemSelect(m,D)){F(m,!0);return}i.value==""&&(t.onClick(),F(m,!0))}),j(c,"keydown",m=>t.onKeyDown(m)),j(i,"keypress",m=>t.onKeyPress(m)),j(i,"input",m=>t.onInput(m)),j(c,"blur",m=>t.onBlur(m)),j(c,"focus",m=>t.onFocus(m)),j(i,"paste",m=>t.onPaste(m));let E=m=>{let D=m.composedPath()[0];if(!s.contains(D)&&!r.contains(D)){t.isFocused&&t.blur(),t.inputState();return}D==i&&t.isOpen?m.stopPropagation():F(m,!0)},O=()=>{t.isOpen&&t.positionDropdown()};j(document,"mousedown",E),j(window,"scroll",O,d),j(window,"resize",O,d),this._destroy=()=>{document.removeEventListener("mousedown",E),window.removeEventListener("scroll",O),window.removeEventListener("resize",O),p&&p.removeEventListener("click",g)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,j(l,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():l.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),X(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),B(e,i=>{this.registerOptionGroup(i)})}setupTemplates(){var t=this,e=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:o=>{let s=document.createElement("div");return s.className="optgroup",s.appendChild(o.options),s},optgroup_header:(o,s)=>'<div class="optgroup-header">'+s(o[i])+"</div>",option:(o,s)=>"<div>"+s(o[e])+"</div>",item:(o,s)=>"<div>"+s(o[e])+"</div>",option_create:(o,s)=>'<div class="create">Add <strong>'+s(o.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)e=this.settings[i[t]],e&&this.on(t,e)}sync(t=!0){let e=this,i=t?we(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(i.options,i.optgroups),e.setValue(i.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){ye(this.input,"input"),ye(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){F(t);return}e.settings.splitOn&&setTimeout(()=>{var i=e.inputValue();if(i.match(e.settings.splitOn)){var r=i.trim().split(e.settings.splitOn);B(r,o=>{J(o)&&(this.options[o]?e.addItem(o):e.createItem(o))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){F(t);return}var i=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&i===e.settings.delimiter){e.createItem(),F(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==9&&F(t);return}switch(t.keyCode){case 65:if(vt(Xt,t)&&e.control_input.value==""){F(t),e.selectAll();return}break;case 27:e.isOpen&&(F(t,!0),e.close()),e.clearActiveItems();return;case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let i=e.getAdjacent(e.activeOption,1);i&&e.setActiveOption(i)}F(t);return;case 38:if(e.activeOption){let i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}F(t);return;case 13:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),F(t)):e.settings.create&&e.createItem()?F(t):document.activeElement==e.control_input&&e.isOpen&&F(t);return;case 37:e.advanceSelection(-1,t);return;case 39:e.advanceSelection(1,t);return;case 9:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),F(t)),e.settings.create&&e.createItem()&&F(t));return;case 8:case 46:e.deleteSelection(t);return}e.isInputHidden&&!vt(Xt,t)&&F(t)}onInput(t){if(this.isLocked)return;let e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=kn(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,i=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),F(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),i||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(i=e.dataset.value,typeof i<"u"&&(r.lastQuery=null,r.addItem(i),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var i=this;return!i.isLocked&&i.settings.mode==="multi"?(F(t),i.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){let e=this;if(!e.canLoad(t))return;X(e.wrapper,e.settings.loadingClass),e.loading++;let i=e.loadCallback.bind(e);e.settings.load.call(e,t,i)}loadCallback(t,e){let i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,e),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||dt(i.wrapper,i.settings.loadingClass),i.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,i=e.value!==t;i&&(e.value=t,ye(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var i=e?[]:["change"];ze(this,i,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i=this,r,o,s,a,l,c;if(i.settings.mode!=="single"){if(!t){i.clearActiveItems(),i.isFocused&&i.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&vt("shiftKey",e)&&i.activeItems.length){for(c=i.getLastActive(),s=Array.prototype.indexOf.call(i.control.children,c),a=Array.prototype.indexOf.call(i.control.children,t),s>a&&(l=s,s=a,a=l),o=s;o<=a;o++)t=i.control.children[o],i.activeItems.indexOf(t)===-1&&i.setActiveItemClass(t);F(e)}else r==="click"&&vt(Xt,e)||r==="keydown"&&vt("shiftKey",e)?t.classList.contains("active")?i.removeActiveItem(t):i.setActiveItemClass(t):(i.clearActiveItems(),i.setActiveItemClass(t));i.inputState(),i.isFocused||i.focus()}}setActiveItemClass(t){let e=this,i=e.control.querySelector(".last-active");i&&dt(i,"last-active"),X(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),dt(t,"active")}clearActiveItems(){dt(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,I(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),I(t,{"aria-selected":"true"}),X(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;let i=this.dropdown_content,r=i.clientHeight,o=i.scrollTop||0,s=t.offsetHeight,a=t.getBoundingClientRect().top-i.getBoundingClientRect().top+o;a+s>r+o?this.scroll(a-r+s,e):a<o&&this.scroll(a,e)}scroll(t,e){let i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(dt(this.activeOption,"active"),I(this.activeOption,{"aria-selected":null})),this.activeOption=null,I(this.focus_node,{"aria-activedescendant":null})}selectAll(){let t=this;if(t.settings.mode==="single")return;let e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,B(e,i=>{t.setActiveItemClass(i)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(I(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&I(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,r=this,o=this.getSearchOptions();if(r.settings.score&&(i=r.settings.score.call(r,t),typeof i!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(o,{score:i})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(s=>{let a=J(s.id);return!(a&&r.items.indexOf(a)!==-1)})),e}refreshOptions(t=!0){var e,i,r,o,s,a,l,c,d,u;let f={},v=[];var p=this,g=p.inputValue();let E=g===p.lastQuery||g==""&&p.lastQuery==null;var O=p.search(g),m=null,D=p.settings.shouldOpen||!1,L=p.dropdown_content;E&&(m=p.activeOption,m&&(d=m.closest("[data-group]"))),o=O.items.length,typeof p.settings.maxOptions=="number"&&(o=Math.min(o,p.settings.maxOptions)),o>0&&(D=!0);let Z=(S,A)=>{let b=f[S];if(b!==void 0){let C=v[b];if(C!==void 0)return[b,C.fragment]}let M=document.createDocumentFragment();return b=v.length,v.push({fragment:M,order:A,optgroup:S}),[b,M]};for(e=0;e<o;e++){let S=O.items[e];if(!S)continue;let A=S.id,b=p.options[A];if(b===void 0)continue;let M=zt(A),C=p.getOption(M,!0);for(p.settings.hideSelected||C.classList.toggle("selected",p.items.includes(M)),s=b[p.settings.optgroupField]||"",a=Array.isArray(s)?s:[s],i=0,r=a&&a.length;i<r;i++){s=a[i];let rt=b.$order,z=p.optgroups[s];z===void 0?s="":rt=z.$order;let[at,yt]=Z(s,rt);i>0&&(C=C.cloneNode(!0),I(C,{id:b.$id+"-clone-"+i,"aria-selected":null}),C.classList.add("ts-cloned"),dt(C,"active"),p.activeOption&&p.activeOption.dataset.value==A&&d&&d.dataset.group===s.toString()&&(m=C)),yt.appendChild(C),s!=""&&(f[s]=at)}}p.settings.lockOptgroupOrder&&v.sort((S,A)=>S.order-A.order),l=document.createDocumentFragment(),B(v,S=>{let A=S.fragment,b=S.optgroup;if(!A||!A.children.length)return;let M=p.optgroups[b];if(M!==void 0){let C=document.createDocumentFragment(),rt=p.render("optgroup_header",M);bt(C,rt),bt(C,A);let z=p.render("optgroup",{group:M,options:C});bt(l,z)}else bt(l,A)}),L.innerHTML="",bt(L,l),p.settings.highlight&&($n(L),O.query.length&&O.tokens.length&&B(O.tokens,S=>{Kn(L,S.regex)}));var $=S=>{let A=p.render(S,{input:g});return A&&(D=!0,L.insertBefore(A,L.firstChild)),A};if(p.loading?$("loading"):p.settings.shouldLoad.call(p,g)?O.items.length===0&&$("no_results"):$("not_loading"),c=p.canCreate(g),c&&(u=$("option_create")),p.hasOptions=O.items.length>0||c,D){if(O.items.length>0){if(!m&&p.settings.mode==="single"&&p.items[0]!=null&&(m=p.getOption(p.items[0])),!L.contains(m)){let S=0;u&&!p.settings.addPrecedence&&(S=1),m=p.selectable()[S]}}else u&&(m=u);t&&!p.isOpen&&(p.open(),p.scrollToOption(m,"auto")),p.setActiveOption(m)}else p.clearActiveOption(),t&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){let i=this;if(Array.isArray(t))return i.addOptions(t,e),!1;let r=J(t[i.settings.valueField]);return r===null||i.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++i.order,t.$id=i.inputId+"-opt-"+t.$order,i.options[r]=t,i.lastQuery=null,e&&(i.userOptions[r]=e,i.trigger("option_add",r,t)),r)}addOptions(t,e=!1){B(t,i=>{this.addOption(i,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=J(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){let i=this;var r,o;let s=J(t),a=J(e[i.settings.valueField]);if(s===null)return;let l=i.options[s];if(l==null)return;if(typeof a!="string")throw new Error("Value must be set in option data");let c=i.getOption(s),d=i.getItem(s);if(e.$order=e.$order||l.$order,delete i.options[s],i.uncacheValue(a),i.options[a]=e,c){if(i.dropdown_content.contains(c)){let u=i._render("option",e);Ut(c,u),i.activeOption===c&&i.setActiveOption(u)}c.remove()}d&&(o=i.items.indexOf(s),o!==-1&&i.items.splice(o,1,a),r=i._render("item",e),d.classList.contains("active")&&X(r,"active"),Ut(d,r)),i.lastQuery=null}removeOption(t,e){let i=this;t=zt(t),i.uncacheValue(t),delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)}clearOptions(t){let e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};B(this.options,(r,o)=>{e(r,o)&&(i[o]=r)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){let i=J(t);if(i===null)return null;let r=this.options[i];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,i="option"){var r=this,o;if(!t)return null;i=="item"?o=r.controlChildren():o=r.dropdown_content.querySelectorAll("[data-selectable]");for(let s=0;s<o.length;s++)if(o[s]==t)return e>0?o[s+1]:o[s-1];return null}getItem(t){if(typeof t=="object")return t;var e=J(t);return e!==null?this.control.querySelector(`[data-value="${qe(e)}"]`):null}addItems(t,e){var i=this,r=Array.isArray(t)?t:[t];r=r.filter(s=>i.items.indexOf(s)===-1);let o=r[r.length-1];r.forEach(s=>{i.isPending=s!==o,i.addItem(s,e)})}addItem(t,e){var i=e?[]:["change","dropdown_close"];ze(this,i,()=>{var r,o;let s=this,a=s.settings.mode,l=J(t);if(!(l&&s.items.indexOf(l)!==-1&&(a==="single"&&s.close(),a==="single"||!s.settings.duplicates))&&!(l===null||!s.options.hasOwnProperty(l))&&(a==="single"&&s.clear(e),!(a==="multi"&&s.isFull()))){if(r=s._render("item",s.options[l]),s.control.contains(r)&&(r=r.cloneNode(!0)),o=s.isFull(),s.items.splice(s.caretPos,0,l),s.insertAtCaret(r),s.isSetup){if(!s.isPending&&s.settings.hideSelected){let c=s.getOption(l),d=s.getAdjacent(c,1);d&&s.setActiveOption(d)}!s.isPending&&!s.settings.closeAfterSelect&&s.refreshOptions(s.isFocused&&a!=="single"),s.settings.closeAfterSelect!=!1&&s.isFull()?s.close():s.isPending||s.positionDropdown(),s.trigger("item_add",l,r),s.isPending||s.updateOriginalInput({silent:e})}(!s.isPending||!o&&s.isFull())&&(s.inputState(),s.refreshState())}})}removeItem(t=null,e){let i=this;if(t=i.getItem(t),!t)return;var r,o;let s=t.dataset.value;r=We(t),t.remove(),t.classList.contains("active")&&(o=i.activeItems.indexOf(t),i.activeItems.splice(o,1),dt(t,"active")),i.items.splice(r,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(s)&&i.removeOption(s,e),r<i.caretPos&&i.setCaret(i.caretPos-1),i.updateOriginalInput({silent:e}),i.refreshState(),i.positionDropdown(),i.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var i=this,r=i.caretPos,o;if(t=t||i.inputValue(),!i.canCreate(t))return e(),!1;i.lock();var s=!1,a=l=>{if(i.unlock(),!l||typeof l!="object")return e();var c=J(l[i.settings.valueField]);if(typeof c!="string")return e();i.setTextboxValue(),i.addOption(l,!0),i.setCaret(r),i.addItem(c),e(l),s=!0};return typeof i.settings.create=="function"?o=i.settings.create.call(this,t,a):o={[i.settings.labelField]:t,[i.settings.valueField]:t},s||a(o),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){let t=this;t.refreshValidityState();let e=t.isFull(),i=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);let r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",i),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",Bn(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){let e=this;var i,r;let o=e.input.querySelector('option[value=""]');if(e.is_select_tag){let l=function(c,d,u){return c||(c=it('<option value="'+ve(d)+'">'+ve(u)+"</option>")),c!=o&&e.input.append(c),s.push(c),(c!=o||a>0)&&(c.selected=!0),c},s=[],a=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(c=>{c.selected=!1}),e.items.length==0&&e.settings.mode=="single"?l(o,"",""):e.items.forEach(c=>{if(i=e.options[c],r=i[e.settings.labelField]||"",s.includes(i.$option)){let d=e.input.querySelector(`option[value="${qe(c)}"]:not(:checked)`);l(d,c,r)}else i.$option=l(i.$option,c,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,I(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),qt(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),qt(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,i=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,I(e.focus_node,{"aria-expanded":"false"}),qt(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),i&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;qt(this.dropdown,{width:e.width+"px",top:i+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var i=e.controlChildren();B(i,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){let e=this,i=e.caretPos,r=e.control;r.insertBefore(t,r.children[i]||null),e.setCaret(i+1)}deleteSelection(t){var e,i,r,o,s=this;e=t&&t.keyCode===8?-1:1,i=Mn(s.control_input);let a=[];if(s.activeItems.length)o=Xe(s.activeItems,e),r=We(o),e>0&&r++,B(s.activeItems,l=>a.push(l));else if((s.isFocused||s.settings.mode==="single")&&s.items.length){let l=s.controlChildren(),c;e<0&&i.start===0&&i.length===0?c=l[s.caretPos-1]:e>0&&i.start===s.inputValue().length&&(c=l[s.caretPos]),c!==void 0&&a.push(c)}if(!s.shouldDelete(a,t))return!1;for(F(t,!0),typeof r<"u"&&s.setCaret(r);a.length;)s.removeItem(a.pop());return s.inputState(),s.positionDropdown(),s.refreshOptions(!1),!0}shouldDelete(t,e){let i=t.map(r=>r.dataset.value);return!(!i.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(i,e)===!1)}advanceSelection(t,e){var i,r,o=this;o.rtl&&(t*=-1),!o.inputValue().length&&(vt(Xt,e)||vt("shiftKey",e)?(i=o.getLastActive(t),i?i.classList.contains("active")?r=o.getAdjacent(i,t,"item"):r=i:t>0?r=o.control_input.nextElementSibling:r=o.control_input.previousElementSibling,r&&(r.classList.contains("active")&&o.removeActiveItem(i),o.setActiveItemClass(r))):o.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return Xe(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,dt(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var i,r;let o=this;if(typeof this.settings.render[t]!="function"||(r=o.settings.render[t].call(this,e,ve),!r))return null;if(r=it(r),t==="option"||t==="option_create"?e[o.settings.disabledField]?I(r,{"aria-disabled":"true"}):I(r,{"data-selectable":""}):t==="optgroup"&&(i=e.group[o.settings.optgroupValueField],I(r,{"data-group":i}),e.group[o.settings.disabledField]&&I(r,{"data-disabled":""})),t==="option"||t==="item"){let s=zt(e[o.settings.valueField]);I(r,{"data-value":s}),t==="item"?(X(r,o.settings.itemClass),I(r,{"data-ts-item":""})):(X(r,o.settings.optionClass),I(r,{role:"option",id:e.$id}),e.$div=r,o.options[s]=e)}return r}_render(t,e){let i=this.render(t,e);if(i==null)throw"HTMLElement expected";return i}clearCache(){B(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){let e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var r=this,o=r[e];r[e]=function(){var s,a;return t==="after"&&(s=o.apply(r,arguments)),a=i.apply(r,arguments),t==="instead"?a:(t==="before"&&(s=o.apply(r,arguments)),s)}}};var cr=(n,t,e,i)=>{n.addEventListener(t,e,i)};function Gn(){cr(this.input,"change",()=>{this.sync()})}var ur=n=>typeof n>"u"||n===null?null:dr(n),dr=n=>typeof n=="boolean"?n?"1":"0":n+"",zn=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},fr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(pr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},pr=n=>typeof n=="string"&&n.indexOf("<")>-1;function qn(n){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;let i=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},n);var r=function(a,l){l?(a.checked=!0,i.uncheckedClassNames&&a.classList.remove(...i.uncheckedClassNames),i.checkedClassNames&&a.classList.add(...i.checkedClassNames)):(a.checked=!1,i.checkedClassNames&&a.classList.remove(...i.checkedClassNames),i.uncheckedClassNames&&a.classList.add(...i.uncheckedClassNames))},o=function(a){setTimeout(()=>{var l=a.querySelector("input."+i.className);l instanceof HTMLInputElement&&r(l,a.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var s=t.settings.render.option;t.settings.render.option=(a,l)=>{var c=fr(s.call(t,a,l)),d=document.createElement("input");i.className&&d.classList.add(i.className),d.addEventListener("click",function(f){zn(f)}),d.type="checkbox";let u=ur(a[t.settings.valueField]);return r(d,!!(u&&t.items.indexOf(u)>-1)),c.prepend(d),c}}),t.on("item_remove",s=>{var a=t.getOption(s);a&&(a.classList.remove("selected"),o(a))}),t.on("item_add",s=>{var a=t.getOption(s);a&&o(a)}),t.hook("instead","onOptionSelect",(s,a)=>{if(a.classList.contains("selected")){a.classList.remove("selected"),t.removeItem(a.dataset.value),t.refreshOptions(),zn(s,!0);return}e.call(t,s,a),o(a)})}var hr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(gr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},gr=n=>typeof n=="string"&&n.indexOf("<")>-1;function Un(n){let t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:i=>`<div class="${i.className}" title="${i.title}">&#10799;</div>`},n);t.on("initialize",()=>{var i=hr(e.html(e));i.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(i)})}var mr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Tt=(n,t,e,i)=>{n.addEventListener(t,e,i)},vr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},br=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(yr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},yr=n=>typeof n=="string"&&n.indexOf("<")>-1,_r=(n,t)=>{vr(t,(e,i)=>{e==null?n.removeAttribute(i):n.setAttribute(i,""+e)})},wr=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n.nextSibling)},Sr=(n,t)=>{var e;(e=n.parentNode)==null||e.insertBefore(t,n)},Er=(n,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,n==t)return!0}while(t&&t.previousElementSibling);return!1};function Xn(){var n=this;if(n.settings.mode!=="multi")return;var t=n.lock,e=n.unlock;let i=!0,r;n.hook("after","setupTemplates",()=>{var o=n.settings.render.item;n.settings.render.item=(s,a)=>{let l=br(o.call(n,s,a));_r(l,{draggable:"true"});let c=g=>{i||mr(g),g.stopPropagation()},d=g=>{r=l,setTimeout(()=>{l.classList.add("ts-dragging")},0)},u=g=>{g.preventDefault(),l.classList.add("ts-drag-over"),v(l,r)},f=()=>{l.classList.remove("ts-drag-over")},v=(g,E)=>{E!==void 0&&(Er(E,l)?wr(g,E):Sr(g,E))},p=()=>{var g;document.querySelectorAll(".ts-drag-over").forEach(O=>O.classList.remove("ts-drag-over")),(g=r)==null||g.classList.remove("ts-dragging"),r=void 0;var E=[];n.control.querySelectorAll("[data-value]").forEach(O=>{if(O.dataset.value){let m=O.dataset.value;m&&E.push(m)}}),n.setValue(E)};return Tt(l,"mousedown",c),Tt(l,"dragstart",d),Tt(l,"dragenter",u),Tt(l,"dragover",u),Tt(l,"dragleave",f),Tt(l,"dragend",p),l}}),n.hook("instead","lock",()=>(i=!1,t.call(n))),n.hook("instead","unlock",()=>(i=!0,e.call(n)))}var Or=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},Cr=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Ar(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Ar=n=>typeof n=="string"&&n.indexOf("<")>-1;function Wn(n){let t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:i=>'<div class="'+i.headerClass+'"><div class="'+i.titleRowClass+'"><span class="'+i.labelClass+'">'+i.title+'</span><a class="'+i.closeClass+'">&times;</a></div></div>'},n);t.on("initialize",()=>{var i=Cr(e.html(e)),r=i.querySelector("."+e.closeClass);r&&r.addEventListener("click",o=>{Or(o,!0),t.close()}),t.dropdown.insertBefore(i,t.dropdown.firstChild)})}var xr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Dr=(n,...t)=>{var e=Tr(t);n=Ir(n),n.map(i=>{e.map(r=>{i.classList.remove(r)})})},Tr=n=>{var t=[];return xr(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Ir=n=>(Array.isArray(n)||(n=[n]),n),Lr=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function Qn(){var n=this;n.hook("instead","setCaret",t=>{n.settings.mode==="single"||!n.control.contains(n.control_input)?t=n.items.length:(t=Math.max(0,Math.min(n.items.length,t)),t!=n.caretPos&&!n.isPending&&n.controlChildren().forEach((e,i)=>{i<t?n.control_input.insertAdjacentElement("beforebegin",e):n.control.appendChild(e)})),n.caretPos=t}),n.hook("instead","moveCaret",t=>{if(!n.isFocused)return;let e=n.getLastActive(t);if(e){let i=Lr(e);n.setCaret(t>0?i+1:i),n.setActiveItem(),Dr(e,"last-active")}else n.setCaret(n.caretPos+t)})}var Pr=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},kr=(n,t,e,i)=>{n.addEventListener(t,e,i)},Fr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},Jn=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Mr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Mr=n=>typeof n=="string"&&n.indexOf("<")>-1,Nr=(n,...t)=>{var e=Rr(t);n=Hr(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Rr=n=>{var t=[];return Fr(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Hr=n=>(Array.isArray(n)||(n=[n]),n);function Zn(){let n=this;n.settings.shouldOpen=!0,n.hook("before","setup",()=>{n.focus_node=n.control,Nr(n.control_input,"dropdown-input");let t=Jn('<div class="dropdown-input-wrap">');t.append(n.control_input),n.dropdown.insertBefore(t,n.dropdown.firstChild);let e=Jn('<input class="items-placeholder" tabindex="-1" />');e.placeholder=n.settings.placeholder||"",n.control.append(e)}),n.on("initialize",()=>{n.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:n.isOpen&&(Pr(e,!0),n.close()),n.clearActiveItems();return;case 9:n.focus_node.tabIndex=-1;break}return n.onKeyDown.call(n,e)}),n.on("blur",()=>{n.focus_node.tabIndex=n.isDisabled?-1:n.tabIndex}),n.on("dropdown_open",()=>{n.control_input.focus()});let t=n.onBlur;n.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==n.control_input))return t.call(n)}),kr(n.control_input,"blur",()=>n.onBlur()),n.hook("before","close",()=>{n.isOpen&&n.focus_node.focus({preventScroll:!0})})})}var Se=(n,t,e,i)=>{n.addEventListener(t,e,i)};function ti(){var n=this;n.on("initialize",()=>{var t=document.createElement("span"),e=n.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",n.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(let o of i)t.style[o]=e.style[o];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),n.on("update item_add item_remove",r),Se(e,"input",r),Se(e,"keyup",r),Se(e,"blur",r),Se(e,"update",r)})}function ei(){var n=this,t=n.deleteSelection;this.hook("instead","deleteSelection",e=>n.activeItems.length?t.call(n,e):!1)}function ni(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}var Br=(n,t,e)=>{for(;n&&n.matches;){if(n.matches(t))return n;n=n.parentNode}},Kr=(n,t)=>{if(!n)return-1;t=t||n.nodeName;for(var e=0;n=n.previousElementSibling;)n.matches(t)&&e++;return e};function ii(){var n=this,t=n.onKeyDown;n.hook("instead","onKeyDown",e=>{var i,r,o,s;if(!n.isOpen||!(e.keyCode===37||e.keyCode===39))return t.call(n,e);n.ignoreHover=!0,s=Br(n.activeOption,"[data-group]"),i=Kr(n.activeOption,"[data-selectable]"),s&&(e.keyCode===37?s=s.previousSibling:s=s.nextSibling,s&&(o=s.querySelectorAll("[data-selectable]"),r=o[Math.min(o.length-1,i)],r&&n.setActiveOption(r)))})}var $r=n=>(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ri=(n,t=!1)=>{n&&(n.preventDefault(),t&&n.stopPropagation())},oi=(n,t,e,i)=>{n.addEventListener(t,e,i)},si=n=>{if(n.jquery)return n[0];if(n instanceof HTMLElement)return n;if(Yr(n)){var t=document.createElement("template");return t.innerHTML=n.trim(),t.content.firstChild}return document.querySelector(n)},Yr=n=>typeof n=="string"&&n.indexOf("<")>-1;function ai(n){let t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},n);var e=this;if(t.append){var i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+$r(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(o,s)=>{var a=si(r.call(e,o,s)),l=si(i);return a.appendChild(l),oi(l,"mousedown",c=>{ri(c,!0)}),oi(l,"click",c=>{e.isLocked||(ri(c,!0),!e.isLocked&&e.shouldDelete([a],c)&&(e.removeItem(a),e.refreshOptions(!1),e.inputState()))}),a}})}}function li(n){let t=this,e=Object.assign({text:i=>i[t.settings.labelField]},n);t.on("item_remove",function(i){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[i];r&&t.setTextboxValue(e.text.call(t,r))}})}var Vr=(n,t)=>{if(Array.isArray(n))n.forEach(t);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},jr=(n,...t)=>{var e=Gr(t);n=zr(n),n.map(i=>{e.map(r=>{i.classList.add(r)})})},Gr=n=>{var t=[];return Vr(n,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},zr=n=>(Array.isArray(n)||(n=[n]),n);function ci(){let n=this,t=n.canLoad,e=n.clearActiveOption,i=n.loadCallback;var r={},o,s=!1,a,l=[];if(n.settings.shouldLoadMore||(n.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(n.activeOption){var f=n.selectable(),v=Array.from(f).indexOf(n.activeOption);if(v>=f.length-2)return!0}return!1}),!n.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";n.settings.sortField=[{field:"$order"},{field:"$score"}];let c=u=>typeof n.settings.maxOptions=="number"&&o.children.length>=n.settings.maxOptions?!1:!!(u in r&&r[u]),d=(u,f)=>n.items.indexOf(f)>=0||l.indexOf(f)>=0;n.setNextUrl=(u,f)=>{r[u]=f},n.getUrl=u=>{if(u in r){let f=r[u];return r[u]=!1,f}return n.clearPagination(),n.settings.firstUrl.call(n,u)},n.clearPagination=()=>{r={}},n.hook("instead","clearActiveOption",()=>{if(!s)return e.call(n)}),n.hook("instead","canLoad",u=>u in r?c(u):t.call(n,u)),n.hook("instead","loadCallback",(u,f)=>{if(!s)n.clearOptions(d);else if(a){let v=u[0];v!==void 0&&(a.dataset.value=v[n.settings.valueField])}i.call(n,u,f),s=!1}),n.hook("after","refreshOptions",()=>{let u=n.lastValue;var f;c(u)?(f=n.render("loading_more",{query:u}),f&&(f.setAttribute("data-selectable",""),a=f)):u in r&&!o.querySelector(".no-results")&&(f=n.render("no_more_results",{query:u})),f&&(jr(f,n.settings.optionClass),o.append(f))}),n.on("initialize",()=>{l=Object.keys(n.options),o=n.dropdown_content,n.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},n.settings.render),o.addEventListener("scroll",()=>{n.settings.shouldLoadMore.call(n)&&c(n.lastValue)&&(s||(s=!0,n.load.call(n,n.lastValue)))})})}K.define("change_listener",Gn);K.define("checkbox_options",qn);K.define("clear_button",Un);K.define("drag_drop",Xn);K.define("dropdown_header",Wn);K.define("caret_position",Qn);K.define("dropdown_input",Zn);K.define("input_autogrow",ti);K.define("no_backspace_delete",ei);K.define("no_active_items",ni);K.define("optgroup_columns",ii);K.define("remove_button",ai);K.define("restore_on_backspace",li);K.define("virtual_scroll",ci);var ui=K;var Je=class n{constructor(t=".rs-util-settings-form"){typeof t=="object"?this.form=t:this.form=document.querySelector(t),this.form.settingsPage=this,n.listen("change",".rs-util-settings-form",this.enableSaveButton.bind(this)),n.listen("change","[data-controls]",e=>this.showTogglableControls(e)),n.listen("click",'[data-action="save-rs-util-page"]',()=>this.save()),n.listen("click",".rs-util-settings-page__tab-toggle",e=>this.clickTab(e)),n.listen("click",".rs-util-settings-field-row-ordering",e=>this.clickReorderButton(e)),n.listen("click",".rs-util-settings-page [data-action]",e=>this.handleAction(e)),n.listen("submit",".rs-util-settings-form",this.onSubmit.bind(this)),window.addEventListener("popstate",this.onPopState),this.init()}init(){this.form.querySelectorAll("[data-toggled-by]").forEach(s=>{let a=this.form.querySelector(`#${s.dataset.toggledBy}`);a&&this.showTogglableControls(a)}),this.form.querySelectorAll("[data-toggles-group]").forEach(s=>{let a;if(s.dataset.togglesGroup==="self"){a=s.closest(".rs-util-settings-field-group");let l=s.closest(".rs-util-settings-field-row"),c=a.children[0],d=a.children[1];d.setAttribute("aria-hidden",s.checked?"false":"true"),d.setAttribute("data-toggled-by",s.id),c.append(l)}else a=this.form.querySelector(`#${s.dataset.togglesGroup}`),a.setAttribute("aria-hidden",s.checked?"false":"true"),a.setAttribute("data-toggled-by",s.id);s.setAttribute("aria-expanded",s.checked?"true":"false"),s.setAttribute("aria-controls",`[data-toggled-by="${s.id}"]`),s.setAttribute("data-controls",`[data-toggled-by="${s.id}"]`)}),this.form.querySelectorAll("[data-ordered]").forEach((s,a)=>{let l=s.querySelector("input[data-ordering-field]");if(!(l?.value??!1))return;s.currentOrder=l.value||a+1;let c=document.createElement("div");c.classList.add("rs-util-settings-field-row-order-controls"),s.append(c);let d=document.createElement("button");d.type="button",d.textContent="Move field up",d.setAttribute("data-action","move-up"),d.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--up"),c.append(d);let u=document.createElement("button");u.type="button",u.textContent="Move field down",u.setAttribute("data-action","move-down"),u.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--down"),c.append(u);let f=document.createElement("button");f.type="button",f.textContent="Drag to reorder",f.classList.add("button","rs-util-settings-field-row-ordering","rs-util-settings-field-row-ordering--grabber"),c.append(f),s.parentElement.dataset.orderingGroup=s.dataset.ordered}),this.form.querySelectorAll("[data-ordering-group]").forEach(s=>{[...s.children].sort((a,l)=>a.currentOrder-l.currentOrder).forEach(a=>s.appendChild(a)),n.makeSortable(s,{handle:".rs-util-settings-field-row-ordering--grabber",onSort:()=>this.updateSortingIds(s)})}),document.querySelectorAll("[data-use-tom-select]").forEach(this.makeSelectable.bind(this));let o=new URL(window.location.href);o.hash&&n.switchTab(o.hash.substring(1),this.form),document.dispatchEvent(new CustomEvent("rs-util-settings-page-ready",{detail:this}))}handleAction(t){switch(t.dataset.action){case"remove-item":n.removeListItem(t.closest(".rs-util-settings-sortable-list-item")),this.enableSaveButton();break}}save(){this.onSubmit()}addMessage(t,e="info"){let i=this.form.querySelector(".rs-util-settings-form-messages"),r=document.createElement("p");r.classList.add(`is-state-${e}`),r.textContent=t,i.append(r)}clearMessages(){let t=this.form.querySelector(".rs-util-settings-form-messages");t.innerHTML=""}onSubmit(){this.setState("saving");let t=new FormData(this.form),e=new URLSearchParams(t);fetch(this.form.action,{method:"POST",body:e}).then(i=>i.text()).then(i=>{let r=new URL(window.location.href).hash,o=document.createElement("html");o.innerHTML=i;let s=o.querySelector("form.rs-util-settings-form");this.form.replaceWith(s),this.form=s,this.init(),this.setState("saved"),this.addMessage("Settings saved successfully.","success")}).catch(i=>{console.error(i),this.setState("error"),this.openDialog({title:"Error on save",body:"There was an error saving your settings. More details are in the developer console."})}).finally(()=>{window.scrollTo({top:0,behavior:"smooth"})})}setState(t=null){this.form.classList.entries().forEach(e=>{e[1].substring(0,8)==="is-state"&&this.form.classList.remove(e[1])}),t&&this.form.classList.add(`is-state-${t}`)}clickTab(t){history.pushState(null,null,`#${t.dataset.section}`),n.switchTab(t.dataset.section,this.form)}clickReorderButton(t){let e=t.closest(".rs-util-settings-field-row");if(!e.querySelector("input[data-ordering-field]"))return;let r=t.dataset.action==="move-up"?e.previousElementSibling:e.nextElementSibling;r&&(t.dataset.action==="move-up"?e.insertAdjacentElement("afterend",r):e.insertAdjacentElement("beforebegin",r),this.enableSaveButton(),this.updateSortingIds(e.closest("[data-ordering-group]")))}updateSortingIds(t){t.querySelectorAll(".rs-util-settings-field-row").forEach((i,r)=>{i.querySelector("input[data-ordering-field]").value=r+1,i.currentOrder=r+1})}showTogglableControls(t){let e=this.form.querySelectorAll(`[data-toggled-by="${t.id}"]`);e.forEach(i=>{i.setAttribute("aria-hidden",t.checked??(t.value||!1)?"false":"true")}),e.length&&(t.setAttribute("aria-expanded",t.checked??(t.value||!1)?"true":"false"),t.setAttribute("aria-controls",`[data-toggled-by="${t.id}"]`),t.setAttribute("data-controls",`[data-toggled-by="${t.id}"]`))}onPopState(){let e=new URL(window.location.href).hash.replace("#","");n.switchTab(e,this.form)}enableSaveButton(){this.setState(null),document.querySelector(".rs-util-settings-page .rs-util-settings-page__submit").disabled=!1}static switchTab(t,e){t||(t=e.querySelector(".rs-util-settings-section[data-section]").dataset.section),document.querySelectorAll(".rs-util-settings-page__tab-toggle").forEach(r=>{r.setAttribute("aria-expanded",r.dataset.section===t?"true":"false"),e.querySelector(`.rs-util-settings-section[data-section="${r.dataset.section}"]`).setAttribute("aria-hidden",r.dataset.section===t?"false":"true")})}static listen(t,e,i){document.addEventListener(t,r=>{let o=r.target.closest(e);o&&(r.preventDefault(),i(o,r))})}makeSelectable(t,e={}){let i=(o,s,...a)=>(document.dispatchEvent(new CustomEvent(`rs-util-select-${o}`,{detail:{el:s,args:a}})),!0),r={onChange:(...o)=>i("change",t,...o),onItemAdd:(...o)=>i("item-add",t,...o),onItemRemove:(...o)=>i("item-remove",t,...o),onOptionAdd:(...o)=>i("option-add",t,...o),onOptionRemove:(...o)=>i("option-remove",t,...o),onDropdownOpen:(...o)=>i("open",t,...o),onDropdownClose:(...o)=>i("close",t,...o),onFocus:(...o)=>i("focus",t,...o),onBlur:(...o)=>i("blur",t,...o),onInitialize:(...o)=>i("initialize",t,...o),...e};if(t.dataset.action==="add-item"){let o=t.closest(".rs-util-settings-field-value"),s=o.querySelector(".rs-util-settings-sortable-list");n.makeSortable(s,{onSort:()=>{this.updateListValues(o)}});let a=(l,...c)=>{let d=t.currentResults?.[l]??l;this.addListItem(o,l,d),t.tom.clear(),t.tom.blur()};r.onItemAdd=a.bind(this)}if(t.dataset.source){let o=JSON.parse(t.dataset.source),s=o.value.split("."),a=o.label.split(".");r.load=(l,c)=>{let d=o.url.replace("@query",encodeURIComponent(l));fetch(d).then(u=>u.json()).then(u=>{let f=[];t.currentResults??={},u.forEach(v=>{let p=v;s.forEach(E=>{p=p[E]});let g=v;a.forEach(E=>{g=g[E]}),f.push({value:p,label:g}),t.currentResults[p]=g}),c(f)}).catch(u=>console.error(u))},r.valueField="value",r.labelField="label",r.searchField="label"}if(t.dataset.useTomSelect!=="true")try{let o=JSON.parse(t.dataset.tomSelectArgs??"{}");o&&Object.keys(o).forEach(s=>{r[s]=o[s]})}catch{}t.tom=new ui(t,r)}static makeSortable(t,e={}){On.create(t,{animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",handle:".rs-util-settings-draggable-handle",...e})}addListItem=(t,e,i)=>{let r=(t.querySelector('input[type="hidden"]').value?JSON.parse(t.querySelector('input[type="hidden"]').value):null)||[];r.push(e),t.querySelector('input[type="hidden"]').value=JSON.stringify(r);let o=document.createElement("div");o.classList.add("rs-util-settings-sortable-list-item"),o.dataset.value=e,o.innerHTML=`
			<span class="rs-util-settings-draggable-handle"></span>
			<span>${i}</span>
			<button type="button" class="rs-util-settings-trash-btn" data-action="remove-item">Remove Item</button>
		`,t.querySelector(".rs-util-settings-sortable-list").append(o),this.enableSaveButton()};static removeListItem=t=>{let e=t.closest(".rs-util-settings-field-value");t.remove(),this.updateListValues(e),this.enableSaveButton()};updateListValues(t){let e=t.querySelector('input[type="hidden"]'),i=t.querySelector(".rs-util-settings-sortable-list"),r=[];i.querySelectorAll(".rs-util-settings-sortable-list-item").forEach(o=>{r.push(o.dataset.value)}),e.value=JSON.stringify(r),this.enableSaveButton()}openDialog(t){new $t(t).open()}};})();
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*/
//# sourceMappingURL=class.settingsPage.min.js.map
